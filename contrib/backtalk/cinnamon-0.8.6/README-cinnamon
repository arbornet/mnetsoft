	           BACKTALK CINNAMON SYNDICATION INTERFACE
		           (c) 2005  Jan Wolter

			      Version 0.8.6
                    Requires Backtalk Version 1.3.17

DESCRIPTION:

   Cinnamon is an Backtalk interface for generating syndication feeds.
   The following are the major versions are supported:

      RSS-0.91     An outdated format that may be useful to users with
                   outdated software.

      RSS-1.0      Current version of the RDF branch of RSS.  This is not
                   obsoleted by RSS-2.0.  Uses Dublin Core elements.

      RSS-2.0      Enhanced successor to RSS-0.91.  Uses only the core
                   elements.

      RSS-2.0/DC   RSS-2.0 with some Dublin Core elements.

      Atom-1.0     The possible successor for RSS.

    I'm not going to tell you which one to use, because I'd like to remain
    a conscientious objector in the RSS format holy wars.  The default format
    is 'RSS-2.0/DC' because Backtalk data seems to fit into that framework
    most comfortably.

    There are also some other formats supported, of various degrees of
    dubiousity.  Some are seriously proposed, but unlikely to win wide
    acceptance in their current form.  Some are jokes.  But we can generate
    them anyway:

      RSS-1.1      A proposed cleanup of RSS-1.0.  Still a draft spec and
                   not widely used.

      RSS-3.0      Joke syndication format from Aaron Swartz.

      ESF          Joke syndication format from Nicholas Avenell.

    This release will support only two type of syndication feed:
    lists of items in a conference, and lists of responses to an item.  In
    the future, I'd like to support personalized user feeds that include
    activity in a particular user's hot list conferences and filter out
    messages by people on the user's ignore list.

    The feed for a list of items in a conference will be available at

        http://<backtalkURL>/cinnamon?conf=<confernce>

    The feed for a list of responses in an item will be available at

        http://<backtalkURL>/cinnamon?conf=<confernce>&item=<item>

    Where <backtalkURL> is the usual URL of the backtalk CGI program, and
    <conference> is the name of a conference, and <item> is the number of
    the item.  If no conference is give, the default conference will appear.

    Optional arguments that can be added to this include:

       fmt=<format>
          Here <format> is one of the format strings listed above, like
	  RSS-1.0 or ESF.  The default is RSS-2.0/DC

       flav=<flavor>
          Here  <flavor> is one of the Backtalk interface flavors that you
	  have installed on your site, like pistachio, abalone, or papaya.
	  All the links back to your site will be to the named interface.

       login=Y|N
          If login is 'Y', then the links in the feed will be to the
	  authenticated version of Backtalk.  The default is 'N', which
	  gives anonymous feeds.  Sites that don't allow anonymous reading
	  are always Y.  Sites using form authentiction instead of basic
	  authentication are always N.

       attrib=Y|N
          If attrib is 'Y', then the names and login ids of item authors are
	  included in item titles.  In this case a separate author or
	  title field will only be given if there is additional information
	  to provide about the author, like an email address.  Note that
	  turning this off may cause slightly non-compliant feeds with
	  the fmt=RSS-2.0 option.

       len=<number>
          In the conference feed, the descriptions of the items are
	  generated by taking the first 150 characters of the item text.
	  Changing this parameter changes that limit.  If you set it to
	  zero, no descriptions will be sent.  If you set it to -1, the
	  full item text will be sent.  Other values below 20 will be
	  treated as 20.  With RSS-0.91 this can not be above 500.

       days=<number>
          Normally only items entered in the last 7 days will be included
	  in the feed.  You can change that value with this parameter.
	  If set to zero, all items will be included.  Note that with
	  RSS-0.91, there can never be more than 15 items included.

INSTALLATION:

(1) Make sure that you have the correct version of Backtalk installed.  The
    top of this file tells the minimum version of Backtalk needed to support
    the scripts in this package.  Later versions of Backtalk may or may not
    be compatible.  If we release a version of Backtalk not compatible with
    this interface package, a new version of this package will be released.

(2) Unpack the cinnamon distribution.

    OK, if you hadn't already done that, you wouldn't be reading this, would
    you?  We'll refer to the full path of the new directory containing the
    distribution as DISTDIR.

(3) Versions of Backtalk after 1.1.4 have a 'btinstall' script to simplify
    the installation of seperately distributed interface packages.  Btinstall
    assumes that the configuration of Backtalk hasn't radically changed since
    you used Backtalk's 'make install' commands to install the system.  If
    you've manually rearranged what goes where on the disk, btinstall will
    need some editing, or you'll need to install the interface manually.

    TO INSTALL USING BTINSTALL:

    (a)  Login either as root or as the user that owns Backtalk's files on
         your system.

    (b)  Find where the 'btinstall' script was installed, so you can run it.
         You want to be sure you get the installed copy of the program, which
	 has been modified with information about your installation, not
	 the one in the distribution directory.

    (c)  cd into the unpacked distribution directory, DISTDIR.

    (d)  Run 'btinstall'

    TO INSTALL WITHOUT BTINSTALL:

    This distribution contains one subdirectory.  The 'script' subdirectory
    contains all the Backtalk scripts that implement the interface.
    This just needs to be moved into directories named 'cinnamon' under
    Backtalk's script directory.  In a bit more detail:

    (a) Find the Backtalk script directory.  The default pathname is
        /usr/local/backtalk/script, but it will vary on different systems.
        Typically it will contain the config.bt script, the userinfo.bt script
        and subdirectories for all installed interfaces.

    (b) Create a new subdirectory under the script directory, called
        'cinnamon'.  Make sure the directory is writable to the Backtalk
	account, so that compiled copies of the scripts can be written into
	it by Backtalk.

    (c) Copy all the files in DISTDIR/script to the new cinnamon directory.

(4) If your site does not allow anonymous reading then you will need to
    add 'cinnamon' to publicflavors in the top-level config.bt file.  That
    is, change
        /publicflavors (public) defconstant
    to
        /publicflavors (public,cinnamon) defconstant
    Otherwise nobody will be able to access the RSS feed.  Of course, if
    you do this, anyone will be able to access the RSS feed, so this
    could compromise the privacy of your site.

 That's all.

CUSTOMIZATION:

 There is a lot of stuff to edit in the cinnamon/config.bt file.  Some
 customization here will almost certainly be wanted at all sites.  There are
 comments in the file.

 Once the cinnamon interface is installed, you'll want to advertise it on the
 regular Backtalk pages.  There are two main mechanisms used to advertise
 an RSS feed corresponding to a page.  The first is to place an orange
 "XML" icon on the page.  The second is to put links in the header of the
 pages so that smart tools (like the FireFox browser) can "autodiscover" the
 feed.  To cause Backtalk to generate these, you'll want to edit the global
 configuration file, and enable "use_rss_icon" and/or "use_rss_autodiscovery".
 Most Backtalk interfaces will do the right thing when these flags are turned
 on.
