<HTML>
<HEAD>
<TITLE>Backtalk Script Language Reference Manual</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<H1>Backtalk Script Language<BR>Reference Manual</H1>
Version 1.3.30
<P>
&copy; 1996-2003: Jan Wolter, Steve Weiss
</CENTER>
<H2>Description</H2>
The Backtalk script language
is used internally by
<EM>Backtalk</EM>
to generate html web pages for conferencing.
Conference participants should not need to know anything about the script
language, since it is used entirely to configure the system.
<P>
It is a RPN, stack-based language, quite similar to Postscript (Postscript
is a trademark of Adobe Systems incorporated).
It is actually a fully-capable and reasonably-efficient programming language,
with special commands built in for accessing conferences.
It is oriented toward generating text in a batch mode.
<P>
There is a <A HREF=tutorial.html>Backtalk Tutorial</A> page giving a brief
tutorial introduction to the script language.
Readers of this manual may also find the
<A HREF=glossary.html>Backtalk Glossary</A>
helpful.  This describes many of the functions and terminology associated with
Backtalk.
<H2>Contents</H2>
<UL>
<LI><A HREF="#datatypes">Data Types</A>
<LI><A HREF="#execution">Execution</A>
<LI><A HREF="#operators">Built-in Operators</A>
    <UL>
    <LI><A HREF="#stackop">Operand Stack Operators</A>
    <LI><A HREF="#dictop">Dictionary Operators</A>
    <LI><A HREF="#mathop">Math Operators</A>
    <LI><A HREF="#stringop">String Operators</A>
    <LI><A HREF="#arrayop">Array Operators</A>
    <LI><A HREF="#selop">Selector Manipulation Operators</A>
    <LI><A HREF="#boolop">Relational and Boolean Operators</A>
    <LI><A HREF="#contop">Control Operators</A>
    <LI><A HREF="#outop">Output Operators</A>
    <LI><A HREF="#regexop">Regular Expression Operators</A>
    <LI><A HREF="#fileop">File Operators</A>
    <LI><A HREF="#userop">User Database Operators</A>
    <LI><A HREF="#miscop">Miscellaneous Operators</A>
    <LI><A HREF="#confop">Conferencing Operators</A>
    <LI><A HREF="#emailop">Email Operators</A>
    </UL>
<LI><A HREF="#variables">Built-in Variables</A>
    <UL>
    <LI><A HREF="#confvar">Conferencing Variables</A>
    <LI><A HREF="#miscvar">Miscellaneous Variables</A>
    </UL>
<LI><A HREF="#regular">Regular Expression Syntax</A>
<LI><A HREF="#index">Alphabetical Index</A>
</UL>
<H2><A NAME="datatypes">Data Types</A></H2>
<P>
Backtalk functions operate on the following kinds of data types:
<DL>
<P>
<DT>integer
<DD>Backtalk integer objects can have the same range of values as your
    compiler's <TT>int</TT> data type.
    Normally this range is between -2,147,483,648 and 2,147,483,647.
<P>
<DT>time
<DD>Backtalk time objects can represent times in whatever range your
    version of Unix supports.  Usually this range is between Jan 1, 1970
    and Jan 18, 2038, but if your Unix can handle dates after 2038, Backtalk
    will support them too.
<P>
<DT>mark
<DD>Mark objects normally have no value.  They are pushed on the stack to
    mark locations on the stack.
<P>
<DT>string
<DD>String objects may contain an arbitrarily long sequence of
    ASCII characters.
<P>
<DT>literal
<DD>Literal objects are variable or function names.
    They can be up to 32 characters long, and may contain letters, digits
    and underscores, but may not begin with a digit.
    Literal names are case sensitive, so <TT>Count</TT> and <TT>count</TT>
    are two different literals.
<P>
<DT>array
<DD>Array objects can contain an arbitrary number of other objects.
    The objects in an array do not all need to be of the same type, and
    the size of the array will increase or decrease as needed.
<P>
<DT>regular expressions
<DD>Regular expression objects are used for doing fast efficient searches.
    They are similar to Perl regular expressions and can be used in similar
    ways.
<P>
<DT>procedure
<DD>Procedures are variations of arrays that contain executable code.
</DL>
<H2><A NAME="execution">Execution</A></H2>
Backtalk is a stack-based language.
Most operations take their operand from the stack and push the results back
on the stack.
It isn't as pure about this as Postscript is though.
Many of the conference-related operators operate on special built-in variables.
instead of, or in addition to, the stack.
<P>
The program source is read from a file.
Source file names must end with a <TT>.bt</TT> suffix.
There is no limit on the size of the file or the lengths of the lines.
Comments begin with a percent sign (<TT>%</TT>),
and extend to the end of the line.
<P>
There is one special script called <TT>config.bt</TT> which is used to
configure Backtalk.  It is automatically included as a header in all other
scripts.
<P>
The file contains a sequence of tokens, which are executed in order.
Tokens may be of several types:
<DL>

<P>
<DT>integers
<DD>Integer constants are written as usual (<EM>i.e.</EM>, <TT>1023</TT> or
    <TT>42</TT>.)
    When executed, the value of the integer is pushed on the operand stack.

<P>
<DT>strings
<DD>Strings constants are enclosed in matching parentheses ("(" and ")").
Newlines may appear in strings, and will be stored as newline
characters.
Alternately, newlines can be typed as "\n".
Thus both of the following are equivalent ways to write the same string:
<PRE>
   (One\nTwo\n)

   (One
   Two
   )
</PRE>
There can be parentheses inside the string,
but if they do not balance, they need to be preceded by backslashes.
When executed, a copy of the string is pushed on the operand stack.

<P>
<DT>procedures
<DD>Procedures are enclosed in matching curly-braces ("{" and "}").
Procedures may contain any sequence of tokens, including sub-procedures,
separated by white space.
When executed, a copy of the procedure is pushed on the stack.

<P>
<DT>variables
<DD>Names of variables are entered without adornment, or
with a preceeding slash ("<TT>/</TT>") character.
If the name of a variable is prefixed with a slash ("<TT>/</TT>"), then the
name of the variable is pushed on the stack when it is executed (this
is called a "literal").
If there is no slash, and the variable is defined, then it's
value is pushed on the stack.
If it is not defined, an error occurs.

<P>
<DT>constants
<DD>Constants have the same syntax as variables, but are replaced with their
values during compilation, so they will have entirely disappeared from the
program by the time it is run.  Thus they act similarly to <TT>#define</TT>
variables in the C programming language.
There are some predefined system constants that can only be redefined by the
<TT>config.bt</TT> script.
Unlike variables and functions,
constants are lexically scoped, so if a constant is defined, it can be used
anywhere after that point in the file.

<P>
<DT>regular expressions
<DD>Regular expressions are written enclosed in double-angle brackets, like
    "<TT>&lt;&lt;[a-z]+@[a-z\.]+\.com&gt;&gt;</TT>".
    The full syntax for regular expressions is described
    <A HREF="#regular">below</A>.
    When executed, they are just pushed on the stack.

<P>
<DT>functions
<DD>Function names obey the same syntax as variables.
When executed they pop arguments off the stack and push results on.
Some may have side effects, such as defining variables.
</DL>
<P>
When execution terminates, the contents of the operand stack
(from bottom up) are automatically printed as if the last command in the script
had been a <A HREF="#print_cmd">print</A> command.
Thus scripts often use the stack as an output buffer.
Printing may also be forced earlier with the
<A HREF="#print_cmd">print</A>
command.
<P>
In the list of functions below, the keywords before the function indicate the
objects that the function removes from the stack when executed.
It is an error if they are not present or of the wrong types.
The keywords after the function name indicate the results pushed on the stack
after execution.  A "-" indicates nothing.  A "|" indicates the bottom of the
stack.
<H2><A NAME="operators">Operators</A></H2>
<H3><A NAME="stackop">Operand Stack Operators</A></H3>
The following built-in functions manipulate the operand stack.
Most are identical to the corresponding postscript commands.
<DL>

<P>
<DT><A NAME="pop_cmd">pop</A>
<DD>
<EM>any</EM> <TT>pop</TT> <EM>-</EM>
<P>
Discard the top element from the stack.

<P>
<DT><A NAME="exch_cmd">exch</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>exch</TT>
<EM>any<SUB>2</SUB> any<SUB>1</SUB></EM>
<P>
Exchange top two elements of the stack.

<P>
<DT><A NAME="dup_cmd">dup</A>
<DD>
<EM>any</EM>
<TT>dup</TT>
<EM>any any</EM>
<P>
Duplicate the top element of the stack.

<P>
<DT><A NAME="copy_cmd">copy</A>
<DD>
<EM>any<SUB>1</SUB>...any<SUB>n</SUB> n</EM>
<TT>copy</TT>
<EM>any<SUB>1</SUB>...any<SUB>n</SUB> any<SUB>1</SUB>...any<SUB>n</SUB></EM>
<P>
Duplicate the top <EM>n</EM> elements of the stack.
Doing "1 copy" would be identical to "dup".

<P>
<DT><A NAME="index_cmd">index</A>
<DD>
<EM>any<SUB>n</SUB>...any<SUB>0</SUB> n</EM>
<TT>index</TT>
<EM>any<SUB>n</SUB>...any<SUB>0</SUB> any<SUB>n</SUB></EM>
<P>
Duplicate an arbitrary element off the stack.
Note that the indexing here is zero-based.
Doing "0 index" would be identical to "dup".

<P>
<DT><A NAME="roll_cmd">roll</A>
<DD>
<EM>any<SUB>n-1</SUB>...any<SUB>0</SUB> n j</EM>
<TT>roll</TT>
<EM>any<SUB>j-1 mod n</SUB>...any<SUB>0</SUB>
any<SUB>n-1</SUB>...any<SUB>j mod n</SUB></EM>
<P>
Roll <EM>n</EM> elements upward <EM>j</EM> times.
If <EM>j</EM> is negative, it rolls downward instead.
Doing ``2 1 roll'' would be identical to "exch".
Doing ``k -1 roll'' brings the kth element of the stack to the top.

<P>
<DT><A NAME="select_cmd">select</A>
<DD>
<EM>any<SUB>n-1</SUB> ... any<SUB>0</SUB> n i</EM>
<TT>select</TT>
<EM>any<SUB>i</SUB></EM>
<P>
Of <EM>n</EM> top elements on the stack, discard all but the <EM>i</EM>-th one.

<P>
<DT><A NAME="mark_cmd">mark</A>
<DD>
<EM>-</EM>
<TT>mark</TT>
<EM>mark</EM>
<P>
This pushes a mark onto the stack.
Marks are distinct from all other types of stack elements.
The <A HREF="#lbrack_cmd">[</A> command is identical to <TT>mark</TT>.

<P>
<DT><A NAME="clear_cmd">clear</A>
<DD>
<EM>| any<SUB>1</SUB>...any<SUB>n</SUB></EM>
<TT>clear</TT>
<EM>|</EM>
<P>
Discard all elements from the stack.

<P>
<DT><A NAME="cleartomark_cmd">cleartomark</A>
<DD>
<EM>mark any<SUB>1</SUB>...any<SUB>n</SUB></EM>
<TT>cleartomark</TT>
<EM>-</EM>
<P>
This deletes all stack elements on top of the topmost mark.
It is an error if there is no mark on the stack.

<P>
<DT><A NAME="count_cmd">count</A>
<DD>
<EM>| any<SUB>1</SUB>...any<SUB>n</SUB></EM>
<TT>count</TT>
<EM>| any<SUB>1</SUB>...any<SUB>n</SUB> n</EM>
<P>
Push the count of elements that were on the stack before the execution.

<P>
<DT><A NAME="counttomark_cmd">counttomark</A>
<DD>
<EM>mark any<SUB>1</SUB>...any<SUB>n</SUB></EM>
<TT>count</TT>
<EM>mark any<SUB>1</SUB>...any<SUB>n</SUB> n</EM>
<P>
This counts the number of stack elements on top of the topmost mark.
It is an error if there is no mark on the stack.
</DL>

<H3><A NAME="dictop">Dictionary Operators</A></H3>

Backtalk supports a system dictionary, a constant dictionary, a
stack of user dictionaries, and an environment dictionary.
This is a more complex than the arrangement in Postscript,
but allows us to do more preprocessing at compilation time.
<OL>
<LI>
<EM>System Dictionary</EM> -
The system dictionary contains all of Backtalk's built-in functions,
variables and constants.  It is not possible to add definitions to it,
but you can change some of the variables.
Note that some system dictionary variables are "protected" so that, like
constants, you can't change their values, although their values may change
by themselves during a run, so they aren't constants.
<LI>
<EM>Constant Dictionary</EM> -
All constants defined by the user are stored in the constant dictionary.
New constants can be added without limit, but, of course, their values
cannot be changed once set.
(Actually, this dictionary only exists at compilation time, since constants
should all be gone by run time).
<LI>
<EM>User Dictionary Stack</EM> -
All other user defined functions and variables are stored in the
user dictionaries.  These are kept on a dictionary stack (which is
different from the operand stack).  You can create new dictionaries
on the stack as needed.
<LI>
<EM>Environment Dictionary</EM> -
This dictionary contains all Unix environment variables that Backtalk was
run with.  They are all protected, so you can read them, but not change them.
The values of environment variables are always of string type.
</OL>
When you reference a variable, Backtalk searches for first in the system
dictionary, then in the constant dictionary, then through all the user
dictionaries, starting at the top of the stack and searching down, and
finally, if the variable wasn't defined anywhere else, in the environment
dictionary.
Note that it is possible for there to be different variables by the same
name in more than one dictionary.  In this case, if you reference the
variable, the value returned is the one from the first dictionary searched
in the sequence descriped above.
<P>
This differs from Postscript in that in Postscript the built-in symbols are
always at the bottom of the dictionary stack, while in Backtalk they are at
the top.  That means that in Postscript you can redefine system dictionary
symbols by creating a new symbol by the same name on top of them.  This cannot
be done in Backtalk, because the system dictionary is effectively always on
the top of the stack.
This is a deliberate change, which allows us to bind system dictionary names
at compile time, and perform significant amounts of optimization.
<P>
Before the execution of any other script, Backtalk
will execute the <TT>config.bt</TT> file, which, among other things, creates
the first user dictionary on the user dictionary stack.
If running as a CGI program, it then processes any variables passed in with
the CGI query.  Each name/value pair is processed by storing the value in
a variable with the given name.  If there is a system variable by that name
(which is not protected or a constant),
it will be stored in the system dictionary.  If there is not, a user
dictionary entry will be created for it.
 the <TT>QUERY_STRING</TT> generated by the user, and loads all
the variables from the query string into the system and user dictionaries.
<P>
Backtalk can process GET, PUT, and <TT>multipart/form-data</TT> queries.
A special case occurs if the query is a <TT>multipart/form-data</TT> query,
and if Backtalk has been built to support attachments, and if there is
a query variable whose name begins with "<TT>baa_</TT>".  In such cases,
the value of the variable is stored in a temporary file in the Backtalk
attachment archive, and a temporary attachment handle is saved into the
variable.  This is meant to be used when uploading files to archives, as
the values can be larger than anything we want to keep in memory.
Temporary attachment handles can be turned into real attachment handles
with the <A HREF=#make_attach_cmd>make_attach</A> command.
<DL>

<P>
<DT><A NAME="dict_cmd">dict</A>
<DD>
<EM>-</EM> <TT>dict</TT> <EM>dictionary</EM>
<P>
Create a an empty dictionary and push it on the stack.

<P>
<DT><A NAME="begin_cmd">begin</A>
<DD>
<EM>dictionary</EM> <TT>begin</TT> <EM>-</EM>
<P>
Push a dictionary on top of the dictionary stack.
Note that a "<TT>dict begin</TT>"
must be done before any user variables can be defined, since symbols cannot
be added to the system dictionary.
However, there is normally a "<TT>dict begin</TT>"
in the "config.bt" script that will allocate the first user dictionary.

<P>
<DT><A NAME="end_cmd">end</A>
<DD>
<EM>-</EM> <TT>end</TT> <EM>-</EM>
<P>
Discard the top dictionary from the user dictionary stack.
The system, constants, and environment dictionaries are not actually on the
dictionary stack and cannot be discarded.

<P>
<DT><A NAME="def_cmd">def</A>
<DD>
<EM>label any</EM> <TT>def</TT> <EM>-</EM>
<BR>
<EM>any label</EM> <TT>xdef</TT> <EM>-</EM>
<P>
Sets the symbol <EM>label</EM> to the given value in the current top dictionary.
If <EM>any</EM> is a procedure, this defines a function.
The two versions differ only in the order of arguments.
Constants and protected variables cannot have their values changed.

<P>
<DT><A NAME="store_cmd">store</A>
<DD>
<EM>label any</EM> <TT>store</TT> <EM>-</EM>
<BR>
<EM>any label</EM> <TT>xstore</TT> <EM>-</EM>
<P>
Sets the symbol <EM>label</EM> to the given value in the
topmost dictionary where it is already defined.
If it is not defined, it creates it in the current top dictionary, just
like <A HREF="#def_cmd">def</A>.
If <EM>any</EM> is a procedure, this defines a function.
Constants and protected variables cannot have their values changed.

<P>
<DT><A NAME="undef_cmd">undef</A>
<DD>
<EM>label</EM> <TT>undef</TT> <EM>-</EM>
<P>
Undefines the symbol <EM>label</EM> in the topmost dictionary where it is
defined.
<EM>Note that you cannotundefine system or constant dictionary values</EM>.
If the given symbol is not defined, or is only defined in the system
dictionary, nothing happens.

<P>
<DT><A NAME="defconstant_cmd">defconstant</A>
<DD>
<EM>label any</EM> <TT>defconstant</TT> <EM>-</EM>
<BR>
<EM>any label</EM> <TT>xdefconstant</TT> <EM>-</EM>
<P>
Sets the symbol <EM>label</EM> to the given value in constants dictionary.
Constants are expanded at compilation time, so 
they scope lexically, not dynamically.
The two versions differ only in the order of their arguments.

<P>
<DT><A NAME="undefconstant_cmd">undefconstant</A>
<DD>
<EM>label</EM> <TT>undefconstant</TT> <EM>-</EM>
<P>
Remove the symbol <EM>label</EM> from the constants dictionary.  System
constants (the ones defined below in this document), cannot be undefined.

<P>
<DT><A NAME="inc_cmd">inc</A>
<DD>
<EM>label</EM> <TT>inc</TT> <EM>-</EM>
<P>
This operator increments the named integer variable.
It is equivalent to "dup exec 1 + store" but is quicker.
It is an error if the variable is undefined, or does not contain an
integer.

<P>
<DT><A NAME="dec_cmd">dec</A>
<DD>
<EM>label</EM> <TT>dec</TT> <EM>-</EM>
<P>
This operator decrements the named integer variable.
It is equivalent to "dup exec 1 - store" but is quicker.
It is an error if the variable is undefined, or does not contain an
integer.

<P>
<DT><A NAME="default_cmd">default</A>
<DD>
<EM>label default</EM> <TT>default</TT> <EM>value</EM>
<P>
This checks if the named variable is defined and pushes its value if it is.
If it isn't defined, it pushes the given default value instead.

<P>
<DT><A NAME="defined_cmd">defined</A>
<DD>
<EM>label</EM> <TT>defined</TT> <EM>bool</EM>
<P>
This checks if the named variable is defined and pushes true if it
is and false otherwise.
This may also be used to check if environment variables are defined.

<P>
<DT><A NAME="constant_cmd">constant</A>
<DD>
<EM>label</EM> <TT>constant</TT> <EM>bool</EM>
<P>
This checks if the named variable is defined as a constant
and pushes true if it is and false otherwise.
This is used to do the Backtalk equivalent of the C-language
"<TT>#if defined()</TT>" construct, since it is always resolvable at
compile time.

<P>
<DT><A NAME="lengthd_cmd">length</A>
<DD>
<EM>dictionary</EM> <TT>length</TT> <EM>count</EM>
<P>
Find the number of key/value pairs in a dictionary.

<P>
<DT><A NAME="getd_cmd">get</A>
<DD>
<EM>dictionary key</EM> <TT>get</TT> <EM>value</EM>
<P>
Fetch an element from a dictionary.
The key can be a string or a literal.
It is an error if the key is not in the dictionary.

<P>
<DT><A NAME="known_cmd">known</A>
<DD>
<EM>dictionary key</EM> <TT>known</TT> <EM>boolean</EM>
<P>
Check if a symbol is defined in a dictionary.

<P>
<DT><A NAME="putd_cmd">put</A>
<DD>
<EM>dictionary key value</EM> <TT>put</TT> <EM>-</EM>
<P>
Save a value to a dictionary.
The key can be a string or a literal.

</DL>
<H3><A NAME="mathop">Math Operators</A></H3>
The following built-in functions do integer arithmetic.
All operands must be integers, and all results will be integers.
Function names are not identical to Postscript.
<DL>

<P>
<DT><A NAME="plusm_cmd">+</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM> <TT>+</TT> <EM>int_sum</EM><BR>
<EM>time<SUB>1</SUB> int<SUB>2</SUB></EM> <TT>+</TT> <EM>time_sum</EM><BR>
<EM>int<SUB>1</SUB> time<SUB>2</SUB></EM> <TT>+</TT> <EM>time_sum</EM>
<P>
Compute <EM>int<SUB>1</SUB></EM> plus <EM>int<SUB>2</SUB></EM> and push
the resulting integer.
You can add an integer number of seconds to a time to get a new
time, but
you cannot add together two times.
Note the the <A HREF=#pluss_cmd><TT>+</TT></A> command is also used for
string concatination.

<P>
<DT><A NAME="minus_cmd">-</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM> <TT>-</TT> <EM>int_difference</EM><BR>
<EM>time<SUB>1</SUB> int<SUB>2</SUB></EM> <TT>-</TT> <EM>time_difference</EM><BR>
<EM>time<SUB>1</SUB> time<SUB>2</SUB></EM> <TT>-</TT> <EM>int_difference</EM>
<P>
Compute <EM>int<SUB>1</SUB></EM> minus <EM>int<SUB>2</SUB></EM> and push it
on the stack.  You can also subtract an integer number of seconds from a time
to get another time, or you can subtract two times to get an integer number
of seconds.  Note that in the last case, there may be a possibility of
overflow on some systems.

<P>
<DT><A NAME="star_cmd">*</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM>
<TT>*</TT>
<EM>product</EM>
<P>
Compute <EM>int<SUB>1</SUB></EM> times <EM>int<SUB>2</SUB></EM>.

<P>
<DT><A NAME="slash_cmd">/</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM>
<TT>/</TT>
<EM>quotient</EM>
<P>
Compute the integer part of <EM>int<SUB>1</SUB></EM>
divided by <EM>int<SUB>2</SUB></EM>.

<P>
<DT><A NAME="mod_cmd">mod</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM>
<TT>mod</TT>
<EM>difference</EM>
<P>
Compute the remainder part of <EM>int<SUB>1</SUB></EM>
divided by <EM>int<SUB>2</SUB></EM>.

<P>
<DT><A NAME="neg_cmd">neg</A>
<DD>
<EM>int<SUB>1</SUB></EM>
<TT>neg</TT>
<EM>int<SUB>2</SUB></EM>
<P>
Negative of <EM>int<SUB>1</SUB></EM>.

<P>
<DT><A NAME="abs_cmd">abs</A>
<DD>
<EM>int<SUB>1</SUB></EM>
<TT>abs</TT>
<EM>int<SUB>2</SUB></EM>
<P>
Absolute value of <EM>int<SUB>1</SUB></EM>.

<P>
<DT><A NAME="band_cmd">band</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM> <TT>band</TT> <EM>int</EM>
<P>
Bitwise-and of <EM>int<SUB>1</SUB></EM> and <EM>int<SUB>2</SUB></EM>.

<P>
<DT><A NAME="bor_cmd">bor</A>
<DD>
<EM>int<SUB>1</SUB> int<SUB>2</SUB></EM> <TT>bor</TT> <EM>int</EM>
<P>
Bitwise-or of <EM>int<SUB>1</SUB></EM> and <EM>int<SUB>2</SUB></EM>.

<P>
<DT><A NAME="tilde_cmd">~</A>
<DD>
<EM>int</EM> <TT>~</TT> <EM>int</EM>
<P>
Bitwise-negation of <EM>int</EM>.

</DL>
<H3><A NAME="stringop">String Operators</A></H3>
Backtalk is not particularly rich in string operators.
(Yet?)
Unlike Postscript, each string is unique.  For instance, if you do a
<TT>dup</TT>
on a string, you get two different strings with the same contents, not
two pointers to the same string.
<DL>

<P>
<DT><A NAME="pluss_cmd">+</A>
<DD>
<EM>string<SUB>1</SUB> string<SUB>2</SUB></EM>
<TT>+</TT>
<EM>concatenation</EM>
<P>
Concatenate two strings into one string.

<P>
<DT><A NAME="concatinate_cmd">`<BR>'</A>
<DD>
<TT>`</TT>
<EM>any<SUB>1</SUB> any<SUB>2</SUB> ... any<SUB>n</SUB></EM>
<TT>'</TT>
<EM>concatenation</EM>
<P>
Convert any number of tokens into strings and concatinate them all together
into a single string.  The <TT>`</TT> command just pushs a mark on the stack.
The <TT>'</TT> command pops off everything up to the first <TT>`</TT> it finds,
converts them all to strings (exactly like <A HREF=#cvs_cmd>cvs</A> would),
and concatinates them all into a single string.
If there are arrays on the stack, then all their elements are concatinated
into the string.

<P>
<DT><A NAME="jointomark_cmd">jointomark</A>
<DD>
<TT>mark</TT>
<EM>any<SUB>1</SUB> any<SUB>2</SUB> ... any<SUB>n</SUB> delim</EM>
<TT>jointomark</TT>
<EM>concatenation</EM>
<P>
This is similar to the previous command, but each pair of strings
is separated by a copy of the given delimiter, and empty strings are
discarded.  For example
<PRE>
  mark (a) (b) 17 (c) () (d) (,) jointomark
</PRE>
gives "<TT>(a,b,17,c,d)</TT>.

<P>
<DT><A NAME="lengths_cmd">length</A>
<DD>
<EM>string</EM> <TT>length</TT> <EM>count</EM>
<P>
Find the length of a string.

<P>
<DT><A NAME="gets_cmd">get</A>
<DD>
<EM>string i</EM> <TT>get</TT> <EM>s<SUB>i</SUB></EM>
<P>
Fetch a character from a string.
Indexing is zero-based.
It is an error if the index is out of range.

<P>
<DT><A NAME="substr_cmd">substr</A>
<DD>
<EM>string index length</EM> <TT>substr</TT> <EM>substring</EM>
<P>
Construct a string which contains the subsequences of the given string
starting at the given index and extending for the given number of characters.
If the length is negative, the string ends at the given index.
Indices are zero-based.

<P>
<DT><A NAME="chomp_cmd">chomp</A>
<DD>
<EM>string</EM> <TT>chomp</TT> <EM>string</EM>
<P>
Delete any and all trailing newlines from the end of a string.

<P>
<DT><A NAME="search_cmd">search</A>
<DD>
<EM>string pattern icase</EM> <TT>search</TT> <EM>offset</EM>
<P>
Test if a fixed pattern occurs in a string.
If the pattern is (), the previous <TT>search</TT>
pattern is reused (saving some preprocessing time).
If the search succeeds,
the zero-based offset of the matching string in the text is given.
If it fails, a -1 is pushed.
If the <EM>icase</EM>
argument is true, the search will be case insensitive.

<P>
<DT><A NAME="replace_cmd">replace</A>
<DD>
<EM>string pattern replacement icase</EM> <TT>replace</TT> <EM>newstring</EM>
<P>
Searches for all occurances of a fixed pattern in a string and replaces
them all with the given replacement.
If the <EM>icase</EM>
argument is true, the search will be case insensitive.

<P>
<DT><A NAME="quote_cmd">quote</A>
<DD>
<EM>string</EM> <TT>quote</TT> <EM>string</EM>
<P>
This expands out all less-than (&lt;), greater-than (&gt;), ampersand (&amp;)
and quote (&quot;) 
characters to their corresponding html encodings.
This should be done to any text that we send to the browser that we want to
make sure will not be treated as HTML commands.

<P>
<DT><A NAME="cgiquote_cmd">cgiquote</A>
<DD>
<EM>string</EM> <TT>cgiquote</TT> <EM>string</EM>
<P>
This replaces all spaces with plus signs,
and expands plus sign (+), ampersand (&amp;),
less-than (&lt;), greater-than (&gt;),
equal (=) and percent (%) sign with 3-character hexadecimal codes.
This form of quoting is needed on strings that are to be passed as arguments
in a GET style CGI query.

<P>
<DT><A NAME="jsquote_cmd">jsquote</A>
<DD>
<EM>string</EM> <TT>jsquote</TT> <EM>string</EM>
<P>
Quote a string for use as a JavaScript string.
Encloses it in single quotes, and replace all internal single quotes,
backslashes, and control characters with JavaScript style backslashed
escape codes.  Also expands out '&lt;' and '&gt' characters as hexidecimal
escape sequences.

<P>
<DT><A NAME="cap_cmd">cap</A>
<DD>
<EM>string</EM> <TT>cap</TT> <EM>String</EM>
<P>
Convert the first character of each word in the string from lower case to
upper case.

<P>
<DT><A NAME="caps_cmd">caps</A>
<DD>
<EM>string</EM> <TT>caps</TT> <EM>STRING</EM>
<P>
Convert all lower case characters in the string to upper case.

<P>
<DT><A NAME="wrap_cmd">wrap</A>
<DD>
<EM>string numcols</EM> <TT>wrap</TT> <EM>string</EM>
<P>
This inserts newlines into the given <EM>strings</EM>
so that it contains no lines with longer than <EM>numcols</EM>.

<P>
<DT><A NAME="expand_cmd">expand</A>
<DD>
<EM>string</EM> <TT>expand</TT> <EM>string</EM>
<P>
This expands out all less-than (<TT>&lt;</TT>), greater-than (<TT>&gt;</TT>)
and ampersand (<TT>&amp;</TT>)
characters to their corresponding html encodings, and also makes all
substrings that look like URLs into clickable texts that invoke that URL.
These links will open either in a new window or in the top window,
depending on the setting of the <A HREF="#var_linktonew">linktonew</A>
variable.
It also wraps the string to 79 columns.
It will also expand out cross-references if the script-writer has defined the
functions to process them.  This functions should abide by the following
descriptions:
<P>
<DL>
<P>
<DT><A NAME="format_conf_func">format_conf</A>
<DD>
<EM>conf item resp</EM> <TT>format_conf</TT> <EM>string...</EM>
<P>
The function should push onto the stack a URL
that will point to the conference <EM>conf</EM>.
Normally the item and response inputs can be ignored.
<P>
<DT><A NAME="format_item_func">format_item</A>
<DD>
<EM>conf item resp</EM> <TT>format_item</TT> <EM>string...</EM>
<P>
The function should push onto the stack a URL
that will point to item <EM>item</EM>
in conference <EM>conf</EM>.
Normally the response input can be ignored.
<P>
<DT><A NAME="format_resp_func">format_resp</A>
<DD>
<EM>conf item resp</EM> <TT>format_resp</TT> <EM>string...</EM>
<P>
The function should push onto the stack a URL
that will point to response <EM>resp</EM>
of item <EM>item</EM> in the conference <EM>conf</EM>.
</DL>

<P>
<DT><A NAME="cleanhtml_cmd">cleanhtml</A>
<DD>
<EM>html-string</EM> <TT>cleanhtml</TT> <EM>html-string</EM>
<P>
Given an HTML string, this sanitizes it, making sure that all tags
are closed, and filtering out tags that we don't consider safe for
people to insert into the middle of items and responses.
It also makes various strings clickable, just like the
<A HREF=#expand_cmd>expand</A> command does.  For this to work, you must
define <A HREF=#format_conf_func>format_conf</A>,
<A HREF=#format_item_func>format_item</A>,
and <A HREF=#format_resp_func>format_resp</A> just as above.
External links will have a target set to either open in a new window
or open in the top level current window, depending on the setting of
<A HREF="#var_linktonew">linktonew</A>.
This function is called automatically on all HTML responses
submitted passed to the the <A HREF="#post_resp_cmd>post_resp</A> and
<A HREF="#post_item_cmd>post_item</A> commands.
If the <A HREF="#allowgraphics_var">allowgraphics</A> flag is false,
image tags are among those stripped out.

<P>
<DT><A NAME="unhtml_cmd">unhtml</A>
<DD>
<EM>html-string</EM> <TT>unhtml</TT> <EM>text-string</EM>
<P>
This converts an HTML string into a plain text string, removing all
tags, and interpreting many of them so that this acts as a crude
browser.

<P>
<DT><A NAME="spellcheck_cmd">spellcheck</A>
<DD>
<EM>text</EM> <EM>texttype</EM> <EM>mode</EM> <EM>proc</EM>
<TT>spellcheck</TT> -
<P>
This runs a spell checker on a block of text, running the given procedure
once for each misspelled word, in the order in which the words appear in the
text.
The <EM>texttype</EM> may be either
<TT>(text/plain)</TT> or <TT>(text/html)</TT>.
In the latter case, HTML
tags (like <TT>&lt;BLOCKQUOTE&gt;</TT>) and special characters (like
<TT>&amp;nbsp;</TT>) are not checked.
The <EM>mode</EM> flag determines what is pushed onto the stack before each
execution of the procedure.
<BLOCKQUOTE>
<TABLE>
<TR><TD>mode:</TD><TD>pushed on stack before procedure execution:</TD>
<TR><TD>0</TD><TD><EM>badword</EM></TD>
<TR><TD>1</TD><TD><EM>priortext</EM> <EM>badword</EM></TD>
<TR><TD>2</TD><TD><EM>suggestions</EM> <EM>badword</EM></TD>
<TR><TD>3</TD><TD><EM>suggestions<EM> <EM>priortext</EM> <EM>badword</EM></TD>
</TABLE>
</BLOCKQUOTE>
The <EM>badword</EM> is always pushed.  It a misspelled word found in the text.
Thus, to get an array of all misspelled words, you could do:
<PRE>
   [ text (text/html) 0 {} spellcheck ]
</PRE>
<P>
If the <EM>mode</EM> is 1 or 3, then we also push <EM>priortext</EM>.
This is the fragment of the original text starting after the last misspelled
word and ending before the new misspelled word.
If the <EM>mode</EM> is 1 or 3, then we additionally push the remainder of
the correctly spelled text after spellchecking is complete.
Thus to display the original text with all misspelled words in upper case:
<PRE>
   ` text (text/html) 1 {caps} spellcheck '
</PRE>
<P>
If <EM>mode</EM> is 2 or 3,
the we push an array of suggested correct spellings for the bad word.
The size and quality of this array varies widely depending on which spell
checker backtalk was built with.  Aspell gives more guesses than ispell.
<P>
As in other forms of loops,
<A HREF=#break_cmd>break</A> and <A HREF=#continue>continue</A> can be used
inside the procedure, however, unlike other loop structures, you cannot use
a second <TT>spellcheck</TT> command inside the procedure (hard to imagine
why you would want to).
The <A HREF=#canspell_var>canspell</A> constant tells if this installation
supports spell checking.  If it does not, no misspelled words will ever be
found.  The <A HREF=#spell_lang_var>spell_lang</A> variable tells what
language to do the spell checking in.
The <A HREF=#spell_ignore_var>spell_ignore</A> variable has a comma-separated
list of misspelled words to ignore for this spell-checking session.

<P>
<DT><A NAME="parse_cmd">parse</A>
<DD>
<EM>string del</EM> <TT>parse</TT> <EM>rest first</EM>
<P>
This picks the first word off of a string.  The delimiter string gives
a list of characters which may appear between, before and after words.
Unlike the <A HREF=#clip_cmd>clip</A> function, parse treats
multiple consecutive delimiters as a single delimiter.
This can be used to break a text string into lines as well as words.
<P>
For example, "<TT>(,,foo,;bar;fub) (;,) parse</TT>" will pick off the word
<TT>(foo)</TT> and also return the rest of the string <TT>(bar;fub)</TT>.
If the string contains no non-delimiter characters,
then the first word will be the whole string, and the rest will be <TT>()</TT>.

<P>
<DT><A NAME="clip_cmd">clip</A>
<DD>
<EM>string del</EM> <TT>clip</TT> <EM>rest first</EM>
<P>
This finds the first occurrence in the string of a character in the delimiter
list, and returns the segment of the string before and after that character.
Unlike the <A HREF=#parse_cmd>parse</A> function, clip does not treat
multiple consecutive delimiters as a single delimiter.
<P>
For example, "<TT>(foo,,bar) (,) clip</TT>"
will return the word <TT>(foo)</TT>
and the rest of the string <TT>(,bar)</TT>.
Similarly, "<TT>(,,foo,;bar;fub) (;,) clip</TT>" will return the word
<TT>()</TT> and also return the rest of the string <TT>(,foo,;bar;fub)</TT>,
and "<TT>(foobar) (,) clip</TT>" will return the word <TT>(foobar)</TT>
and reminant <TT>()</TT>.

<P>
<DT><A NAME="split_cmd">split</A>
<DD>
<EM>string del</EM> <TT>split</TT> <EM>word<SUB>1</SUB></EM>
<EM>word<SUB>2</SUB>...</EM>
<P>
This slices up a string into words, where words are substrings of the string
separated by any sequence of one or more delimiters (so multiple delimiters
count as a single delimiter as in <A HREF=#parse_cmd>parse</A>.
<P>
For example, "<TT>(,,foo,;bar;fub;) (;,) split</TT>" push
"<TT>(foo)</TT>",
"<TT>(bar)</TT>" and
"<TT>(fub)</TT>" on the stack.
If the string contains no non-delimiter characters, nothing is pushed on the
stack.

<P>
<DT><A NAME="inlist_cmd">inlist</A>
<DD>
<EM>word list del</EM> <TT>inlist</TT> <EM>boolean</EM>
<P>
This checks if the given word appears in the given list, which is a string
of words separated by the delimiters given in the delimiter string.

<P>
<DT><A NAME="cvi_cmd">cvi</A>
<DD>
<EM>any</EM> <TT>cvi</TT> <EM>integer</EM>
<P>
Converts an object to an integer.
If the object is already an integer, this is a no-op,
but if it is a string like <TT>(486)</TT>,
it converts it to the integer <TT>486</TT>.
It is basically the Unix <TT>atoi()</TT> call,
so it ignores any non-numeric characters after the digits,
and returns zero if the string does not begin with digits at all.
If the input is a time,
it converts it into an integer (there may be overflow
problems with this after the year 2038).

<P>
<DT><A NAME="cvt_cmd">cvt</A>
<DD>
<EM>any</EM> <TT>cvt</TT> <EM>time</EM>
<P>
Converts an object to an time.
If the object is already a time, this is a no-op,
but if it is a string representing a integer, or an integer it gives the
time that many seconds after the epoch.

<P>
<DT><A NAME="cvs_cmd">cvs</A>
<DD>
<EM>any</EM> <TT>cvs</TT> <EM>string</EM>
<P>
Converts an object to a string.
If the object is already a string, this is a no-op.
If the object is an integer like <TT>486</TT>,
it converts it into a string like <TT>(486)</TT>.
If the object is a literal like <TT>/abc</TT>, 
it converts it into a string like <TT>(abc)</TT>
If the object is a time,
<TT>cvs</TT> does the same thing as <A HREF=#ctime_cmd>ctime</A>.
If the object is a regular expression or mark,
it converts them to an empty string.
If the object is an array or procedure,
it converts everything in it to a string and concatinates them all together.

<P>
<DT><A NAME="cvscol_cmd">cvscol</A>
<DD>
<EM>integer numcols</EM> <TT>cvscol</TT> <EM>string</EM>
<P>
Converts an integer to a string, right-justifying it within a string of
numcols blanks.

<P>
<DT><A NAME="cvn_cmd">cvn</A>
<DD>
<EM>string</EM> <TT>cvn</TT> <EM>literal</EM>
<P>
Converts a string to a literal variable name.
If the string obeys the length and syntax rules for a variable, it is
converted into a literal.  Thus, the string <TT>(abc)</TT> becomes the
literal <TT>/abc</TT>.

</DL>
<H3><A NAME="arrayop">Array Operators</A></H3>
Arrays store sequences of objects.
Not all elements of arrays need to be the same type.
They can contain any mixture of integers, strings, marks or subarrays.
<P>
If you
<TT>dup</TT>
an array, you don't get two identical arrays,
but two references to the same array.
Similarly, if you have a variable defined to an array value,
referencing pushes a pointer to the original array, not a copy of the array
onto the stack.
This is different from string types, which are always copied in these
circumstances.
<P>
When a
<TT>print</TT>
is done, either explicitly or automatically at termination,
arrays are handled by printing all their elements in sequence, as if they
had all been on the stack separately.
<DL>

<P>
<DT><A NAME="lbrack_cmd">[</A>
<DD>
<EM>-</EM> <TT>[</TT> <EM>mark</EM>
<P>
The left bracket pushes a mark on the stack.
This operator is identical to the <A HREF="#mark_cmd">mark</A>
operator, but is traditionally used to mark the beginning of a sequence
of stack elements that are going to be formed into an array by the
<A HREF="#rbrack_cmd">]</A>
operator.

<P>
<DT><A NAME="rbrack_cmd">]</A>
<DD>
<EM>mark any<SUB>0</SUB>...any<SUB>n-1</SUB></EM>
<TT>]</TT>
<EM>array</EM>
<P>
This takes all stack elements up to the mark off the stack, creates an
array to store them in, and pushes the resulting array on the stack.

<P>
<DT><A NAME="aload_cmd">aload</A>
<DD>
<EM>array</EM>
<TT>aload</TT>
<EM>a<SUB>0</SUB>...a<SUB>n-1</SUB></EM>
<P>
This pushes the elements of an array singly onto the stack.

<P>
<DT><A NAME="lengtha_cmd">length</A>
<DD>
<EM>array</EM> <TT>length</TT> <EM>n</EM>
<P>
This finds the number of elements in an array.

<P>
<DT><A NAME="geta_cmd">get</A>
<DD>
<EM>array i</EM> <TT>get</TT> <EM>a<SUB>i</SUB></EM>
<P>
Fetch an element from an array.
Indexing is zero-based.
It is an error if the index is out of range.

<P>
<DT><A NAME="puta_cmd">put</A>
<DD>
<EM>array i any</EM> <TT>put</TT> <EM>-</EM>
<P>
Store a value in an array element.
The value may be of any type.
For this to be useful, the array on the stack should have come from some
variable, so that the changed array can be accessed again.
If the index is past the end of the array, the array will be automatically
grown large enough to have such an index, filling in any gap with empty
string values.  Thus if we do 
<PRE>    /a [(a) (b)] def
    a 4 (c) put</PRE>
then we end up with the array "<TT>[(a) (b) () () (c)]</TT>".

<P>
<DT><A NAME="in_cmd">in</A>
<DD>
<EM>any array</EM> <TT>in</TT> <EM>i</EM>
<P>
Given an array and a string, integer, literal or time value,
check if that value is in the array.  If it is, return the index of
the first occurance.  If it isn't return -1.

<P>
<DT><A NAME="asort_cmd">asort</A>
<DD>
<EM>array k ascend</EM> <TT>asort</TT> <EM>array</EM>
<P>
This sorts an array of arrays.
<EM>K</EM> is a zero-based index designating which element of each
subarray is the sort key.
If <EM>ascend</EM> is true, it sorts the array into ascending
order, otherwise it sorts it into descending order.
It is an error if any of the elements of the array are not subarrays,
if any of the subarrays have less than <EM>k+1</EM> elements, or if
the <EM>k</EM>th elements of all the arrays are not all of the same type.
The only types that can be sorted on are strings, integers and times.
Uses a fairly decent quicksort implementation.
</DL>

<H3><A NAME="selop">Selector Manipulation Operators</A></H3>

Selectors are used to designate sequences of conferences, items, or responses.
They are simply strings of words separated by commas or dashes.
Dashes may only be used between two integers or between an integer and a dollar
sign.
A dollar sign in a subrange, like <TT>8-$</TT> or <TT>$-8</TT> is conceptually
an infinity value.  An isolated dollar sign refers to the last response or
item number (depending on context).
Thus typical selectors include
"<TT>dog,cat,mouse,lemon</TT>" or
"<TT>2,13-15,10,7,$</TT>" or
"<TT>95-18,10,97-$</TT>".
The selectors containing all numbers and dollar signs are numeric selectors.
Negative numbers are not understood in numeric selectors.
<DL>

<P>
<DT><A NAME="next_int_cmd">next_int</A>
<DD>
<EM>sel max</EM> <TT>next_int</TT> <EM>rest first</EM>
<P>
Extract the next number from an integer-type selector, updating the selector
to delete that value.
The maximum value given will be understood as the value of any dollar sign
that appears in the selector.
If the selector is empty, a -1 is returned.
If it is syntactically incorrect, a -2 is returned.

<P>
<DT><A NAME="in_sel_cmd">in_sel</A>
<DD>
<EM>value sel</EM> <TT>in_sel</TT> <EM>bool</EM>
<P>
This checks if the given value is included in the given selector.
The value can be a string or an integer.
If the value is an integer, it treats the selector as an integer selecter.
Dollar signs are treated as infinity values.

<P>
<DT><A NAME="count_sel_cmd">count_sel</A>
<DD>
<EM>sel last</EM> <TT>count_sel</TT> <EM>count</EM>
<P>
Given a non-negative <EMlast</EM> value,
this counts the number of objects included in a numeric selector.
Only values less or equal to the <EM>last</EM> value are counted.
<P>
If <EM>last</EM> is negative, then this just counts the number
of comma-delimited terms, ignoring any dashes.  This is mainly for use
on non-numeric selectors.

<P>
<DT><A NAME="rev_sel_cmd">rev_sel</A>
<DD>
<EM>sel</EM> <TT>rev_sel</TT> <EM>sel</EM>
<P>
This reverses the order of a selector.  That is "2,13-15,10,7"
becomes "7,10,15-13,2".
</DL>

<H3><A NAME="boolop">Relational and Boolean Operators</A></H3>

In Backtalk, booleans are represented by integer, time, or string values.
The integer zero, the time "00:00:00 Jan 1, 1970" and
the empty string are false, and all other values are true.
Functions returning a boolean, return 1 for true and 0 for false.
Relational operators may be used on strings, integers, times,
and literal names, but you can only compare two objects of the
same type.
<DL>

<P>
<DT><A NAME="eq_cmd">eq</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>eq</TT>
<EM>bool</EM>
<P>
Test if <EM>any<SUB>1</SUB></EM> is equal to <EM>any<SUB>2</SUB></EM>.
You can compare times to the integer zero.

<P>
<DT><A NAME="ne_cmd">ne</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>ne</TT>
<EM>bool</EM>
<P>
Test if <EM>any<SUB>1</SUB></EM> is not equal to <EM>any<SUB>2</SUB></EM>.
You can compare times to the integer zero.

<P>
<DT><A NAME="ge_cmd">ge</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>ge</TT>
<EM>bool</EM>
<P>
Test if <EM>any<SUB>1</SUB></EM>
is greater than or equal to <EM>any<SUB>2</SUB></EM>.

<P>
<DT><A NAME="gt_cmd">gt</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>gt</TT>
<EM>bool</EM>
<P>
Test if <EM>any<SUB>1</SUB></EM> is greater than <EM>any<SUB>2</SUB></EM>.

<P>
<DT><A NAME="le_cmd">le</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>le</TT>
<EM>bool</EM>
<P>
Test if <EM>any<SUB>1</SUB></EM>
is less than or equal to <EM>any<SUB>2</SUB></EM>.

<P>
<DT><A NAME="lt_cmd">lt</A>
<DD>
<EM>any<SUB>1</SUB> any<SUB>2</SUB></EM>
<TT>lt</TT>
<EM>bool</EM>
<P>
Test if <EM>any<SUB>1</SUB></EM> is less than <EM>any<SUB>2</SUB></EM>.

<P>
<DT><A NAME="and_cmd">and</A>
<DD>
<EM>bool<SUB>1</SUB> bool<SUB>2</SUB></EM>
<TT>and</TT>
<EM>bool</EM>
<P>
Logical-and of <EM>bool<SUB>1</SUB></EM> and <EM>bool<SUB>2</SUB></EM>.

<P>
<DT><A NAME="or_cmd">or</A>
<DD>
<EM>bool<SUB>1</SUB> bool<SUB>2</SUB></EM>
<TT>or</TT>
<EM>bool</EM>
<P>
Logical-or of <EM>bool<SUB>1</SUB></EM> and <EM>bool<SUB>2</SUB></EM>.

<P>
<DT><A NAME="bang_cmd">!</A>
<DD>
<EM>bool</EM> <TT>!</TT> <EM>bool</EM>
<P>
Logical-negation of <EM>bool</EM>.
</DL>

<H3><A NAME="contop">Control Operators</A></H3>

Backtalk includes a fair selection of looping and conditional operators.
The "boolean" variables mentioned can actually be either string or
integer variables.  All integer values except zero are treated as true,
and all string values except the empty string () are treated as true.
<DL>

<P>
<DT><A NAME="if_cmd">if</A>
<DD>
<EM>bool proc</EM> <TT>if</TT> <EM>-</EM>
<P>
The given procedure is executed if and only if the given boolean is true.

<P>
<DT><A NAME="ifelse_cmd">ifelse</A>
<DD>
<EM>bool then-proc else-proc</EM> <TT>ifelse</TT> <EM>-</EM>
<P>
Either of the first or second procedures are executed, depending on whether
the boolean is true or not.

<P>
<DT><A NAME="loop_cmd">loop</A>
<DD>
<EM>proc</EM> <TT>loop</TT> <EM>-</EM>
<P>
Execute the given procedure repeatedly forever, or until a
<A HREF="#break_cmd">break</A> is performed
(or a <A HREF="#halt_cmd">halt</A> or even a
<A HREF="#stop_cmd">stop</A> for that matter).

<P>
<DT><A NAME="while_cmd">while</A>
<DD>
<EM>proc</EM> <TT>while</TT> <EM>-</EM>
<P>
Execute the given procedure for as long as it ends with a
true boolean pushed on the stack.
Terminate as soon as the procedure pushs a zero or an empty string.
The <TT>while</TT>
command discards all the continuation flags pushed on top of the stack
at the end of each iteration, but any other values pushed are left on the
stack.  <TT>While</TT> loops may be terminated by
<A HREF="#break_cmd">break</A> as well.
<P>
The command "{...} while" is equivalent to
"{... ! {break} if} loop".
<P>
The command "{... 1} while" is equivalent to "{...} loop".

<P>
<DT><A NAME="repeat_cmd">repeat</A>
<DD>
<EM>count proc</EM> <TT>repeat</TT> <EM>-</EM>
<P>
Execute the given procedure the given number of times.
Nothing is put on the stack or removed from the stack by the
<TT>repeat</TT> command.
<TT>Repeat</TT> loops may be terminated by <A HREF="#break_cmd">break</A>.
If the count is zero or negative, <TT>repeat</TT> does nothing.

<P>
<DT><A NAME="forall_cmd">forall</A>
<DD>
<EM>array proc</EM> <TT>forall</TT> <EM>-</EM>
<BR>
<EM>string proc</EM> <TT>forall</TT> <EM>-</EM>
<P>
<TT>Forall</TT> loops through the elements of an array or a string.
It does one iteration through each element of the array or character of the
string.  Before each iteration, <TT>forall</TT>
pushs the current element on the stack.
String elements are pushed as single-character strings
(this is unlike postscript which pushs them as integers).
Thus "{} forall" is equivalent to <A HREF="#aload_cmd">aload</A>.

<P>
<DT><A NAME="for_cmd">for</A>
<DD>
<EM>init inc limit proc</EM> <TT>for</TT> <EM>-</EM>
<P>
<TT>For</TT> loops are given a procedure and three integer arguments.
An internal variable is set to the initial value before the first
iteration.  The increment is added to it before each successive iteration.
If it passes the limit, iteration is terminated.
(That is, if increment is positive and it becomes greater than the limit,
or if increment is negative and it becomes less than the limit).
Note that the procedure will not be executed at all if the initial value
is greater than the limit and the increment is positive, or if the initial
value is less than the limit and the increment is negative.
If the increment is zero, this is an infinite loop.
In addition, before each execution of the procedure, the current value of
the count is pushed on the argument stack.
Iteration may also be terminated by a <A HREF="#break_cmd">break</A> command.
<P>
For example, "1 2 1 n {*} for" computes n factorial.

<P>
<DT><A NAME="break_cmd">break</A>
<DD>
<EM>-</EM> <TT>break</TT> <EM>-</EM>
<P>
Terminate execution of the first enclosing iterative context.
This can be used in the procedures of <A HREF="#loop_cmd">loop</A>,
<A HREF="#while_cmd">while</A>,
<A HREF="#repeat_cmd">repeat</A>,
<A HREF="#forall_cmd">forall</A>,
and <A HREF="#for_cmd">for</A> commands.
It may be used from inside a file <A HREF="#include_cmd">include</A>d
or <A HREF="#call_cmd">call</A>ed in a iterative procedure.
If used outside of an iterative procedure, it is equivalent to a
<A HREF="#halt_cmd">halt</A> command.

<P>
<DT><A NAME="continue_cmd">continue</A>
<DD>
<EM>-</EM> <TT>continue</TT> <EM>-</EM>
<P>
Terminate execution of the current iteration of the first
enclosing iterative context,
so that it continues with the next iteration of the loop.
This can be used in the procedures of <A HREF="#loop_cmd">loop</A>,
<A HREF="#while_cmd">while</A>,
<A HREF="#repeat_cmd">repeat</A>,
<A HREF="#forall_cmd">forall</A>,
and <A HREF="#for_cmd">for</A> commands.
It may be used from inside a file <A HREF="#include_cmd">include</A>d
or <A HREF="#call_cmd">call</A>ed in a iterative procedure.
It is an error to use it outside of an iterative construct.

<P>
<DT><A NAME="halt_cmd">halt</A>
<DD>
<EM>-</EM> <TT>halt</TT> <EM>-</EM>
<P>
Stop the execution entirely.
After execution is halted, anything remaining on the operand stack
will automatically be printed.
If you wish to prevent this, do a <A HREF="#clear_cmd">clear</A>
before the <TT>halt</TT>.

<P>
<DT><A NAME="exec_cmd">exec</A>
<DD>
<EM>any</EM> <TT>exec</TT> <EM>-</EM>
<P>
Execute the given token.
If the object is a procedure (in curly braces) it gets executed.
If it is an array, it gets executed as if it was a procedure.
If it is a literal, it gets executed as if it was a symbol (that is
"/x exec" is equivalent to "x").
Strings, integers and marks just get pushed back on the stack
(so it is a no-op on these).

<P>
<DT><A NAME="call_cmd">call</A>
<DD>
<EM>filename</EM> <TT>call</TT> <EM>-</EM>
<P>
Suspend execution of the current file, and run the given file.
When the called file is complete, resume execution of this file.
The filename must be a relative path with no ``..'' components in it.
(That is, you can only include files under the
<HREF="#scriptdir_var">scriptdir</A> directory.)
<P>
This is similar to the <A HREF="#include_cmd">include</A> command,
except that though the two files share variables and function definitions,
they do not share <EM>not</EM> constants,
because the call is done at run time, not compile time.
Thus constants defined in the current file are not accessible in the
called file, and constants defined in the called file are not accessible in
the current file, though both may use constants defined by the
<TT>config.bt</TT> file.

<P>
<DT><A NAME="include_cmd">include</A>
<DD>
<EM>filename</EM> <TT>include</TT> <EM>-</EM>
<P>
Include the contents of the given file into the current program at this point.
The filename must be a relative path with no ``..'' components in it.
(That is, you can only include files under the
<HREF="#scriptdir_var">scriptdir</A> directory.)
This is similar to the <A HREF="#call_cmd">call</A> command,
except that since included files are included at compile time,
constant definitions from the current file effect the included script,
and constants defined in the included script will effect the remainder of
the current file.
Including files instead of <A HREF="#call_cmd">call</A>ing them makes a bigger
binary file, but will normally run faster.

<P>
<DT><A NAME="chain_cmd">chain</A>
<DD>
<EM>filename</EM> <TT>chain</TT> <EM>-</EM>
<P>
Include the contents of the given file into the current program at this point,
and stop the current program immediately after running it.
The filename may not include ``..'' components in the path.
This is almost equivalent to doing "include stop",
except that it is more slightly more efficient
and if the current file is being run under a
<A HREF="#stopped_cmd">stopped</A> command,
then the termination code of the file we chained to will be returned to
the enclosing environment.
As with the <A HREF="#include_cmd">include</A> command, constants defined in
the current file will be usable in the chained file.

<P>
<DT><A NAME="jump_cmd">jump</A>
<DD>
<EM>filename</EM> <TT>jump</TT> <EM>-</EM>
<P>
Halt the execution of the current file and continue with the execution of
the named file.
The filename may not include ``..'' components in the path.
This is almost equivalent to doing "call stop",
except that it is more efficient and if the current file is being run under a
<A HREF="#stopped_cmd">stopped</A> command,
then the termination code of the file we chained to will be returned to
the enclosing environment.
As with the <A HREF="#call_cmd">call</A> command, variables defined in
the current file will be usable in the chained file, but constants will not be.

<P>
<DT><A NAME="stopped_cmd">stopped</A>
<DD>
<EM>filename</EM> <TT>stopped</TT> <EM>bool</EM>
<P>
Insert the contents of the given file.
The filename may not include ``..'' components in the path.
This is almost equivalent to
<A HREF="#include_cmd">include</A>
except that upon termination it pushs a zero if the execution of the
file terminated normally, and a one if the execution terminated with a
<A HREF="#stop_cmd">stop</A>
command.

<P>
<DT><A NAME="stop_cmd">stop</A>
<DD>
<EM>-</EM> <TT>stop</TT> <EM>-</EM>
<P>
Terminate the enclosing file execution.
This causes a premature termination of an
<A HREF="#include_cmd">include</A>
or
<A HREF="#stopped_cmd">stopped</A>
command.  If the current context is a
<A HREF="#stopped_cmd">stopped</A>
command, a one will be pushed on the stack.
If there is no enclosing 
<A HREF="#include_cmd">include</A>
or
<A HREF="#stopped_cmd">stopped</A>,
this is equivalent to a
<A HREF="#halt_cmd">halt</A>.
</DL>
<H3><A NAME="outop">Output Operators</A></H3>
Output is done from the stack.
Text formatting is done with separate calls to other routines, not by
the output routines themselves, so they aren't very complex.
<P>
When outputing an HTML document from CGI programs like Backtalk,
it is necessary to prefix the output with the appropriate HTTP headers.
Backtalk will automatically output these immediately before the first
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A> or
<A HREF="#dumpstack_cmd">dumpstack</A> command.
<P>
You can exert some control over the content of these headers, so long as you
do it <EM>before</EM> the first output statement.
If you do so before te first output statement, you can
<UL>
<LI>
suppress the generation of the HTTP headers entirely by setting
the <A HREF="#http_headers_var">http_headers</A> variable to false.
<LI>
set cookies in the user's browser with the
<A HREF="#setcookie_cmd">setcookie</A> function.
<LI>
change the content-type header by changing the 
<A HREF="#http_content_type_var">http_content_type</A> variable from its
default value of <TT>(text/html)</TT> to something else.
<LI>
disable caching of the page in the browser by setting
<A HREF="#http_no_cache_var">http_no_cache</A> or
cause an expiration time to be attached to the page by setting the
<A HREF="#http_expires_var">http_expires</A> variable to the expiration time.
<LI>
cause a redirect header to be sent by setting the
<A HREF="#http_location_var">http_location</A> variable to the URL to redirect
to.
</UL>
<DL>

<P>
<DT><A NAME="print_cmd">print</A>
<DD>
<EM>| any1 ... anyn</EM> <TT>print</TT> <EM>|</EM>
<P>
Print out the entire contents of the stack, from bottom up.  A
<TT>print</TT>
command is automatically executed on termination.
Integers and strings are printed the obvious way.
Times are printed as if <A HREF="#ctime_cmd">ctime</A> had been run on them.
Arrays have all their elements printed as if they had been separately pushed
on the stack.
Literals have their values printed, unless they are undefined, in which case
nothing is printed.  (Thus, if you are printing a table of values, you can
push the a literal like <TT>/nrows</TT> on the stack first, then generate
all the table rows, counting them in the <TT>nrows</TT> variable, and then
print, and the current number of rows will appear at the top of the table.)

<P>
<DT><A NAME="pr_cmd">pr</A>
<DD>
<EM>any</EM> <TT>pr</TT> <EM>-</EM>
<P>
Print out the top stack element.

<P>
<DT><A NAME="dumpstack_cmd">dumpstack</A>
<DD>
<EM>-</EM>
<TT>dumpstack</TT>
<EM>-</EM>
<P>
Prints a snapshot of the stack to standard output, without altering the
stack.  This is a debugging tool.

<P>
<DT><A NAME="setcookie_cmd">setcookie</A>
<DD>
<EM>name value expire-time</EM> <TT>setcookie</TT> <EM>-</EM>
<P>
Set a cookie by adding a "Set-Cookie" directive to the HTTP
headers for this page.
This must be done before the first 
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A> or
<A HREF="#dumpstack_cmd">dumpstack</A> command,
since the headers are output before the first text is output.
<EM>Name</EM> is the name for the cookie and <EM>value</EM> is its value.
The value should not contain any spaces or semicolons (actually, spaces
seem to work with at least some browsers).
<EM>Expire-time</EM> is the expiration time for the cookie.
If it is zero, the cookie has no expiration time, and will be deleted
as soon at the user exits his browser.
If it is in the future, the user's browser will keep the cookie until that
point in time and then delete it.
If it is in the past, the cookie expires immediately
(to delete an existing cookies from the user's browser, we overwrite it with
one whose expiration date is in the past).
You can set more than one cookie from the same page so long as they have
different names.
If you set the same cookie twice from the same page, only the last value
is sent to the browser.

<P>
<DT><A NAME="getcookie_cmd">getcookie</A>
<DD>
<EM>name</EM> <TT>getcookie</TT> <EM>value 0</EM>
<BR>
<EM>name</EM> <TT>getcookie</TT> <EM>1</EM>
<P>
Get the value of a cookie set on some previous Backtalk page.
If the cookie exists, the value is pushed on the stack along with an
error code of zero.
If it does not exists, only the error code of 1 is pushed.
(Note that you can alternatively get cookies out of HTTP_COOKIES environment
variable yourself.)

</DL>
<H3><A NAME="regexop">Regular Expression Commands</A></H3>
Backtalk's regular expressions are similar in syntax to those in Perl
or in many other Unix programs.  You can write the regular expression
into your program, enclosing it in double angle-brackets ("<TT>&lt;&lt;</TT>"
and "<TT>&gt;&gt;</TT>") or you can use the <A HREF="#regex_cmd">regex</A>
command to compile a string into a regular expression.
Note that regular expressions entered in double-angle brackets will be
compiled at compile time, speeding up their use at run time.
Compiled regular expressions can be manipulated like any other
Backtalk data type -
they can be pushed on the stack, duplicated, assigned to varibles, etc.
There aren't many operations you can perform on them except searching with
them.
<P>
The full syntax of Backtalk regular expressions is described
<A HREF="#regular">below</A>.
<P>
There is a command to compile strings
into regular expressions,
and several commands to search for regular expressions.
The following regular expression commands are known to backtalk:
<DL>

<P>
<DT><A NAME="regex_cmd">regex</A>
<DD>
<EM>string flags</EM> <TT>regex</TT> <EM>regex</EM> <TT>0</TT><BR>
<EM>string flags</EM> <TT>regex</TT> <EM>errmsg</EM> <TT>1</TT>
<P>
Compile a string into a regular expression.
The string is a regular expression defined by as <A HREF="#regular">below</A>.
The flags may be
"<TT>()</TT>", "<TT>(m)</TT>", "<TT>(i)</TT>",
"<TT>(im)</TT>" or "<TT>(mi)</TT>".
The "i" means to ignore case, the "m" means to "<TT>^</TT>" and
"<TT>$</TT>" match against newlines internal to a pattern, not just the
beginning and ending of the pattern.
If the regular expression syntax is OK, it is compiled and pushed onto the
stack, followed by a one.
If the syntax of the regular expression is incorrect, an error message
string is pushed on the stack, followed by a one.


<P>
<DT><A NAME="grep_cmd">grep</A>
<DD>
<EM>string regex</EM> <TT>grep</TT> <EM>boolean</EM>
<P>
Check if the given pattern occurs in the string.  Push 1 if it is,
0 if it isn't.

<P>
<DT><A NAME="ogrep_cmd">ogrep</A>
<DD>
<EM>string regex</EM> <TT>ogrep</TT> <EM>array</EM> 1<BR>
<EM>string regex</EM> <TT>ogrep</TT> 0
<P>
Just like <A HREF="#grep_cmd">grep</A>, except if it succeeds it
returns information about where the
match occured, plus information about what each paranthesized subexpression
matched.  The returned array has one more element in it than there are
pairs of parentheses in the regular expression.  Each element of the
array is a two element array, giving an beginning offset and the length
of a substring of the original string.  The zeroth pair indicates the
portion of the entire matched by the entire regular expression.  The
remaining pairs indicate the substrings matched by each set of parenthesis
in the regular expression.

<P>
<DT><A NAME="sgrep_cmd">sgrep</A>
<DD>
<EM>string regex</EM> <TT>sgrep</TT> <EM>array</EM> 1<BR>
<EM>string regex</EM> <TT>sgrep</TT> 0
<P>
Just like <A HREF="#ogrep_cmd">ogrep</A>, except instead of returning an
array of offsets and lengths of matching strings in the original string,
it returns an array of strings, where the zeroth element is the substring
of the input string that matches the full regular expression, and each
other element of the array is the substring of the original text that
matches the corresponding parenthesized subexpression in the regular
expression.

<P>
<DT><A NAME="rgrep_cmd">rgrep</A>
<DD>
<EM>string regex nmatch proc </EM> <TT>rgrep</TT> -
<P>
This searches the string for sections matching the regular expression.
Each time a match is found, the non-matching substring between the last
match and this match is pushed on the stack.  If nmatch is one, the
matching substring is also pushed.  If nmatch is greater than one, then
nmatch substrings are pushed, the first being the substring that matched
the whole expression, and the later ones being the substrings that matched
any parenthesized subexpressions.  After all this stuff has been pushed
the procedure is executed.  This continues until no more matches are found
or until the procedure does a break.  At that time, the remaining unmatched
hunk of string will be pushed.  A negative nmatch value means push all
subexpression matchs.
<P>
<STRONG>Warning:  This can go into really impressive infinite loops if given
a pattern that matches a null string.</STRONG>
<P>
You can delete all instances of an expression from a string by doing
<BLOCKQUOTE>
<TT>` string expression 0 {} rgrep '</TT>
</BLOCKQUOTE>
You can substitute all occuranges of a regular expression with the text
"<TT>XXX</TT>" by doing
<BLOCKQUOTE>
<TT>` string expression 0 {(XXX)} rgrep '</TT>
</BLOCKQUOTE>
To substitute only the first instance, do
<BLOCKQUOTE>
<TT>` string expression 0 {(XXX) break} rgrep '</TT>
</BLOCKQUOTE>
You can convert all occuranges of a regular expression to upper case by doing
<BLOCKQUOTE>
<TT>` string expression 1 {cap} rgrep '</TT>
</BLOCKQUOTE>
You can do pretty much anything else your heart desires too.
</DL>

<H3><A NAME="fileop">File Commands</A></H3>

File commands take filenames in either of two different formats.
The first is the standard Unix format, where the filename is given as
a full or partial path.
Partial paths are aways relative to <A HREF="#scriptdir_var">scriptdir</A>.
<P>
The second format is as a Backtalk file-handle.
File handles always start with an asterisk followed by the name of a file.
Backtalk figures out the full path of the file by itself.  It also knows
something about the type of the file and who may write to it.
<P>
Commands to read from files will accept either format.
<EM>Commands to write from files only work with file-handles.</EM>
Thus only files for which Backtalk has handles may be written to, and
Backtalk will enforce rules about who may write to those files.
<PP>
The following handles are known to Backtalk:
<DL>
<DT><TT>(*.backtalk)</TT>
<DD>The current user's biography and configuration file.  Backtalk uses this
    instead of the Picospan <TT>.cfonce</TT> file for user configuration.
<DT><TT>(*.cflist)</TT>
<DD>The current user's conference list.  Shared with Picospan.
<DT><TT>(*.cfonce)</TT>
<DD>The current user's file of Picospan commands to run on start up.
    Mostly used by Picospan.
<DT><TT>(*.cfrc)</TT>
<DD>The current user's file of Picospan commands to run on when a new
    conference is joined. Mostly used by Picospan.
<DT><TT>(*.plan)</TT>
<DD>The current user's <TT>.plan</TT> file.
<DT><TT>(*acl)</TT>
<DD>A Yapp-style access control list for the current conference.
<DT><TT>(*bbsrc)</TT>
<DD>A Picospan command file executed for all users when they first enter.
    Mostly used by Picospan.
<DT><TT>(*bull)</TT>
<DD>The current conference's bulletin file (Rarely used).
<DT><TT>(*config)</TT>
<DD>The current conference's configuration file.
<DT><TT>(*confmenu)</TT>
<DD>The current list of conferences displayed to users
    (Replaces the Picospan public.txt file).
<DT><TT>(*confrc)</TT>
<DD>A Picospan command file for the current conference.
    Mostly used by Picospan.
<DT><TT>(*dflt.backtalk)</TT>
<DD>The system-wide defaults for user configuration settings not set in the
    user's <TT>.backtalk</TT> file.
<DT><TT>(*dflt.cflist)</TT>
<DD>The system-wide default conference list used for users with no
    <TT>.cflist</TT> file.
<DT><TT>(*glist)</TT>
<DD>The current conference's glist file.  For closed conferences this is a list
    of all user group names that can access the conference.  (Backtalk only).
<DT><TT>(*index)</TT>
<DD>The current conference's index file.  (Rarely used).
<DT><TT>(*login)</TT>
<DD>The current conference's login file. (Ascii text version used by Picospan.
    The ``<TT>login</TT>'' tag in the ``<TT>*settings</TT>'' file is
    preferred by Backtalk.)
<DT><TT>(*logout)</TT>
<DD>The current conference's logout file. (Ascii text version used by
    Picospan.)
<DT><TT>(*motd.html)</TT>
<DD>HTML formatted message-of-the-day to be displayed on front page.
<DT><TT>(*public.txt)</TT>
<DD>The system-wide list of conferences (used by Picospan only).
<DT><TT>(*secret)</TT>
<DD>The current conference's password.
<DT><TT>(*settings)</TT>
<DD>The current conference's settings file.  (Backtalk only).
<DT><TT>(*ulist)</TT>
<DD>The current conference's ulist file.  For open conference, this is a
    list of user logins who have joined the conference.  For closed
    conferences, it is a list of user logins who are allowed to join the
    conferences.
<DT><TT>(*welcome)</TT>
<DD>The current conference's welcome file.
</DL>
<PP>
A few files are associated with separate default files.  If the user doesn't
have a <TT>.cflist</TT> file, and you attempt to read from it,
then the <TT>dflt.cflist</TT> file will be read instead.
Thus, all users who don't define their own conference lists,
get the system default conference list.
The defaulting mechanism is never used on writes.
If a user who doesn't have a <TT>.cflist</TT> writes to his <TT>.cflist</TT>,
the file is created.
<P>
The user's <TT>.backtalk</TT> file also has a default file,
the system <TT>dflt.backtalk</TT> file,
but defaulting works a bit differently for tag files.
If you attempt to load a tag which is not defined in the
<TT>.backtalk</TT> file, the system will then search for it in the
<TT>dflt.backtalk</TT> file.
A similar defaulting mechanism is planned for conference settings files,
but has not been implemented yet.
<PP>
The following file commands are known to backtalk:
<DL>

<P>
<DT><A NAME="read_cmd">read</A>
<DD>
<EM>filename</EM> <TT>read</TT> <EM>string</EM>
<P>
The entire contents of the named file are pushed onto the stack as a single
string.
The filename may be a path or a file-handle.
If the file doesn't exist, but the handle has a default file, the default file
is loaded instead.
If no file exists, a null string is returned.

<P>
<DT><A NAME="write_cmd">write</A>
<DD>
<EM>string filehandle</EM> <TT>write</TT> <EM>-</EM>
<P>
The given file is first created or emptied, and then the given string is
written into it.
The filename must be designated with a file handle.
It is a fatal error if the file is not writable.

<P>
<DT><A NAME="pathname_cmd">pathname</A>
<DD>
<EM>filehandle user</EM> <TT>pathname</TT> <EM>path</EM>
<P>
This converts a filehandle into a full path name.  It is mainly used to find
files belonging to other users, so to read fred's .plan file, we'd do
"(*.plan) (fred) pathname read".  If the username is an empty string, it
defaults to the current user, but that's kind of useless.

<P>
<DT><A NAME="savevar_cmd">savevar</A>
<DD>
<EM>filehandle varlist</EM> <TT>savevar</TT> <EM>-</EM>
<P>
Save one or more variables into the named tag file, which must be
designated by a file handle.
The variable list argument may be either a single
variable name, or an array of variable names.
All variables must be defined,
and must have an integer or string value.
If the tagfile does not exist, it will be created.
If it does exist, the new fields will be added to the ones already there,
replacing any with the same name.
Attempts to change the value of protected tags are silently ignored.

<P>
<DT><A NAME="loadvar_cmd">loadvar</A>
<DD>
<EM>filename varlist</EM> <TT>loadvar</TT> <EM>error</EM>
<P>
Load one or more variables from the named tag file, whose name may
be given as either a path or a file-handle.
The variable list argument may be either a a single
variable name, or an array of variable names.
Each variable will be set to the value defined for it in the file, using a
<A HREF="#store_cmd">store</A>
operation to set it.
A variable name ending in a dot will load all variables with that prefix.
If there is no definition for a variable in the tag file, that variable
will be silently ignored.
If the file does not exist, a boolean false is pushed, otherwise it returns
true.
Any fields not defined in the file itself will be loaded from the default
file, if one is defined for the handle.
Any variable with is not defined will simply not be changed.

<P>
<DT><A NAME="line_cmd">line</A>
<DD>
<EM>filename n</EM> <TT>line</TT> <EM>string</EM>
<P>
Read the <EM>n</EM>th line of a file and push it on the stack.
Lines are numbered from zero.
A null string is pushed if the file or the line doesn't exist.

<P>
<DT><A NAME="tail_cmd">tail</A>
<DD>
<EM>filename n</EM> <TT>tail</TT> <EM>string</EM>
<P>
Return the last <EM>n</EM> lines of a file.  Fewer lines may be returned
if the line has fewer than <EM>n</EM> lines.
A null string is pushed if the file is empty or does not exist.

<P>
<DT><A NAME="readable_cmd">readable</A>
<DD>
<EM>filename</EM> <TT>readable</TT> <EM>bool</EM>
<P>
Test if the named file can be read.
The name may either be a path or a file-handle.
If file handle has a default, it will return true even if the named file
doesn't exist, but the default file does.

<P>
<DT><A NAME="writable_cmd">writable</A>
<DD>
<EM>filename</EM> <TT>writable</TT> <EM>bool</EM>
<P>
Test if the named file can be written.
Only file-handles are writable, so if a path is given it will always fail.
Files that do not exist may be writable if they are in a writable directory.

<P>
<DT><A NAME="exists_cmd">exists</A>
<DD>
<EM>filename</EM> <TT>exists</TT> <EM>bool</EM>
<P>
Test if the named file exists.
If file handle has a default, it will return true even if the named file
doesn't exist, but the default file does.

<P>
<DT><A NAME="filedate_cmd">filedate</A>
<DD>
<EM>filename</EM> <TT>filedate</TT> <EM>time</EM>
<P>
If the file exists, push the time at which it was last modified
(the mtime).
If it doesn't exist, push zero.
</DL>
<H3><A NAME="userop">User Database Operators</A></H3>
The following commands query or edit the Backtalk user database.
The user database may be configured in many different ways.
Normally Backtalk accounts are completely disconnected from Unix accounts
on the host system, however for systems where Backtalk is to coexist with
Yapp or Picospan, it may be desirable to use real Unix accounts for Backtalk
accounts.  In this case, the routines to create accounts and groups,
change passwords, change fullnames,
and validate or delete accounts will not work (all these operations would
require root access, which Backtalk does not have).  Users will have to log
onto their Unix accounts to perform these operations.
<P>
Backtalk has a notion of user groups similar to the unix notion of user groups.
Users have a primary group ID, and can also be in several secondary groups.
Three groups are special.
The 'user' group is the default user group, in which accounts are normally
created.
Any user in the 'cfadm' group is a conference
administrator, and can create, destroy and edit user accounts and conferences,
and functions as a fairwitness in all conferences.  Any user in the 'gradm'
group can also create accounts, even if the system is configured so that
regular users can't.  Furthermore, users in the 'gradm' group can create
accounts not only in the 'user' group but in any other group
(except 'gradm') of which the user is a member.
Other groups may be created, and conferences may be configured so that only
members of some group may join them.
<DL>

<P>
<DT><A NAME="userinfo_cmd">userinfo</A>
<DD>
<EM>login</EM> <TT>userinfo</TT> <EM>uid gid fullname directory laston status</EM>
<P>
Fetch information about a user from the user database.
Given a login name, this returns the user id number, the group id number,
the fullname, the home directory name, the time of the last login, and the
user's status.
<EM>Status</EM> is 0 for valid accounts, 1 for unvalidated accounts, and 2 for
invalidated accounts, and -1 for non-existant accounts.
If the user does not have an identity database entry, then the directory and
fullname will be () and the uid and gid will be -1
and the laston time will be 0.
If <A HREF="#mayseefname_var">mayseefname</A> is false and we our not looking up
ourselves, then the fullname will be ().

<P>
<DT><A NAME="useremail">useremail</A>
<DD>
<EM>login</EM> <TT>useremail</TT> <EM>emailaddress</EM>
<P>
In the vast majority of Backtalk installations, email addresses for users
are not kept in the user database.  They are kept instead in the user's
'<TT>.backtalk</TT>' file.  On those systems this function will always return
an empty string.  In the rare cases where email addresses are in the user
database, this returns the email address.

<P>
<DT><A NAME="firstuser_cmd">firstuser</A>
<DD>
<EM>-</EM> <TT>firstuser</TT> <EM>login</EM>
<P>
Return the login name of the first user in the user database.
The notion of "first" here man be nearly meaningless.
The intent is that this be used to initialize a walk through the
user database done with
<A HREF="#nextuser_cmd">nextuser</A>.

<P>
<DT><A NAME="seekuser_cmd">seekuser</A>
<DD>
<EM>login</EM> <TT>seekuser</TT> <EM>-</EM>
<P>
Like <A HREF="#firstuser_cmd">firstuser</A>, this initializes a walk through
the user database, but instead of starting from the beginning, it starts
from the named user.
The next call to <A HREF="#nextuser_cmd">nextuser</A>
will return the name of the successor of the user passed to this function.

<P>
<DT><A NAME="nextuser_cmd">nextuser</A>
<DD>
<EM>-</EM> <TT>nextuser</TT> <EM>login</EM>
<P>
Return the login name of the next user in the user database.
<A HREF="#firstuser_cmd">firstuser</A> or
<A HREF="#seekuser_cmd">seekuser</A>
must have been called previously to initialize the loop.

<P>
<DT><A NAME="ingroup_cmd">ingroup</A>
<DD>
<EM>group login</EM> <TT>ingroup</TT> <EM>boolean</EM>
<P>
Check if the named user is in the given group.
If the login ID is given as <TT>()</TT>, check the currently logged in user.
The group may be given either as a string group name or an integer gid number.

<P>
<DT><A NAME="groups_cmd">groups</A>
<DD>
<EM>-</EM> <TT>groups</TT> <EM>groupname1 groupname2 ...</EM>
<P>
Push the names of all known user groups onto the stack.

<P>
<DT><A NAME="dfltgroup_cmd">dfltgroup</A>
<DD>
<EM>-</EM> <TT>dfltgroup</TT> <EM>groupname</EM>
<P>
Push the name of the group in which users are created by default.

<P>
<DT><A NAME="groupid_cmd">groupid</A>
<DD>
<EM>groupname</EM> <TT>groupid</TT> <EM>groupid</EM>
<P>
Given a group name, find the corresponding group id number.
If no group by that name exists, return -1.
If the input string is numeric, like (23), it simply converts that to
an integer type.

<P>
<DT><A NAME="groupname_cmd">groupname</A>
<DD>
<EM>groupid</EM> <TT>groupname</TT> <EM>groupname</EM>
<P>
Given a group id number, find the corresponding group name string.
If no group by that name exists, return ().

<P>
<DT><A NAME="newuser_cmd">newuser</A>
<DD>
<EM>login fullname password group varlist</EM>
<TT>newuser</TT> <EM>error</EM>
<P>
Create a new user account.
Depending on your system configuration, this may work for all users, or
only for those in the 'cfadm' and 'gradm' groups.
Users in the 'gradm' group may create accounts in any group that they are
members of, except the 'gradm' group.
Users in the 'cfadm' group may create accounts in any group.
Other users, if they are allowed to create accounts at all, can create them
only in the <A HREF="#dfltgroup_cmd">default user group</A>.
<P>
The <EM>login</EM> is the desired login id,
and <EM>password</EM> is an unencrypted password to use.
The group may be given either as a string group name, or an integer gid number.
<P>
The <EM>varlist</EM> is a array of literal names (or a single literal name)
to save to the user's .backtalk file, just as in the
<A HREF="#savevar_cmd">savevar</A> command.  In addition to the variables
listed, a variable named 'regdate' is saved with the current time.
If a variable named <TT>email</TT> is included, and if we are configured to
save email addresses to the identity database, then this will be done.
<P>
On success, an empty string is returned.  Otherwise, a string of error
messages (separated by \n) is returned.

<P>
<DT><A NAME="changegroup_cmd">changegroup</A>
<DD>
<EM>login newgroup</EM> <TT>changegroup</TT> <EM>error</EM>
<P>
Set the given user's primary group id to the given value.  The group can
be given either as a numeric gid, or as a string group name.
If the login or groupname does not exist, or the group number is negative,
an error string is returned.
If they are OK, a null string is returned.
Only conference administrators have the power to execute this command.
This function will not work on installations where the
<A HREF="#nopwedit_var">nopwedit</A> constant is true
(<EM>i.e.</EM>, those that use the unix password file as the user database).


<P>
<DT><A NAME="changename_cmd">changename</A>
<DD>
<EM>newname</EM> <TT>changename</TT> <EM>error</EM>
<P>
Set the user's full name to the given new name.  User must be authenticated.
If the new name is illegal, an error message is return.
If it is OK, a null string is returned.
Note that the fullname is not the user's current alias in the current
conference (that is changed by the <A HREF="#conf_alias_cmd">conf_alias</A>
function).
The fullname is the default value for the alias when he joins
a new conference for the first time, and it is the name printed when someone
asks for a bio of the user.
Conference administrators may apply this command to another user's
account by doing a <A HREF="#selectuser_cmd">selectuser</A> command.
This function will not work on installations where the
<A HREF="#nopwedit_var">nopwedit</A> constant is true
(<EM>i.e.</EM>, those that use the unix password file as the user database).

<P>
<DT><A NAME="changepass_cmd">changepass</A>
<DD>
<EM>newpassword</EM> <TT>changepass</TT> <EM>error</EM>
<P>
Set the user's password to the given string.
If the password isn't reasonably good, an error message is return.
If it is OK, a null string is returned.
Conference administrators may apply this command to another user's
account by doing a <A HREF="#selectuser_cmd">selectuser</A> command.
Note that this validates previously unvalidate or invalidated accounts as
a side effect.
This function will not work on installations where the
<A HREF="#nopwedit_var">nopwedit</A> constant is true
(<EM>i.e.</EM>, those that use the unix password file as the user database).

<P>
<DT><A NAME="changeemail_cmd">changeemail</A>
<DD>
<EM>newemail</EM> <TT>changeemail</TT> <EM>error</EM>
<P>
In the rare installations which have user's E-mail addresses in the user
database, this changes them.  In most installations, it is a no-op.
Conference administrators may apply this command to another user's
account by doing a <A HREF="#selectuser_cmd">selectuser</A> command.

<P>
<DT><A NAME="selectuser_cmd">selectuser</A>
<DD>
<EM>loginname</EM> <TT>selectuser</TT> <EM>-</EM>
<P>
Users in conference administrator group
may execute this command for any user login,
and user in the gradm group may execute it for user logins which have the
same primary group as they do.
It changes the account that <A HREF="#changepass_cmd">changepass</A>,
<A HREF="#changename_cmd">changename</A>,
<A HREF="#changeemail_cmd">changeemail</A>
and
<A HREF="#removeuser_cmd">removeuser</A>
operate on from the user's own account to the named account.
It also makes file handles for user files refer to the selected user's
files, so that the conference administrator may write to them.
Giving a login name of () reverts to selecting the conference administrator's
own account.

<P>
<DT><A NAME="removeuser_cmd">removeuser</A>
<DD>
<EM>-</EM> <TT>removeuser</TT> <EM>-</EM>
<P>
Permanently delete the user's account.
Conference administrators may apply this command to another user's
account by doing a <A HREF="#selectuser_cmd">selectuser</A> command.
This function will not work on installations where the
<A HREF="#nopwedit_var">nopwedit</A> constant is true
(<EM>i.e.</EM>, those that use the unix password file as the user database).

<P>
<DT><A NAME="validate_cmd">validate</A>
<DD>
<EM>loginname flag</EM> <TT>validate</TT> <EM>-</EM>
<P>
This validates (if the flag is true) or invalidates (if the flag is false)
a user account.  Invalidated accounts still exist, but cannot be logged into.
Users in conference administrator group
may execute this command for any user login,
and user in the gradm group may execute it for user logins which have the
same primary group as they do.
This function will not work on installations where the
<A HREF="#nopwedit_var">nopwedit</A> constant is true
(<EM>i.e.</EM>, those that use the unix password file as the user database).

<P>
<DT><A NAME="newgroup_cmd">newgroup</A>
<DD>
<EM>groupname</EM> <TT>newgroup</TT> <EM>flag</EM>
<P>
Create a new group with the given group name.
Returns 1 if the group already exists, 0 on success.
Only conference administrators can execute this command.

<P>
<DT><A NAME="newgroupmem_cmd">newgroupmem</A>
<DD>
<EM>groupname username</EM> <TT>newgroupmem</TT> <EM>flag</EM>
<P>
Add the given group to a user's list of secondary groups.
Returns 1 if the group does not exist, 0 on success.
Only conference administrators can execute this command.

<P>
<DT><A NAME="delgroup_cmd">delgroup</A>
<DD>
<EM>groupname</EM> <TT>delgroup</TT> <EM>flag</EM>
<P>
Delete a group.
Returns 1 if the group did not exist, 0 on success.
Only conference administrators can execute this command.

<P>
<DT><A NAME="delgroupmem_cmd">delgroupmem</A>
<DD>
<EM>groupname username</EM> <TT>delgroupmem</TT> <EM>flag</EM>
<P>
Remove the given user from the given group.
Returns 1 if the group does not exist or the user was not in it, 0 on success.
Only conference administrators can execute this command.

<P>
<DT><A NAME="newsession_cmd">newsession</A>
<DD>
<EM>login password</EM> <TT>newsession</TT> <EM>flag</EM>
<P>
For systems configured to use sessions
(where the <A HREF="#sessions_var">sessions</A> variable is true)
this function initiates a new session.  The user's login and password are
passed in.  If the user does not exist, or the password is incorrect, or
the system is not configured to use sessions, <EM>flag</EM>
will be true and nothing else happens.
If the login is correct, an entry is created in the session database, a
cookie with the session ID is created, and <EM>flag</EM> is set to false.
For the cookie to be correctly set, this must be done before the first
<A HREF="#print">print</A>,
<A HREF="#pr">pr</A>,
or
<A HREF="#dumpstack">dumpstack</A>.

<P>
<DT><A NAME="killsession_cmd">killsession</A>
<DD>
<EM>-</EM> <TT>killsession</TT> <EM>-</EM>
<P>
Invalidates any session that may be in progress, and erase any session cookie.
This logs the user out, in systems configured to use sessions.

</DL>
<H3><A NAME="miscop">Miscellaneous Operators</A></H3>
<DL>

<P>
<DT><A NAME="browser_cmd">browser</A>
<DD>
<EM>-</EM> <TT>browser</TT> <EM>code</EM>
<P>
This returns an integer code classifying the user's browser into one of four
rough groups according to its capabilities.
<DL>
<P>
<DT>code=0:
<DD>Non-graphical browsers, like Lynx.  No tables.
<P>
<DT>code=1:
<DD>Basic HTML 2.0 browsers, with no tables or frames.
    Often &amp;nbsp doesn't work.
<P>
<DT>code=2:
<DD>Enhanced browsers, with tables, but not frames.  Netscape 1.x browsers.
<P>
<DT>code=3:
<DD>Browsers that support frames.  Netscape 2.0 and Internet Explorer.
</DL>
<P>
Further codes may be added in the future (maybe 4 means JavaScript).
The database this is generated from is currently very incomplete.
The complete description of the browser can be found in the environment
variable HTTP_USER_AGENT.
This is somewhat obsolete, as nearly all modern browsers have all these
capabilties and there is little sense any more in supporting anything
except the 0 and 3 cases.

<P>
<DT><A NAME="serverurl_cmd">serverurl</A>
<DD>
<EM>-</EM> <TT>serverurl</TT> <EM>url</EM>
<P>
Push the URL of the server on which the current request was made.  This is
something like <TT>(http://www.yourhost.com)</TT>.  The protocol will be
either <TT>http</TT> or <TT>https</TT> depending on how the request was made.
If this is unavailable (as when Backtalk is being run from a browser) an
empty string is returned.

<P>
<DT><A NAME="backtalkurl_cmd">backtalkurl</A>
<DD>
<EM>-</EM> <TT>backtalkurl</TT> <EM>url</EM>
<P>
Push the URL of the backtalk CGI program on which the current request was
made.  This is typically something like
<TT>(http://www.yourhost.com/cgi-bin/pw/backtalk)</TT>.  The protocol will be
either <TT>http</TT> or <TT>https</TT> depending on how the request was made.
If this is unavailable (as when Backtalk is being run from a browser) an
empty string is returned.  If defined, this is the same as
<A HREF=#serverurl_cmd>serverurl</A> with the <TT>SCRIPT_NAME</TT> environment
variable appended.

<P>
<DT><A NAME="mimename_cmd">mimename</A>
<DD>
<EM>type</EM> <TT>mimename</TT> <EM>name</EM>
<P>
Given a mime type, like "<TT>application/msword</TT>"
find an English description, like "<TT>microsoft word</TT>".
If no English description is known for the type,
the type is returned unchanged.
Currently this only works in installations where attachments are enabled.
In other installations is a no-op, always returning whatever was passed in.

<P>
<DT><A NAME="time_cmd">time</A>
<DD>
<EM>-</EM> <TT>time</TT> <EM>seconds</EM>
<P>
Push the current time, as a Backtalk time object.

<P>
<DT><A NAME="ctime_cmd">ctime</A>
<DD>
<EM>seconds</EM> <TT>ctime</TT> <EM>string</EM>
<P>
Convert a Backtalk time to a text string representing the time.
The string has the usual Unix format (except without a terminal newline):
<PRE>
    Wed Jun 30 21:49:08 1993
</PRE>
The <A HREF="#substr_cmd">substr</A>
command may be used to pick out your favorite segment.
If the <A HREF=#timezone_var>timezone</A> variable is defined to something
other than a null string, ctime converts using that timezone.

<P>
<DT><A NAME="ztime_cmd">ztime</A>
<DD>
<EM>seconds</EM> <TT>ztime</TT> <EM>string</EM>
<P>
Convert a Backtalk time to text string representing the time.
The string has the same format as the <A HREF="#ctime_cmd">ctime</A>
string, except that it includes a three-letter timezone abbrevition.
If the <A HREF=#timezone_var>timezone</A> variable is defined to something
other than a null string, ztime converts using that timezone.

<P>
<DT><A NAME="htime_cmd">htime</A>
<DD>
<EM>seconds</EM> <TT>htime</TT> <EM>string</EM>
<P>
Convert a Backtalk time to a http format time string.
Format is like:
<PRE>
   Wdy, DD-Mon-YYYY hh:mm:ss GMT
   Mon, 08-Nov-2004 15:38:42 GMT
</PRE>
This is almost RFC 822 format, except that it has dashs in the date part
instead of spaces, and the years is four digits instead of two.
It always reports the time in GMT, regardless of the local time zone.

<P>
<DT><A NAME="itime_cmd">itime</A>
<DD>
<EM>seconds</EM> <TT>itime</TT> <EM>string</EM>
<P>
Convert a Backtalk time to standard international format (ISO 8601) time string.
Format is like
<PRE>
   YYYY-MM-DDThh:mm:ssZ
   1997-07-16T19:20:30Z
</PRE>
It always reports the time in GMT, regardless of the local time zone. (The
"Z" indicate GMT.)

<P>
<DT><A NAME="dtime_cmd">dtime</A>
<DD>
<EM>string future start</EM> <TT>dtime</TT> <EM>seconds</EM>
<P>
Convert a date/time described by a string to a Backtalk time
The input string can be very flexibly formatted.  Things that work
include exact times, like
``7:30pm January 18, 1994'' or ``1/18/94 19:30:00,''
and less completely specified times like
``March,'' ``June 17,'' ``7pm,'' or ``Tuesday''.
<P>
For incompletely specified dates, it will return either the next
occurrence of that date (if <EM>future</EM> is true), or the most recent
occurrence of that date (if <EM>future</EM> is false).
For strings that actually describe a period of time (like ``Feb 1996''),
it returns the beginning of the time period (if <EM>start</EM> is true), or
the end (if <EM>start</EM> is false).
This can be overridden if the input string is explicit about which
interpretation we want, like ``the beginning of next March''.
<P>
You can also use relative times in the string, like ``-3 months'' or
``3 months ago'' or ``+1 year, 6 hours, 8 seconds.''
If no sign is given, as in ``3 days,'' the <EM>future</EM> flag determines
whether the returned date will be 3 days in the future or 3 days in the past.
<P>
Absolute dates are presumed to be in the time zone specified by the
<A HREF=#timezone_var>timezone</A> variable.
<P>
Minimum and maximum time values can be obtained by asking for ``the beginning
of time'' or ``the end of time'' or just ``start'' or ``end''.
<P>
If a string that cannot be interpreted is given, dtime returns zero.
(Note that ``the beginning of time'' returns one not zero.)

<P>
<DT><A NAME="rand_cmd">rand</A>
<DD>
<EM>range</EM> <TT>rand</TT> <EM>number</EM>
<P>
Generate a random integer between zero and range-1.

<P>
<DT><A NAME="srand_cmd">srand</A>
<DD>
<EM>seed</EM> <TT>srand</TT> <EM>-</EM>
<P>
Seed the random number generator with the given seed.
If do not explicitly seed the random number generator,
it is automatically seeded with the current time
(Essentially a "time srand" is done).
Thus, the
<TT>srand</TT>
call is only needed if you want repeatable runs while debugging.

<P>
<DT><A NAME="timeout_cmd">timeout</A>
<DD>
<EM>seconds</EM> <TT>timeout</TT> <EM>-</EM>
<P>
Terminate the program with a crash after the given number of seconds has
elapsed.  This is meant to be used during development of new scripts to
control infinite loops, since the script developer may not have the access
to kill a runaway process.  Successive
<TT>timeout</TT>
calls reset the clock.
An argument of zero cancels any pending timeouts.

<P>
<DT><A NAME="sleep_cmd">sleep</A>
<DD>
<EM>seconds</EM> <TT>sleep</TT> <EM>-</EM>
<P>
Sleep for the given number of seconds.

<P>
<DT><A NAME="showopt_cmd">showopt</A>
<DD>
<EM>flag</EM> <TT>showopt</TT> <EM>version-description</EM>
<P>
This function outputs a long, multiple-line description of the version
and configuration of the Backtalk interpretor.  If the <EM>flag</EM>
is true, the description will be formatted with HTML line breaks, otherwise
it is just plain text.
</DL>

<H3><A NAME="confop">Conferencing Operators</A></H3>

The commands described in this section constitute the interface to the
conference database.
Many of their inputs and outputs are passed through system variables instead
of the stack.  These variables are individually described in the next section.
This manually currently describes the Picospan-compatible implementation.
Other future implementations may differ.
<DL>

<P>
<DT><A NAME="next_conf_cmd">next_conf</A>
<DD>
<EM>csel</EM> <TT>next_conf</TT> <EM>csel conf</EM>
<P>
This gets the next conference name from the given conference selector,
and pushs an updated conference selector,
and the new conference name.
It does not check that the named conference exists.
The conference selector
may be either a comma-separated list of conference names,
or a string like (@0), consisting of an at-sign and a number.
In the latter case the number refers to a line of the user's .cflist
(or the default .cflist if the user is unauthenticated
or doesn't have a .cflist).
If there is no next conference, both results are empty strings.

<P>
<DT><A NAME="cflist_array_cmd">cflist_array</A>
<DD>
<EM>flag</EM> <TT>cflist_array</TT> <EM>array</EM>
<P>
This reads the user's <TT>.cflist</TT> into an array.  The flag may have
the following values.
<BLOCKQUOTE>
<TABLE BORDER=0>
<TR><TD>0&nbsp;&nbsp;&nbsp;&nbsp;</TD>
    <TD>Read <TT>dflt.cflist</TT> file&nbsp;&nbsp;</TD>
    <TD>Omit comment lines</TD><TR>
<TR><TD>1</TD>
    <TD>Read user's .cflist</TD>
    <TD>Omit comment lines</TD><TR>
<TR><TD>2</TD>
    <TD>Read <TT>dflt.cflist</TT> file</TD>
    <TD>Include comment lines</TD><TR>
<TR><TD>3</TD>
    <TD>Read user's .cflist</TD>
    <TD>Include comment lines</TD><TR>
</TABLE>
</BLOCKQUOTE>
When reading the user's .cflist, we will still get the default file if the
user doesn't have one.
When reading the <TT>dflt.cflist</TT> file,  
Some of the values in the returned array may be written as
<BLOCKQUOTE>
<EM>group</EM>:<EM>conf</EM>
</BLOCKQUOTE>
which means that the named conference is only on the list if the user is in
the named group.  These forms never appear when fetching the user's .cflist.
If the user is in the group, you get just the conference name, otherwise the
entry is not included in the list.
<P>
If comments are to be returned, the appear as strings starting with a pound
sign.  Some interfaces use these as subheadings or flags, most interfaces
ignore them.

<P>
<DT><A NAME="open_conf_cmd">open_conf</A>
<DD>
<EM>-</EM> <TT>open_conf</TT> <EM>err</EM>
<P>
This opens a conference (specified by the <A HREF="#conf_var">conf</A>
system variable).
Most of the other commands will only work after a conference has been opened.
Any previously open conference is automatically closed by <TT>open_conf</TT>.
If you attempt to open a conference named '<TT>?</TT>' then you get the
default conference.
If the conference is already open, this command is a no-op.
For Picospan-format conferences,
it loads information from the conference "config" and "sum"
files and from the user's participation file.
It sets the variables
<A HREF="#maxitem_var">maxitem</A>,
<A HREF="#amfw_var">amfw</A>,
<A HREF="#fwlist_var">fwlist</A>,
<A HREF="#maypost_var">maypost</A>,
<A HREF="#mayresp_var">mayresp</A>,
<A HREF="#mayread_var">mayread</A>,
<A HREF="#alias_var">alias</A>,
<A HREF="#confdir_var">confdir</A>,
<A HREF="#fishbowl_var">fishbowl</A>,
<A HREF="#userlist_var">userlist</A>,
<A HREF="#grouplist_var">grouplist</A>,
<A HREF="#secret_var">secret</A>,
<A HREF="#newbie_var">newbie</A>,
<A HREF="#conftitle_var">conftitle</A>,
and <A HREF="#particip_var">particip</A>.
It pushes an error code which is 0 if the conference exists, and 1 otherwise.
Note that you can open conferences to which you do not have access (due to
not being on the ulist/glist
or not having the right <A HREF="#cpass_var">cpass</A>),
but in those cases <A HREF="#mayread_var">mayread</A>,
<A HREF="#mayresp_var">mayresp</A>, and
<A HREF="#maypost_var">maypost</A> will be false.

<P>
<DT><A NAME="snoop_conf_cmd">snoop_conf</A>
<DD>
<EM>-</EM> <TT>snoop_conf</TT> <EM>err</EM>
<P>
This is exactly like <A HREF="#open_conf_cmd">open_conf</A> except it will never
create a participation file.  It behaves as if you resign the moment you
close the conference.  It's used when we want to get information about a
conference without actually joining it.
<P>
If the current conference is open for snooping, you need to do an explicit
<A HREF="#close_conf_cmd">close_conf</A> before you can open it normally,
and vice versa.

<P>
<DT><A NAME="close_conf_cmd">close_conf</A>
<DD>
<EM>-</EM> <TT>close_conf</TT> <EM>-</EM>
<P>
This command closes the currently open conference.
It writes out the participation file (if the conference was not open for
snooping) and generally cleans up and closes down,
but there is really no reason to ever call it, except as desribed in the
description of <A HREF="#snoop_conf_cmd">snoop_conf</A>.
Each <A HREF="#open_conf_cmd">open_conf</A> or
<A HREF="#snoop_conf_cmd">snoop_conf</A>
command automatically closes any previously open conference,
and Backtalk automatically executes a
<TT>close_conf</TT> upon the termination of your script.

<P>
<DT><A NAME="conf_dir_cmd">conf_dir</A>
<DD>
<EM>confname</EM> <TT>conf_dir</TT> <EM>confdir</EM>
<P>
Given a conference name, return its directory path.
Note that <A HREF="#open_conf_cmd">open_conf</A> does the same thing and more,
so this is only useful if you want to know the directory path of a
conference you probably don't intend to open.
Since the same conference can have multiple names, the only way to test if
two names refer to the same conference is to look up their conference
directory names and compare those.

<P>
<DT><A NAME="cache_conflist_cmd">cache_conflist</A>
<DD>
<EM>boolean</EM> <TT>cache_conflist</TT> <EM>-</EM>
<P>
This turns on and off in-memory cacheing of the conference list.
If you are planning to do a lot of calls to
<A HREF="#open_conf_cmd">open_conf</A>
or
<A HREF="#conf_dir_cmd">conf_dir</A>, then turning this on will improve
performance.  Turning it off when you are done will reduce memory use.
It is off by default.

<P>
<DT><A NAME="resign_conf_cmd">resign_conf</A>
<DD>
<EM>-</EM> <TT>resign_conf</TT> <EM>-</EM>
<P>
This command closes the currently open conference and resigns from it,
discarding all record that the user has ever been in it.

<P>
<DT><A NAME="conf_new_cmd">conf_new</A>
<DD>
<EM>-</EM> <TT>conf_new</TT> <EM>total brandnew newresp unseen</EM>
<P>
Find the total number of items,
the number of brand new items, the number items
with new responses,
and the number of new but unseen items in the current conference.
Forgotten and retired items are included in the total count,
but not in the brandnew and newresp count.

<P>
<DT><A NAME="conf_alias_cmd">conf_alias</A>
<DD>
<EM>newname</EM> <TT>conf_alias</TT> <EM>-</EM>
<P>
Set the user's name within the current conference to the given value.
This will continue to be his default alias in this conference on all
future sessions. 
See also the <A HREF="#changename_cmd">changename</A> function.

<P>
<DT><A NAME="conf_bull_cmd">conf_bull</A>
<DD>
<EM>-</EM> <TT>conf_bull</TT> <EM>text</EM>
<P>
Push the text of conference bulletin on the stack.
<A HREF="#open_conf_cmd">Open_conf</A> must have been called.
Equivalent to '<TT>(*bull) read</TT>'.

<P>
<DT><A NAME="conf_index_cmd">conf_index</A>
<DD>
<EM>-</EM> <TT>conf_index</TT> <EM>text</EM>
<P>
Push the text of conference index on the stack.
<A HREF="#open_conf_cmd">Open_conf</A> must have been called.
Equivalent to '<TT>(*index) read</TT>'.

<P>
<DT><A NAME="conf_login_cmd">conf_login</A>
<DD>
<EM>-</EM> <TT>conf_login</TT> <EM>text</EM>
<P>
Push the text of conference login message on the stack.
<A HREF="#open_conf_cmd">Open_conf</A> must have been called.
Equivalent to '<TT>(*login) read</TT>'.

<P>
<DT><A NAME="conf_logout_cmd">conf_logout</A>
<DD>
<EM>-</EM> <TT>conf_logout</TT> <EM>text</EM>
<P>
Push the text of conference logout message on the stack.
<A HREF="#open_conf_cmd">Open_conf</A> must have been called.
Equivalent to '<TT>(*logout) read</TT>'.

<P>
<DT><A NAME="last_in_conf_cmd">last_in_conf</A>
<DD>
<EM>-</EM> <TT>last_in_conf</TT> <EM>time</EM>
<P>
Return the date and time when we last modified the conference's participation
file.  If we weren't members of the conference before now, return a time of
zero.
<A HREF="#open_conf_cmd">Open_conf</A> must have been called.

<P>
<DT><A NAME="next_item_cmd">next_item</A>
<DD>
<EM>is</EM> <TT>next_item</TT> <EM>is nrs item 0</EM>
<BR>
<EM>is</EM> <TT>next_item</TT> <EM>err</EM>
<P>
<TT>Next_item</TT>
identifies the next item number from the item selector given on the stack.
The item will be the next one named in the item selector which has responses
selected by the system variable <A HREF="#rsel_var">rsel</A>.
The <A HREF="#rsel_var">rsel</A> variable may be set to (all),
(new), (unseen), (since), a negative number, or to a numeric range.
If rsel is (new), only items with new responses will be found.
If rsel is (unseen), unseen items and items with new responses will be found.
If rsel is (since), only items with responses since the date given in the
<A HREF=#since_var>since</A> variable will be selected.
If rsel is a negative number ("-0" is legal), it gives the number of responses
from the end to show.
<TT>Next_item</TT> will also skips forgotten or retired items if
<A HREF="#showforgotten_var">showforgotten</A> is not set.
If the variable <A HREF="#noskip_var">noskip</A>
is true, however, items will not be skipped, even if no responses are selected.
<P>
When it finally finds an qualifying item, it pushes the remainder of
the item-selector on the stack,
followed by a numeric version of the response selector, the number
of the new item, and a zero code indicating success.
Often <A HREF="#this_item_cmd">this_item</A>
will then be called to make the item found by
<TT>next_item</TT> into the current item.
An error code of 1 is pushed if there is no next item,
or an error code of 2 is pushed if the item selector has bad syntax.

<P>
<DT><A NAME="this_item_cmd">this_item</A>
<DD>
<EM>rsel item</EM> <TT>this_item</TT> <EM>nrs 0</EM>
<BR>
<EM>rsel item</EM> <TT>this_item</TT> <EM>err</EM>
<P>
<TT>This_item</TT>
is given a response range and an item number, and makes that item in the
currently open item the current item.
If the response range was not numeric, converts it to numeric form.
It reads the sum and participation file information for the item,
stores that information in system variables, and prepares to read the item.
<P>
If successful, <TT>this_item</TT>
pushs a numeric response-selector and a 0.
On error it pushes a non-error code on the stack: 1 if the items does not
exist, 2 if we lack read access to it.
If the input response selector was numeric, it is the selector output, but
values of (new), (since) and (all) are converted into the corresponding
numeric string.
The Picospan implementation also sets the following system variables:
<A HREF="#item_var">item</A>,
<A HREF="#maxresp_var">maxresp</A>,
<A HREF="#maxread_var">maxread</A>,
<A HREF="#linkdate_var">linkdate</A>,
<A HREF="#lastdate_var">lastdate</A>,
<A HREF="#readdate_var">readdate</A>,
<A HREF="#forgotten_var">forgotten</A>,
<A HREF="#frozen_var">frozen</A>,
<A HREF="#mayresp_var">mayresp</A>,
<A HREF="#retired_var">retired</A>,
and <A HREF="#linked_var">linked</A>.
In future implementations,
some of these variables may not be set until you do a
<A HREF="#read_item_cmd">read_item</A> command.
Even in the current implementation, some may be "corrected" at that point,
since the item itself is considered a more accurate source of information
than the sum file.
<P>
An error code of 1 is pushed if the item does not exist.
An error code of 2 is pushed if the user does not have read access to the
conference.

<P>
<DT><A NAME="read_item_cmd">read_item</A>
<DD>
<EM>nrs</EM> <TT>read_item</TT> <EM>nrs 0</EM>
<BR>
<EM>nrs</EM> <TT>read_item</TT> <EM>err</EM>
<P>
The <TT>read_item</TT> command can be called after a
<A HREF="#this_item_cmd">this_item</A> call.
It loads information from the item file header and prepares for a scan of
the responses.
<P>
To prepare for the scan it takes a numeric response-selector off the stack
and adjusts it.  If it started with a 0, indicating that the item text
(response 0) is to be read, it removes that element from the response
selector and sets the
<A HREF="#resp_var">resp</A>
system variable to 0, indicating that we are at response zero.
If the numeric response-selector starts with anything else, it leaves it
unchanged and sets
<A HREF="#resp_var">resp</A>
to -1, indicating that there is no current response.
<P>
In addition, it sets the
<A HREF="#title_var">title</A>,
<A HREF="#date_var">date</A>,
<A HREF="#editdate_var">editdate</A>,
<A HREF="#authorname_var">authorname</A>
(to null if <A HREF="#mayseealias">mayseealias</A> is false),
<A HREF="#authorid_var">authorid</A>,
<A HREF="#authoruid_var">authoruid</A>,
<A HREF="#texttype_var">texttype</A>,
<A HREF="#hidden_var">hidden</A>,
<A HREF="#erased_var">erased</A>,
<A HREF="#attachments_var">attachments</A>,
<A HREF="#mayedit_var">mayedit</A>,
<A HREF="#mayerase_var">mayerase</A>,
<A HREF="#mayhide_var">mayhide</A>,
<A HREF="#mayfreeze_var">mayfreeze</A>,
<A HREF="#mayretire_var">mayretire</A>,
<A HREF="#mayretitle_var">mayretitle</A>
and <A HREF="#maykill_var">maykill</A>
system variables to the values for the item (or item text).
<P>
It will also replace the
<A HREF="#frozen_var">frozen</A>,
<A HREF="#linked_var">linked</A>,
and <A HREF="#retired_var">retired</A>
values which were taken from the sum file by
<A HREF="#this_item_cmd">this_item</A>
with more authorative values taken from the item file itself,
possibly also changing <A HREF="#mayresp_var">mayresp</A>.
This only makes a difference if the sum file is munged.
<P>
If the item file does not exist, an error code of 1 is pushed.
If the numeric response selector has bad syntax, an error code of 2 is pushed.

<P>
<DT><A NAME="next_resp_cmd">next_resp</A>
<DD>
<EM>nrs</EM> <TT>next_resp</TT> <EM>nrs resp 0</EM>
<BR>
<EM>nrs</EM> <TT>next_resp</TT> <EM>err</EM>
<P>
The
<TT>next_resp</TT>
picks the next response number out of a numeric response selector,
deleting that response from the selector.
It pushs an error code of 1 if the selector was empty, or 2 if the
response selector was syntactically incorrect.
It doesn't check if the response really exists, or access the conferencing
system in any other way.  It is really just a different version of the
<A HREF="#next_int_cmd">next_int</A>
command.

<P>
<DT><A NAME="read_resp_cmd">read_resp</A>
<DD>
<EM>resp</EM> <TT>read_resp</TT> <EM>err</EM>
<P>
<TT>Read_resp</TT> reads the header for a response.
It is usually run right after a <A HREF="#next_resp_cmd">next_resp</A>.
It takes the response number from the stack, and the item number from the
<A HREF="#item_var">item</A> system variable.
The <A HREF="#this_item_cmd">this_item</A> and
<A HREF="#read_item_cmd">read_item</A> commands should previously have been
called on the item.
It sets the
<A HREF="#resp_var">resp</A>,
<A HREF="#date_var">date</A>,
<A HREF="#editdate_var">editdate</A>,
<A HREF="#authorname_var">authorname</A>,
<A HREF="#authorid_var">authorid</A>,
<A HREF="#authoruid_var">authoruid</A>,
<A HREF="#texttype_var">texttype</A>,
<A HREF="#hidden_var">hidden</A>,
<A HREF="#erased_var">erased</A>,
<A HREF="#attachments_var">attachments</A>,
and
<A HREF="#parentresp_var">parentresp</A>
system variables to the values for the response.
If the response does not exist, an error code of 1 is pushed, otherwise
a 0 is pushed.
<P>
<TT>Read_resp</TT> calls may be done in any order,
so that the responses may be read in any order, but the implementation is
optimized for processing responses in sequence.

<P>
<DT><A NAME="read_text_cmd">read_text</A>
<DD>
<EM>format</EM> <TT>read_text</TT> <EM>text</EM>
<P>
The
<TT>read_text</TT>
command may be called after a
<A HREF="#read_item_cmd">read_item</A>
or
<A HREF="#read_resp_cmd">read_resp</A>
to fetch the corresponding item or response text,
which is pushed onto the stack as a single string.
If <EM>format</EM> is 0, it returns a plain text response
(possibly converting an HTML response to plain text,
if that is all that is stored).
If <EM>format</EM> is 1, it returns an HTML response (if the response
is stored as plain text, it runs it through <A HREF="#expand_cmd">expand</A>
and then encloses it in a <TT>&lt;PRE&gt;</TT> environment).
If <EM>format</EM> is 2, it returns the raw text -
that is it returns HTML for HTML responses and plaintext
for plaintext responses, and does no postprocessing on them.
<P>
<TT>Read_text</TT> also marks the response as "seen"
in the user's participation file,
unless the <A HREF="#blindfold_var">blindfold</A> variable is set to a
non-zero value.
It works just fine on hidden responses, though on erased
responses it will return a lot of scribbling.

<P>
<DT><A NAME="post_item_cmd">post_item</A>
<DD>
<EM>-</EM> <TT>post_item</TT> <EM>-</EM>
<P>
This creates a new item in the current conference.
Input is taken from the system variables
<A HREF="#title_var">title</A>,
<A HREF="#text_var">text</A>,
<A HREF="#texttype_var">texttype</A>,
<A HREF="#ifav_var">ifav</A>,
<A HREF="#alias_var">alias</A>,
<A HREF="#id_var">id</A>,
<A HREF="#uid_var">uid</A>,
<A HREF="#allowgraphics_var">allowgraphics</A>,
<A HREF="#attachments_var">attachments</A>,
<A HREF="#hidden_var">hidden</A>, and
<A HREF="#erased_var">erased</A>
(although posting erased items would be strange).
If <A HREF="#texttype_var">texttype</A> is "text/html",
then the <A HREF="#cleanhtml_var">cleanhtml</A>
function is automatically called on the item text.
The <A HREF="#fav_note">fav</A> note in the user's participation file
for the item is set to the value of <A HREF="#ifav_var">ifav</A>.
On success, the variable <A HREF="#item_var">item</A> is set to the number
of the new item.
<P>
The <A HREF="#maypost_var">maypost</A> variable can be checked to see if
the current user has the ability to post items to the current conference.
<P>
If <A HREF="#post_log_file_var">post_log_file</A> is defined, then after
a new item is created, the user-defined function <TT>item_log_format</TT>
will be called.
It should return a single string, which will be appended to the file named
by the <A HREF="#post_log_file_var">post_log_file</A> constant.

<P>
<DT><A NAME="post_resp_cmd">post_resp</A>
<DD>
<EM>-</EM> <TT>post_resp</TT> <EM>resp_number</EM>
<P>
This appends a new response to the end if the item specified by the
<A HREF="#item_var">item</A>
system variable in the current conference.
Input is taken from the system variables
<A HREF="#text_var">text</A>,
<A HREF="#texttype_var">texttype</A>,
<A HREF="#rfav_var">rfav</A>,
<A HREF="#alias_var">alias</A>,
<A HREF="#id_var">id</A>,
<A HREF="#uid_var">uid</A>,
<A HREF="#allowgraphics_var">allowgraphics</A>,
<A HREF="#parentresp_var">parentresp</A>,
<A HREF="#attachments_var">attachments</A>,
<A HREF="#hidden_var">hidden</A>, and
<A HREF="#erased_var">erased</A>.
If <A HREF="#texttype_var">texttype</A> is "text/html",
then the <A HREF="#cleanhtml_var">cleanhtml</A>
function is automatically called on the response text.
If <A HREF="#rfav_var">rfav</A> is non-zero and the item is not already
a favorite, then the <A HREF="#fav_note">fav</A> note in the user's
participation file for the
item is set to the value of <A HREF="#rfav_var">rfav</A>.
If the item does not exist, an error code of 0 is pushed.
If the <A HREF="#expect_resp_var">expect_resp</A> variable is set to a
positive value which is less than the next response number, then -1 is
returned and nothing is posted.
Otherwise the number of the newly posted response is pushed.
<P>
The <A HREF="#mayresp_var">mayresp</A> variable can be checked to see if
the current user has the ability to post responses to the current item.
<P>
If <A HREF="#post_log_file_var">post_log_file</A> is defined, then after
a message is posted, the user-defined function <TT>resp_log_format</TT>
will be called, after pushing the new response number on the stack.
It should return a single string, which will be appended to the file named
by the <A HREF="#post_log_file_var">post_log_file</A> constant.

<P>
<DT><A NAME="get_conf_note_cmd">get_conf_note</A>
<DD>
<EM>fieldname</EM> <TT>get_conf_note</TT> <EM>value</EM>
<P>
Each user can attach various "notes" to each conference, each note being
identified by a field name.  This command fetches the value of the named
field.  The name can be either a string or a literal.  If the current
user has no such note attached to the current conference, then a 0 is
pushed.

<P>
<DT><A NAME="set_conf_note_cmd">set_conf_note</A>
<DD>
<EM>fieldname value</EM> <TT>set_conf_note</TT> <EM>-</EM>
<P>
Record a note for the current user and conference.  Fieldname can be given
as a literal or a string.  If the value is zero, the note will
be deleted.

<P>
<DT><A NAME="get_item_note_cmd">get_item_note</A>
<DD>
<EM>item fieldname</EM> <TT>get_item_note</TT> <EM>value</EM>
<P>
Each user can attach various "notes" to each item, each note being
identified by a field name.  This command fetches the value of the named
field for the given item in the current conference.  The name can be
either a string or a literal.  If the current
user has no such note attached to that item, then a 0 is
pushed.
<P>
Some item notes have special significance to the system:
<DL>
<DT><A NAME="fav_note">fav</A>
<DD>If non-zero, the item is a "favorite".  If the value is one, it will
    remain a favorite until explicitly set to another value.  If the item
    is two, then it will be automatically reset the next time the item is
    read.
</DL>
<P>
<DT><A NAME="set_item_note_cmd">set_item_note</A>
<DD>
<EM>item fieldname value</EM> <TT>set_item_note</TT> <EM>-</EM>
<P>
Record a note for the the given item and the current user and conference.
Fieldname can be given as a literal or a string.  If the value is an zero,
the note will be deleted.

<P>
<DT><A NAME="fav_sel_cmd">fav_sel</A>
<DD>
<EM>isel 0</EM> <TT>fav_sel</TT> <EM>isel</EM><BR>
<EM>isel 1</EM> <TT>fav_sel</TT> <EM>fav-isel other-isel</EM><BR>
<EM>isel 2</EM> <TT>fav_sel</TT> <EM>brandnew-isel newresp-isel</EM><BR>
<EM>isel 3</EM> <TT>fav_sel</TT> <EM>fav-isel brandnew-isel other-isel</EM>
<P>
Given an item selector, split it so that the items which are favorites or
brandnew are in one, and the rest the other.  There must be a conference open.
So for example, if items 2, 3, 4, 7, 10, and 14 are favorites, and we'd get:
<PRE>
   (1-$) 1      fav_sel (2-4,7,10,14)       (1,5-6,8-9,15-$)
   (1-9,15-3) 1 fav_sel (2-4,7,14,10,7,4-3) (1,5-6,8-9,15,13-11,9-8,6-5)
</PRE>
A common way to move favorites to the front of a selector would be:
<BLOCKQUOTE>
<TT>mark</TT> <EM>isel</EM> <TT>1 fav_sel (,) jointomark</TT>
</BLOCKQUOTE>

<P>
<DT><A NAME="mark_unseen_cmd">mark_unseen</A>
<DD>
<EM>resp item</EM> <TT>mark_unseen</TT> <EM>err</EM>
<P>
This marks the given response of the given item
to be the first unseen response of the item.
It pushs a 0 on success, a 1 if there is no such item, and a 2 if there
is no such response.

<P>
<DT><A NAME="forget_item_cmd">forget_item</A>
<DD>
<EM>item</EM> <TT>forget_item</TT> <EM>err</EM>
<P>
This marks the given item number as being forgotten in the user's
participation file.  With Picospan, if the item has never been read, it
has the odd side effect of marking the item text seen.
It pushs an error code of 1 if there is no such item, or 0 if we succeed.
If the item was a favorite, it is automatically disfavored.

<P>
<DT><A NAME="remember_item_cmd">remember_item</A>
<DD>
<EM>item</EM> <TT>remember_item</TT> <EM>err</EM>
<P>
This unforgets the given item number.
It pushs an error code of 1 if there is no such item, or 0 if we succeed.

<P>
<DT><A NAME="hide_resp_cmd">hide_resp</A>
<DD>
<EM>flag</EM> <TT>hide_resp</TT> <EM>err</EM>
<P>
If the flag is true, this marks response
<A HREF="#resp_var">resp</A>
of item <A HREF="#item_var">item</A>
in the currently open conference as being hidden.
If the flag is false, it unhides the selected response.
Authors of responses can hide or unhide responses if the
<A HREF="#author_hide_var">author_hide</A> variable is true.
Fairwitnesses can hide or unhide responses if the
<A HREF="#fw_hide_var">fw_hide</A> variable is true.
System administrators can always hide responses.
The <TT>hide_resp</TT> command pushs a zero on success,
a 1 if the response was erased or already set as designated,
and a 2 if there is no such response.
Responses in frozen items may only be hidden or unhidden if
<A HREF="#editfrozen_var">editfrozen</A> is enabled.

<P>
<DT><A NAME="erase_resp_cmd">erase_resp</A>
<DD>
<EM>-</EM> <TT>erase_resp</TT> <EM>err</EM>
<P>
This erases response
<A HREF="#resp_var">resp</A>
of item <A HREF="#item_var">item</A>
in the currently open conference.
The text is removed from the item, and any attachments are deleted.
Only the author of the response, the fairwitness of the conference, or the
system administrator can ever erase responses.
Authors can only do so if the
<A HREF="#author_erase_var">author_erase</A> variable is true.
Fairwitnesses can only do so if the
<A HREF="#fw_erase_var">fw_erase</A> variable is true.
The command pushs a zero on success, a 1 if the response was already erased,
and a 2 if there is no such response.
If a censored log file exists, a copy of the erased text will be saved there,
together with information about who censored it.
Responses in frozen items may only be erased if
<A HREF="#editfrozen_var">editfrozen</A> is enabled.

<P>
<DT><A NAME="edit_resp_cmd">edit_resp</A>
<DD>
<EM>-</EM> <TT>edit_resp</TT> <EM>err</EM>
<P>
This replaces the text of
<A HREF="#resp_var">resp</A>
of item <A HREF="#item_var">item</A>
in the currently open conference with new text
given by the
<A HREF="#text_var">text</A> and
<A HREF="#texttype_var">texttype</A> system variables.
The author's alias is reset to the value given by the 
<A HREF="#alias_var">alias</A> system variable.
Any parent pointer value is replaced with the current value of the
<A HREF="#parent_var">parent</A> variable.
Editting an erased item unerases it.
The previous text is logged to the censor log, if censor logging is enabled.
Only the author of the response, the fairwitness of the conference, or the
system administrator can ever edit responses.
Authors can only do so if the
<A HREF="#author_edit_var">author_edit</A> variable is true.
Fairwitnesses can only do so if the
<A HREF="#fw_edit_var">fw_edit</A> variable is true.
The command pushs a zero on success,
and a 2 if there is no such response or if the item is frozen,
and 3  if you lack the proper access to edit the response.
Responses in frozen items may only be edited if
<A HREF="#editfrozen_var">editfrozen</A> is enabled.

<P>
<DT><A NAME="freeze_item_cmd">freeze_item</A>
<DD>
<EM>flag</EM> <TT>freeze_item</TT> <EM>err</EM>
<P>
If the flag is true, this marks item <A HREF="#item_var">item</A>
in the currently open conference as being frozen.
If the flag is false, it thaws the selected item.
You must be the author of the item or a fairwitness to be able to do this,
and the item author can do it only if the variable
<A HREF="#author_freeze_var">author_freeze</A> is true.
The command pushs a zero on success,
a 1 if the item was already frozen (or thawed),
a 2 if there is no such item,
or a 3 if you are not the fairwitness or item author.

<P>
<DT><A NAME="kill_item_cmd">kill_item</A>
<DD>
<EM>-</EM> <TT>kill_item</TT> <EM>err</EM>
<P>
This kills item
<A HREF="#item_var">item</A>
in the current conference.
If the item is linked to other conferences, it may continue to exist
there, but otherwise it is permanently deleted, along with any attachments
to responses in the item.
Items may be killed by the fairwitness, or by the item's author
if it has not been responded to and
<A HREF="#author_kill_var">author_kill</A> is true.
It pushs a zero on success,
a 2 if there is no such item,
or a 3 if you do not have permission to kill the item.

<P>
<DT><A NAME="link_item_cmd">link_item</A>
<DD>
<EM>conf item</EM> <TT>link_item</TT> <EM>newitem</EM> 0<BR>
<EM>conf item</EM> <TT>link_item</TT> <EM>err</EM>
<P>
This creates a new item in the current conference which is a link to the
named item in the named conference.
Only fairwitnesses may link items.
Items may not be linked from private conferences except by conference
administrators.
It pushs the new item number and a zero error code on success,
a 1 if there is no such conference, or the conference is private,
a 2 if there is no such item in the source conference,
or a 3 if you do not have permission to link the item.

<P>
<DT><A NAME="retire_item_cmd">retire_item</A>
<DD>
<EM>flag</EM> <TT>retire_item</TT> <EM>err</EM>
<P>
If the flag is true, this marks item <A HREF="#item_var">item</A>
in the currently open conference as being retired.
If the flag is false, it unretires the selected item.
You must be the author of the item or a fairwitness to be able to do this,
and the item author can do it only if the variable
<A HREF="#author_retire_var">author_retire</A> is
true.
The command pushs a zero on success,
a 1 if the item was already retired (or unretired),
a 2 if there is no such item,
or a 3 if you are not the fairwitness or item author.

<P>
<DT><A NAME="retitle_item_cmd">retitle_item</A>
<DD>
<EM>newtitle</EM> <TT>retitle_item</TT> <EM>err</EM>
<P>
This changes the title of item <A HREF="#item_var">item</A>
to the given string.
You must be the author of the item, a fairwitness of the conference, or and
administrator to be able to do this,
but the item author can do it only if the variable
<A HREF="#author_retitle_var">author_retitle</A> is
true,
and the fairwitness can do it only if the variable
<A HREF="#fw_retitle_var">fw_retitle</A> is true.
The command pushs a zero on success,
a 1 if the given title is blank,
a 2 if there is no such item,
or a 3 if you do not have the proper access to perform this operation.
Frozen items may only be retitled if <A HREF="#editfrozen_var">editfrozen</A>
is enabled.

<P>
<DT><A NAME="check_partic_cmd">check_partic</A>
<DD>
<EM>user</EM> <TT>check_partic</TT> <EM>lastaccess</EM>
<P>
Check if the given user is a participant in the current conference.  If
so, return a last access date.  If not (or if the user does not exist),
return 0.

<P>
<DT><A NAME="first_partic_cmd">first_partic</A>
<DD>
<EM>user</EM> <TT>first_partic</TT> <EM>lastaccess user 0</EM><BR>
<EM>user</EM> <TT>first_partic</TT> <EM>1</EM>
<P>
Start a scan through the list of participants in the current conference.
To start from the beginning of the list, pass in the empty string.  Otherwise,
the first argument off the stack is the login name of a participant to start
scanning after (so that the participant returned will be the successor of
that participant).  On success, a user name and the time that that user last
read a new response in the conference is returned.  If there are no
particpants or if <A HREF="#mayread_var">mayread</A> is not true,
then a code of 1 is pushed.
<P>
Note:  Scanning participants can be extremely slow.

<P>
<DT><A NAME="next_partic_cmd">next_partic</A>
<DD>
- <TT>next_partic</TT> <EM>lastaccess user 0</EM><BR>
- <TT>next_partic</TT> <EM>1</EM>
<P>
Continue a scan of the participants of the current conference.
<A HREF="#first_partic_cmd">first_partic</A> must have been called before the
first call to <TT>next_partic</TT>.
There after, successive calls to <TT>next_partic</TT> return successive
particpant's and the last time they read a response in the conference.
When the last particpant has been read or
if <A HREF="#mayread_var">mayread</A> is not true,
an error code of 1 is returned.
<P>
Note:  Scanning participants can be extremely slow.

<P>
<DT><A NAME="make_attach_cmd">make_attach</A>
<DD>
<EM>tmphandle description response</EM> make_attach <EM>handle</EM>
<P>
Convert a temporary attachment handle, such as those returned in variables
whose names start with "<TT>baa_</TT>" in "<TT>multipart/form-data</TT>" posts,
into a real attachment handle.
You should supply a description of the attachment (if an empty string
is given, the original name of the file is used).
If the attachment is to be associate with a particular response in an item,
then the response number should be given (zero being the item text).  If
the attachment is associated with a conference as a whole, the the response
number should be -1.  If the attachment is to be associated iwth a user, then
a response number of -2 should be given.
<P>
If the response number is -1 or larger, then there must be a conference
currently open.  If the response number is 0 or larger, then the
<A HREF=#item_var>item</A> variable gives the item number for the
attachment.
<P>
The resulting attachment handle can be put into the
<A HREF=#attachments_var>attachments</A> and can be attached
to a posting with the <A HREF=#post_item_cmd>post_item</A> or
<A HREF=#post_resp_cmd>post_resp</A> commands.

<P>
<DT><A NAME="get_attach_cmd">get_attach</A>
<DD>
<EM>handle</EM> <TT>get_attach</TT> <EM>type size description url 0</EM><BR>
<EM>handle</EM> <TT>get_attach</TT> <EM>errcode</EM>
<P>
Given an attachment handle, such as the ones generated by
<A HREF=#make_attach_cmd>make_attach</A> or the ones put into
<A HREF=#attachments_var>attachments</A> variable by the
<A HREF=#read_item_cmd>read_item</A> and 
<A HREF=#read_resp_cmd>read_resp</A> commands,
this extracts some interesting information about the attachment.
It returns its mime-type (eg, "<TT>image/gif</TT>"), its size in bytes,
a description, and a url which can be used to fetch the document.
It pushs an error code of 1 if the attachment cannot be found or has been
deleted.  It pushs an error code of 2 if the current user does not have
access to the attachment.

<P>
<DT><A NAME="edit_attach_cmd">edit_attach</A>
<DD>
<EM>handle newdescription newtype</EM> <TT>edit_attach</TT> <EM>errcode</EM>
<P>
This function modifies the description and type associated with an existing
attachment.
Returns 1 if the named attachment does not exist, 0 on success.

<P>
<DT><A NAME="reattach_cmd">reattach</A>
<DD>
<EM>delhandle addhandle</EM> <TT>reattach</TT> <EM>errcode</EM>
<P>
This function adds or deletes attachments on existing items and responses.
The conference should already have been opened with a call to
<A HREF=#open_conf_cmd>open_conf</A>.  The system variables
<A HREF=#item>item</A>, and <A HREF=#resp>resp</A> select the response whose
attachments we are editing.  The function can be passed two attachment handles.
<EM>Delattach</EM> is an existing attachment to delete.
<EM>Addattach</EM> is a newly created attachment
(see <A HREF=#make_attach_cmd>make_attach</A>) to add.
Either can be given as an empty string to indicate that nothing should be
deleted or added.
The added attachment takes the place of the deleted one, or, if none is
deleted, it is added to the end of the list of attachments.
The command pushes an error code of 0 on success, 2 if the item/response
does not exist, 3 if the current user does not have permission to edit
attachments for that response, and 4 if the attachment to be deleted did not
exist.

<P>
<DT><A NAME="new_conf_cmd">new_conf</A>
<DD>
<EM>confname parentdir listit</EM> <TT>new_conf</TT> <EM>error</EM>
<P>
Create a new conference.  Only conference administrators can use this
command.
<EM>Confname</EM> is the internal name of the conference, which must be
all lower case, and which must be different from any existing conference.
The conference will be stored in the directory whose full path name is given
by <EM>parentdir</EM>.  If <EM>parentdir</EM> is given as <TT>()</TT>, then
it defaults to <A HREF=#bbsdir_var>bbsdir</A>.
If <EM>listit</EM> is true, an conflist entry will be made in the same name, so
that it can be joined by that name.  This does not add the conference to
the menu of conferences.
On error, an error message string is pushed.  On success, a null string is
pushed.

<P>
<DT><A NAME="del_conf_cmd">del_conf</A>
<DD>
<EM>confname</EM> <TT>del_conf</TT> -
<P>
Delete a conference, referenced by its internal name.
This deletes the conference directory and all of its conflist entries.
It also deletes all user's participation files for the conference
(except if unix accounts are being used).
It does not delete any conference menu entries.

</DL>

<H3><A NAME="emailop">E-mail Operators</A></H3>

This section describes commands for sending email messages from Backtalk.
To send a message, you first create a message by building it up with a
sequence of commands starting with <A HREF="#email_new_cmd">email_new</A>.
There should be at least one call each to
<A HREF="#email_body_cmd">email_body</A> and
<A HREF="#email_recip_cmd">email_recip</A>.
The <A HREF="#email_send_cmd">email_send</A> command can then be called to
send the email.  It is possible to change the recipients after sending and
resend.  When you are done, call
<A HREF="#email_close_cmd">email_close</A>.

<DL>

<P>
<DT><A NAME="email_new_cmd">email_new</A>
<DD>
<EM>subject replyaddr replyname</EM> <TT>email_new</TT> <EM>rc</EM>
<P>
Start an new email message.  The subject, the "Reply To" address and
the name that goes with it are given as arguments.  It pushs a return
code of 0 on success.  If the subject is invalid, it pushs 1, if the
reply address is invalid it pushs 2, and if the reply name is invalid,
it pushs 3.

<P>
<DT><A NAME="email_body_cmd">email_body</A>
<DD>
<EM>alt desc type text</EM> <TT>email_body</TT> <EM>rc</EM>
<P>
Attach a body to the current email message.  There can be a primary and
an alternate text (typically the primary would be an HTML message and the
alternate would be plain text).  Either primary or alternate may have an
arbitrary number of attachments bodies.  The <EM>alt</EM> argument is 0
if this is to be portion of the primary text, and 1 if it is to be a portion
of the alternate text.  The first body posted for each becomes the main
text, while later bodies are attachments.  The <EM>desc</EM> argument is
a string that gives description of the body.  It can be (and often is)
an empty string.  The <EM>type</EM> is the MIME type of the body and
<EM>text</EM> is the actual content.  It
can be any MIME type, but <TT>(text/plain)</TT> and <TT>(text/html)</TT>
are the most common.  If a message is constructed with a primary body of
type <TT>(text/html)</TT> and no alternate body, then an alternate body
of type <TT>(text/plain)</TT> is automatically generated.
<P>
On success, we push a 0.  On failure we push 1, if the description was
invalid, and 2 if the MIME type was invalid.

<P>
<DT><A NAME="email_recip_cmd">email_recip</A>
<DD>
<EM>type addr name</EM> <TT>email_recip</TT> <EM>rc</EM>
<P> 
Add a recipient to the current E-mail message.
The <EM>addr</EM> argument gives the E-mail address.  The <EM>name</EM>
gives the full name of the recipient (this can be an empty string).
The <EM>type</EM> can be any of the following:
<BLOCKQUOTE>
<TABLE BORDER=0>
<TR><TD><TT>(T)</TT></TD> 
    <TD>Set the "To" list to contain only this address.</TD></TR>
<TR><TD><TT>(T+)</TT></TD>
    <TD>Append this address to the "To" list</TD></TR>
<TR><TD><TT>(C)</TT></TD> 
    <TD>Set the "Cc" list to contain only this address.</TD></TR>
<TR><TD><TT>(C+)</TT></TD>
    <TD>Append this address to the "Cc" list</TD></TR>
<TR><TD><TT>(B)</TT></TD>
    <TD>Set the "Bcc" list to contain only this address.</TD></TR>
<TR><TD><TT>(B+)</TT></TD>
    <TD>Append this address to the "Bcc" list</TD></TR>
</TABLE>
</BLOCKQUOTE>
The return code is 0 on success.  On failure it is 1 if the address was not
valid and 2 if the full name was not valid.

<P>
<DT><A NAME="email_send_cmd">email_send</A>
<DD>
<EM>-</EM> <TT>email_recip</TT> <EM>-</EM>
<P>
Send the current email message.  It is an error if the message does not
exit or if it doesn't have at least one body and at least one recipient.
You can call this more than once on the same message, perhaps calling
<A HREF="#email_recip_cmd">email_recip</A> first to change the recipient
on the next message.

<P>
<DT><A NAME="email_close_cmd">email_close</A>
<DD>
<EM>-</EM> <TT>email_close</TT> <EM>-</EM>
<P>
Discard the current message, freeing up all memory that is uses.

</DL>

<H2><A NAME="variables">Built-in Variables</A></H2>

Backtalk has a large number of built-in variables that perform predefined
roles, or whose values are set by the Backtalk interpreter.
<P>
Some variables are protected, so the user cannot change their values except
in the config.bt script.
Furthermore, some protected variables are tagged as constants, which means
that they not only cannot be changed outside of the config.bt script, but
they will have the same value everytime Backtalk is run.  The Backtalk
compiler will hard-code references to all built-in variables so that the
system dictionary never has to be searched at run time, and it will hard-code
values of all constants.
<PP>
<H3><A NAME="confvar">Conferencing Variables</A></H3>
There are a number of built-in variables that are used to pass information
in and out of the conferencing commands.
<DL>

<P>
<DT><A NAME="alias_var">alias</A>
<DD>(string)
The full name to be attached to your posts in the currently open conference.
This is loaded from your participation file by the
<A HREF="#open_conf_cmd">open_conf</A> command
and is an input to the <A HREF="#post_resp_cmd">post_resp</A>,
<A HREF="#post_item_cmd">post_item</A> and
<A HREF="#post_edit_resp">edit_resp</A> commands.

<P>
<DT><A NAME="allowgraphics_var">allowgraphics</A>
<DD>(boolean)
If set true, the HTML <TT>&lt;IMG&gt;</TT> is allowed in HTML responses.
This allows images to be inserted in-line in items and responses.  If
set false, all <TT>&lt;IMG&gt;</TT> tags are automatically stripped out
by the <A HREF="#post_resp_cmd">post_resp</A>,
<A HREF="#post_item_cmd">post_item</A>, and
<A HREF="#cleanhtml_cmd">cleanhtml</A> commands.

<P>
<DT><A NAME="anonymity_var">anonymity</A>
<DD>(integer)
This controls the visibility users names to other names.  There are two
kinds of names involved.
First, it controls the visibility of the aliases attached to each
posting and response, second it controls the visibility of the "real" full name
field in the user database.  Possible values are:
<BLOCKQUOTE>
<TABLE BORDER=1>
<TH>anonymity</TH>
<TH>aliases can be seen by:</TH>
<TH>real full names can be seen by:</TH>
<TR><TD>0</TD><TD>everyone.</TD><TD>everyone.</TD></TR>
<TR><TD>1</TD><TD>authenticated users only.</TD>
<TD>authenticated users only.</TD></TR>
<TR><TD>2</TD><TD>fairwitnesses of the current conference only.</TD>
<TD>admins and members of the gradm group only.</TD></TR>
<TR><TD>3</TD><TD>admins only.</TD><TD>admins only.</TD></TR>
</TABLE>
</BLOCKQUOTE>
The <A HREF="#mayseealias_var">mayseealias</A>
and <A HREF="#mayseefname_var">mayseefname</A> variables will automatically be
set to indicate the access available to the current user.

<P>
<DT><A NAME="amadm_var">amadm</A>
<DD>(boolean)
True if you are a conference administrator.
This implies <A HREF="#amfw_var">amfw</A> in all conferences,
and gives you the power to use the <A HREF="#selectuser_cmd">selectuser</A>
command.

<P>
<DT><A NAME="amfw_var">amfw</A>
<DD>(boolean)
True if you are the fairwitness in the current conference.
This is set by the <A HREF="#open_conf_cmd">open_conf</A> command.

<P>
<DT><A NAME="attachments_var">attachments</A>
<DD>(string)
This is a comma-separated list of the attachment handles associated with
a posting.  Attachment handles are created by
<A HREF="#make_attach_cmd">make_attach</A>.
Comma separated lists of them be placed in this variable to attach them
to postings using the
<A HREF="#post_item_cmd">post_item</A> and
<A HREF="#post_resp_cmd">post_resp</A> commands.
When those postings are read with the
<A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A> commands,
a comma separated list of attachments appears in this variable.

<P>
<DT><A NAME="author_edit_var">author_edit</A>
<DD>(boolean)
If this is true, users may edit responses they entered.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="author_erase_var">author_erase</A>
<DD>(boolean)
If this is true, users may erase responses they entered.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="author_hide_var">author_hide</A>
<DD>(boolean)
If this is true, users may hide or unhide responses they entered.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="authorid_var">authorid</A>
<DD>(string)
This is the login id (or equivalent) of the author of an item or response.
It is set by <A HREF="#read_item_cmd">read_item</A>
and <A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="author_freeze_var">author_freeze</A>
<DD>(boolean)
If this is true, users may freeze or thaw items they originally entered.
Fairwitnesses can always do this.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="author_kill_var">author_kill</A>
<DD>(boolean)
If this is true, item authors may kill their own items, at least until
someone responds to it.
Fairwitnesses can always kill items in their conferences.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="authorname_var">authorname</A>
<DD>(string)
This is the full name of the author of an item or response.
It is set by <A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="author_retire_var">author_retire</A>
<DD>(boolean)
If this is true, users may retire or unretire items they originally entered.
Fairwitnesses may always retire or unretire items.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="author_retitle_var">author_retitle</A>
<DD>(boolean)
If this is true, users may retitle items they originally entered.
Fairwitnesses can do this if <A HREF="#fw_retitle_var">fw_retitle</A> is
set, and conference administrators can always do so.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="authoruid_var">authoruid</A>
<DD>(integer)
This is the uid number (or equivalent) of the author of an item or response.
It is set by <A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="bbsdir_var">bbsdir</A>
<DD>(string)
Full pathname of the bbs directory.
It is defaulted to a sensible value.
This is only used to expand any percent-signs in the conflist, so it is
used by <A HREF="#open_conf_cmd">open_conf</A>.

<P>
<DT><A NAME="blindfold_var">blindfold</A>
<DD>(integer)
If non-zero, then <A HREF="#read_text_cmd">read_text</A> won't mark
responses seen when it reads them.

<P>
<DT><A NAME="conf_var">conf</A>
<DD>(string)
The name of the current conference.
This can be set directly by the user, or by the
<A HREF="#next_conf_cmd">next_conf</A> operator.
This is an input to the <A HREF="#open_conf_cmd">open_conf</A> operator.

<P>
<DT><A NAME="confdir_var">confdir</A>
<DD>(string)
The full path name of the directory where the current conference is stored.
This is set by the <A HREF="#open_conf_cmd">open_conf</A> command.
You can also find the directory path of a conference by calling
<A HREF="#conf_dir_cmd">conf_dir</A>, but that does not change this
variable.

<P>
<DT><A NAME="conflist_var">conflist</A>
<DD>(string)
Full pathname of the conflist directory of conference.
This has a default value set at compile time, but can be overridden from
the config.bt file.
This is used by the <A HREF="#open_conf_cmd">open_conf</A> operator.

<P>
<DT><A NAME="conftitle_var">conftitle</A>
<DD>(string)
Title of the conference.  This is usually a few words that fit into
"The _______ Conference".
This is output by the <A HREF="#open_conf_cmd">open_conf</A> operator
which gets it from the conference config file if it is there, or
uses the <A HREF="#conf_var">conf</A> variable if it isn't.

<P>
<DT><A NAME="cpass_var">cpass</A>
<DD>(string)
This is the conference password supplied by the user.
It is an input to <A HREF="#open_conf_cmd">open_conf</A>,
but is only used if the conference is password protected.

<P>
<DT><A NAME="csel_var">csel</A>
<DD>(string)
This used to be an input to the <A HREF="#next_conf_cmd">next_conf</A>
function but isn't any more.  It should probably be deleted, but some
scripts assume that it is always defined, so we'll leave it for now.

<P>
<DT><A NAME="date_var">date</A>
<DD>(time)
This is the entry date of an item or response.
It is set by <A HREF="#read_item_cmd">read_item</A>
and <A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="dbtype_var">dbtype</A>
<DD>(string)
This may be set to (yapp) or (picospan)
to indicate that the conferences are stored in a format consistent with
Yapp or Picospan.  It is usually set in the config.bt file.

<P>
<DT><A NAME="editdate_var">editdate</A>
<DD>(time)
This is the date an item or response response was last edited.
If it has not been edited, it is zero.
It is set by <A HREF="#read_item_cmd">read_item</A>
and <A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="editfrozen_var">editfrozen</A>
<DD>(boolean)
If this is enabled in the config.bt file, then it is legal to hide, show,
erase, retitle, or edit responses in frozen items.  Traditionally this is
not possible in Picospan, so this defaults off.

<P>
<DT><A NAME="erased_var">erased</A>
<DD>(boolean)
This is true if the current item or response text is erased.
It is set by <A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A> and it is an input to
<A HREF="#post_item_cmd">post_item</A> and
<A HREF="#post_resp_cmd">post_resp</A>.

<P>
<DT><A NAME="expect_resp_var">expect_resp</A>
<DD>(integer)
If this is set to a positive, non-zero value before running the
<A HREF="#post_resp_cmd">post_resp</A> command, then the value is taken
as the expected response number.  If the post_resp command determines that,
if posted, the new response would have a larger response number, it will
abort and return a -1 error code.
This allows the posting script to warn the user than another response has
slipped in, so the user can be given an opportunity to edit the item before
posting it.

<P>
<DT><A NAME="favicon_var">favicon</A>
<DD>(string)
Certain browsers (IE and Konquerer) like requesting something called
'favicon.ico' from every site they hit.  Normally Backtalk ignores
any requests for templates called 'favicon.ico' but if you'd actually
like to set an icon for your Backtalk site, generate an appropriate 16x16
.ico image file, and set the favicon variable to the full pathname of
your file in the config.bt file.  It isn't useful to set this in any
other script, since it will be too late by the time any other script is
run.

<P>
<DT><A NAME="fishbowl_var">fishbowl</A>
<DD>(boolean)
The current conference is a fishbowl conference, and only users in the
ulist (if <A HREF="#userlist_var">userlist</A> is true),
glist (if <A HREF="#grouplist_var">grouplist</A> is true)
or who can give the password (if
<A HREF="#secret_var">secret</A> is true) will be able to post, though
all may join with read-only access.
This is set by the <A HREF="#open_conf_cmd">open_conf</A> function.

<P>
<DT><A NAME="forgotten_var">forgotten</A>
<DD>(boolean)
This is true if the current item has been forgotten by the user.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="frozen_var">frozen</A>
<DD>(boolean)
This is true if the current item is frozen.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="fw_edit_var">fw_edit</A>
<DD>(boolean)
If this is true, fairwitnesses may edit individual responses to items in
their conferences.  They cannot edit responses in linked items.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="fw_erase_var">fw_erase</A>
<DD>(boolean)
If this is true, fairwitnesses may erase individual responses to items in
their conferences.  They cannot erase responses in linked items.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="fw_hide_var">fw_hide</A>
<DD>(boolean)
If this is true, fairwitnesses may hide or show individual responses to
items in their conferences.
They cannot erase responses in linked items.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="fwlist_var">fwlist</A>
<DD>(string)
A comma-separated list of the fairwitnesses for the current conference.
This is set by the <A HREF="#open_conf_cmd">open_conf</A> command.

<P>
<DT><A NAME="fw_retitle_var">fw_retitle</A>
<DD>(boolean)
If this is true, fairwitnesses may change the titles of items in their
conferences.
Conference administrators may always retitle items.
This is a system constant, set in <TT>config.bt</TT>.

<P>
<DT><A NAME="gid_var">gid</A>
<DD>(integer)
This is the current user's group id number.
It is set by Backtalk before the execution of the script.
It may be used to decide which files are readable to a user
on some installations.
If there is no identifiable user or group ids are not used,
it is set to -1.

<P>
<DT><A NAME="grouplist_var">grouplist</A>
<DD>(boolean)
The current conference has a group list restricting who may join.
This is set by <A HREF="#open_conf_cmd">open_conf</A>.

<P>
<DT><A NAME="hidden_var">hidden</A>
<DD>(boolean)
This is  true if the current item or response text is hidden.
It is set by <A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A> and it is an input to
<A HREF="#post_item_cmd">post_item</A> and
<A HREF="#post_resp_cmd">post_resp</A>.

<P>
<DT><A NAME="homedir_var">homedir</A>
<DD>(string)
The user's home directory.  This is initialized before executing the
script.  It is set to null if no there is no validated user.
It is used to find participation files.

<P>
<DT><A NAME="id_var">id</A>
<DD>(string) The login id (or equivalent) of the current user.
This is automatically set by Backtalk before the execution of any script.
It is an input the to <A HREF="#post_item_cmd">post_item</A>
and <A HREF="#post_resp_cmd">post_resp</A> commands.
If there is no identifiable user, <TT>id</TT> is set to a null string.

<P>
<DT><A NAME="ifav_var">ifav</A>
<DD>(integer)
Controls whether items automatically become favorites when originally posted.
The <A HREF="#post_item_cmd">post_item</A> command simply sets the poster's
<A HREF="#fav_note">fav"</A> field for the item to the value of this variable.

<P>
<DT><A NAME="item_var">item</A>
<DD>(integer)
Current item number.  This can be set by <A HREF="#this_item_cmd">this_item</A>
or by the programmer and is an input to
<A HREF="#read_item_cmd">read_item</A>,
<A HREF="#read_resp_cmd">read_resp</A>,
<A HREF="#post_resp_cmd">post_resp</A>,
<A HREF="#kill_item_cmd">kill_item</A>,
<A HREF="#hide_resp_cmd">hide_resp</A>,
<A HREF="#edit_resp_cmd">edit_resp</A>,
<A HREF="#erase_resp_cmd">erase_resp</A>,
<A HREF="#mark_unseen_cmd">mark_unseen</A>,
and probably a lot of others that slipped my mind.

<P>
<DT><A NAME="lastdate_var">lastdate</A>
<DD>(time)
This is the date upon which the latest response was entered into the current
item.  This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="linkdate_var">linkdate</A>
<DD>(time)
This is the date upon which the current item was linked into the current
conference.  For unlinked items, this is the creation date.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="linked_var">linked</A>
<DD>(boolean)
This is true if the current item is a linked item.  This is set by
<A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="maxitem_var">maxitem</A>
<DD>(integer)
The number of the last item in the current conference.  This is set by the
<A HREF="#open_conf_cmd">open_conf</A> command.

<P>
<DT><A NAME="maxread_var">maxread</A>
<DD>(integer)
The number of the last response which the user has read in the current item.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="maxresp_var">maxresp</A>
<DD>(integer)
The number of the last response in the current item.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="mayedit_var">mayedit</A>
<DD>(integer)
A flag indicating whether the user has the power to edit the text of the
current response.
It is 0 if he can not, 1 if he can do so because he is the author,
and 2 if he can do so because he is the fairwitness or conference
administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>
and <A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="mayerase_var">mayerase</A>
<DD>(integer)
A flag indicating whether the user has the power to erase the text of the
current response.
It is 0 if he can not, 1 if he can do so because he is the author,
and 2 if he can do so because he is the fairwitness or conference
administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>
and <A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="mayfreeze_var">mayfreeze</A>
<DD>(integer)
A flag indicating whether the user has the power to freeze or thaw the
current item.
It is 0 if he can not, 1 if he can do so because he is the author,
and 2 if he can do so because he is the fairwitness or conference
administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>

<P>
<DT><A NAME="mayhide_var">mayhide</A>
<DD>(integer)
A flag indicating whether the user has the power to hide or show
the text of the current response.
It is 0 if he can not, 1 if he can do so because he is the author,
and 2 if he can do so because he is the fairwitness or conference
administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>
and <A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="maykill_var">maykill</A>
<DD>(integer)
A flag indicating whether the user has the power to kill the current item.
It is 0 if he cannot kill it, 1 if he can kill it because he is the author,
and 2 if he can kill it because he is the fairwitness or conference
administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>

<P>
<DT><A NAME="maypost_var">maypost</A>
<DD>(boolean)
A flag indicating if you may create new items in the current conference.
You have write access if you are not anonymous,
and if the conference is writable for you.
This is set by the <A HREF="#open_conf_cmd">open_conf</A>.
If it is false, then <A HREF="#post_item_cmd">post_item</A>
will not work in this conference.

<P>
<DT><A NAME="mayread_var">mayread</A>
<DD>(boolean)
A flag indicating if you have read access to this conference.
This is set by the <A HREF="#open_conf_cmd">open_conf</A> command.
If it is false,
none of the commands to read items and responses from a conference will work.
Normally interfaces will not allow users to join a conference if
mayread is false.

<P>
<DT><A NAME="mayresp_var">mayresp</A>
<DD>(boolean)
A flag indicating if you have the ability to respond to the current item.
You have write access if you are not anonymous,
if the conference is writable for you,
and if the item is not frozen.
This is set by the <A HREF="#open_conf_cmd">open_conf</A>.
At that point it is set to the default value for all items in the conference.
This <A HREF="#this_item_cmd">this_item</A> and
<A HREF="#read_item_cmd">read_item</A> commands set it to the value for the
current it (which may be different than the value for the conference if the
item is frozen).
If it is false, then <A HREF="#post_resp_cmd">post_resp</A>
will not work in this conference.

<P>
<DT><A NAME="mayretire_var">mayretire</A>
<DD>(integer)
A flag indicating whether the user has the power to retire or unretire the
current item.
It is 0 if he can not, 1 if he can do so because he is the author,
and 2 if he can do so because he is the fairwitness or conference administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>.

<P>
<DT><A NAME="mayretitle_var">mayretitle</A>
<DD>(integer)
A flag indicating whether the user has the power to retitle the
It is 0 if he can not, 1 if he can do so because he is the author,
and 2 if he can do so because he is the fairwitness or conference administrator.
This is set by <A HREF="#read_item_cmd">read_item</A>

<P>
<DT><A NAME="mayseealias_var">mayseealias</A>
<DD>(integer)
A flag indicating whether the user has the power to see the full names attached
to responses.  If false, the <A HREF="#read_item_cmd">read_item</A> command
will always a null string in the <A HREF="#authorname_var">authorname</A>
variable.  It is set by the <A HREF="#open_conf_cmd">open_conf</A> command
based on the <A HREF="#anonymity_var">anonymity</A> configuration variable.

<P>
<DT><A NAME="mayseefname_var">mayseefname</A>
<DD>(integer)
A flag indicating whether the user has the power to see user biographic
information.
If false, the <A HREF="#userinfo">command returns a null string for the name
of other users.
It's setting is  based on the
<A HREF="#anonymity_var">anonymity</A> configuration
variable and the user's authentication status.

<P>
<DT><A NAME="newbie_var">newbie</A>
<DD>(boolean)
A flag set by the <A HREF="#open_conf_cmd">open_conf</A> command
if the user is joining the conference for the first time (in which case
a participation file was created for him).

<P>
<DT><A NAME="noskip_var">noskip</A>
<DD>(boolean)
A flag indicating whether the <A HREF="#next_item_cmd">next_item</A> command
should skip items which have been retired or forgotten.  It defaults to
false.

<P>
<DT><A NAME="parentresp_var">parentresp</A>
<DD>(string)
This is used with Yapp-style response threading, where each response can
be tagged as being a response to some other previous response.
It is the number of the previous response that this item is to be considered
a response to.  It is an input to
<A HREF=#post_resp_cmd>post_resp</A> and
<A HREF=#edit_resp_cmd>edit_resp</A>, and
is returned by <A HREF=#read_resp_cmd>read_resp</A>.
In Picospan-compatible installations, this will always be zero and will be
ignored when posting.

<P>
<DT><A NAME="particip_var">particip</A>
<DD>(string)
This is the name of the current conference's participation file.

<P>
<DT><A NAME="post_log_file_var">post_log_file</A>
<DD>(string)
If defined, this is the full path name of a file where postings will be
logged.  Each time a new item or a response is entered, the user-defined
functions <TT>item_log_format</TT> or <TT>resp_log_format</TT> will be called.
These are expected to push a string, which is the line to be written to the
log file.

<P>
<DT><A NAME="rfav_var">rfav</A>
<DD>(integer)
Controls whether items automatically become favorites when responded to.
If this is zero, nothing is done.  If it is 1, the item becomes a permanent
favorite.  If it is 2 and if the item is not already a favorite, then the
item becomes a temporary favorite.  All this is done by the
<A HREF=#post_resp_cmd>post_resp</A> command.

<P>
<DT><A NAME="readdate_var">readdate</A>
<DD>(time)
This is the date upon which the user last read a response in the current item.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="resp_var">resp</A>
<DD>(integer) This is the current response number.  It is set by
<A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="retired_var">retired</A>
<DD>(boolean)
This is true if the current item is retired.
This is set by <A HREF="#this_item_cmd">this_item</A>.

<P>
<DT><A NAME="rsel_var">rsel</A>
<DD>(string)
This is the current response selector, indicating which responses of the
current item are to be read.  It can be (all), (new), (unseen), (since)
or a numeric selector.
See the section on <A HREF="#selop">selector manipulation</A> for details on
the syntax.

<P>
<DT><A NAME="secret_var">secret</A>
<DD>(integer)
This is non-zero if the current conference has a secret password.
It is one if the password has been given correctly, or two if it has not.
If it has not <A HREF="#mayread_var">mayread</A> will be false.
If the conference has no secret password, then it will always be zero.
This is set by <A HREF="#open_conf_cmd">open_conf</A>.

<P>
<DT><A NAME="showforgotten_var">showforgotten</A>
<DD>(integer)
If this is zero, forgotten and retired items will be skipped by the
<A HREF="#next_item_cmd">next_item</A>
command.
If it is one, forgotten and retired items will not be skipped.
If it is two, unforgotten items will be skipped.

<P>
<DT><A NAME="since_var">since</A>
<DD>(time)
When <A HREF=#rsel_var>rsel</A> is (since), this gives the date after which
responses are to be displayed.

<P>
<DT><A NAME="text_var">text</A>
<DD>(string)
This is the text of a response or item.  It is an input to
<A HREF="#post_item_cmd">post_item</A>,
<A HREF="#post_resp_cmd">post_resp</A> and
<A HREF="#edit_resp_cmd">edit_resp</A>.

<P>
<DT><A NAME="texttype_var">texttype</A>
<DD>(string) This is the type of the current response or item text.
The normal types are "text/plain" and "text/html".
It is an input to <A HREF="#post_resp_cmd">post_resp</A>,
<A HREF="#post_item_cmd">post_item</A> and
<A HREF="#edit_resp_cmd">edit_resp</A>.
It is set by
<A HREF="#read_item_cmd">read_item</A> and
<A HREF="#read_resp_cmd">read_resp</A>.

<P>
<DT><A NAME="title_var">title</A>
<DD>(string)
This is the title of an item.  It is set by
<A HREF="#read_item_cmd">read_item</A>
and is an input to <A HREF="#post_item_cmd">post_item</A>

<P>
<DT><A NAME="uid_var">uid</A>
<DD>(integer)
This is the current user's uid number (or an equivalent unique identifier).
It is set by Backtalk before the execution of the script.
It is an input the to <A HREF="#post_item_cmd">post_item</A>
and <A HREF="#post_resp_cmd">post_resp</A> commands.
If there is no identifiable user, it is set to -1.

<P>
<DT><A NAME="userlist_var">userlist</A>
<DD>(boolean)
The current conference has a user list restricting who may join.
This is set by <A HREF="#open_conf_cmd">open_conf</A>.

<P>
<DT><A NAME="yapp_format_var">yapp_format</A>
<DD>(integer)
This is meant to be set only on systems that share conference files with
web Yapp (not command-line Yapp).  If it is set to 1 or 3, then all postings
from Backtalk are dones as HTML postings.  Plain text postings are converted
a somewhat arcane HTML equivalent that will still look right even when Yapp
appends a <TT>&lt;BR&gt;</TT> tag to each line.
<P>
If it is set to 2 or 3, then when a "plain-text" message is read, then
it is assumed to be a Yapp posting.
We run <A HREF=#clean_html_func>clean_html</A> on it, and terminate each
line with a <TT>&lt;BR&gt;</TT>.

</DL>

<H3><A NAME="miscvar">Miscellaneous Variables</A></H3>

There are several other built-in system variables that
effect the system's behavior, but aren't directly related to conferencing.
<DL>

<P>
<DT><A NAME="allowanon_var">allowanon</A>
<DD>(boolean)
True if Backtalk is configured to allow anonymous reading.  If false, then
the only scripts that can be run by unauthenticated users are those in the
directories listed in the <A HREF="#publicflavors_var">publicflavors</A>
variable.  This is a protected variable, set at compile time.

<P>
<DT><A NAME="auto_recompile_var">auto_recompile</A>
<DD>(integer)
Whenever you run a script, and the binary is missing, or was compiled with
an older version of Backtalk, Backtalk will attempt to recompile it
automatically.
The <TT>auto_recompile</TT> variable controls some additional recompilation
checks.
If <TT>auto_recompile</TT> is set to zero, no additional checks are done.
This is suitable for a very stable production installation, where we don't
want to slow down script execution by making extra tests.
If <TT>auto_recompile</TT> is set to one, a script will be recompiled if its
binary is older than the <TT>config.bt</TT> file.
This is suitable for systems where configuration changes are likely, but the
scripts themselves will not be changed.
Finally,
if <TT>auto_recompile</TT> is set to two, a script will be recompiled if its
binary is older than the <TT>config.bt</TT> file or any of the source files
that were used in compiling it previously.
This is suitable for systems where new scripts are actively being worked on.
<P>
Note that if <TT>auto_recompile</TT> was previously set to zero, changing it's
value in the <TT>config.bt</TT> won't cause anything to recompile, because
the change in <TT>config.bt</TT> won't be noticed.  Just manually recompile
any one script.  This will recompile <TT>config.bt</TT> as a side effect, so
the new value of <TT>auto_recompile</TT> will then be set.

<P>
<DT><A NAME="canattach_var">canattach</A>
<DD>(boolean)
This constant is true if this installation supports attaching files to posts.
This can be changed only by rebuilding Backtalk with attachments enabled.

<P>
<DT><A NAME="canspell_var">canspell</A>
<DD>(boolean)
This constant is true if the <A HREF=#spellcheck_cmd>spellcheck</A> command
works in this installation.  If it's false,
the <A HREF=#spellcheck_cmd>spellcheck</A> will never find any misspelled
words.
It can be changed only by rebuilding Backtalk with spell checker support.

<P>
<DT><A NAME="cgiquery_var">cgiquery</A>
<DD>(string)
The query string passed to backtalk.  It's a sequence of "name=value" pairs
separated by ampersands, with each name and value cgi-quoted.
It's the same as the QUERY_STRING environment variable, except that it is
even defined when the POST method was used.

<P>
<DT><A NAME="copyright_var">copyright</A>
<DD>(string)
This is a string giving the copyright message for Backtalk.

<P>
<DT><A NAME="exec_limit_var">exec_limit</A>
<DD>(integer)
This is similar to <A HREF="#stack_limit_var">stack_limit</A>,
but limits the size of the execution stack instead of the operand stack.
It also defaults to zero, which is to say, "no limit".

<P>
<DT><A NAME="flavor_var">flavor</A>
<DD>(string)
This constant is set to the name of the subdirectory under
<A HREF="#scriptdir_var">scriptdir</A> which contains the script
currently being executed.
The name always has a "<TT>/</TT>" slash character at the end of it.
Normally the different subdirectories under the main
Backtalk directory are for different versions of the interface.
Thus <TT>flavor</TT>
is useful for constructing url's of other scripts in same interface
version without actually imbedding the name into the script, which
would make it harder to link a single script into several different
interfaces.

<P>
<DT><A NAME="http_content_type_var">http_content_type</A>
<DD>(string)
This is the MIME type for the document which will be included in the
HTTP headers that Backtalk automatically generates before your first
output statement.
Its default value, <TT>(text/html)</TT> can be changed to any other MIME type.
To have any effect, this must be done before the first
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A>, or
<A HREF="#dumpstack_cmd">dumpstack</A> command.

<P>
<DT><A NAME="http_expires_var">http_expires</A>
<DD>(time)
This is the expiration time that Backtalk will put in the HTTP headers
that it automatically generates before your first output statement.
The expiration time sets an upper limit on how long the user's browser
may keep a copy of your output in cache.
If it is zero, no expiration time is set (this is the default).
Otherwise, it should be a time type, such as the
one returned by the <A HREF="#time_cmd">time</A> command.
If it is in the past, the browser will not cache this document.
To have any effect, this must be done before the first
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A>, or
<A HREF="#dumpstack_cmd">dumpstack</A> command.
It cannot be combined with the <A HREF="#http_no_cache_var">http_no_cache</A>
command, which always forces an expiration date in the past.

<P>
<DT><A NAME="http_headers_var">http_headers</A>
<DD>(boolean)
This is a boolean that controls whether Backtalk generates HTTP headers
before the first output from your script.
If true (the default), it does so, using the information from the
<A HREF="#http_content_type_var">http_content_type</A>,
<A HREF="#http_expires_var">http_expires</A> and
<A HREF="#http_location_var">http_location</A> variables,
and including all cookies set with the <A HREF="#setcookie_cmd">setcookie</A>
command.
If it is false, no headers are generated.
This is desirable if your script is not running as a CGI,
or if you want to generate your own HTTP headers.
To have any effect, this must be set before the first
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A>, or
<A HREF="#dumpstack_cmd">dumpstack</A> command.

<P>
<DT><A NAME="http_location_var">http_location</A>
<DD>(string)
If this is not an empty string (the default), then it gives a URL
to redirect to.
This will be included in the HTTP headers that Backtalk automatically generates
with the first output statement.
If this header is given, then
instead of showing the rest of the output you generate, the browser should
fetch the page whose URL is given.
To have any effect, this must be set before the first
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A>, or
<A HREF="#dumpstack_cmd">dumpstack</A> command.
<P>
To be completely correct, the value stored in <TT>http_location</TT>
should be either a full URL, starting with "http:", or a relative URL starting
with "/".  If a full URL is given, then this is an external location redirect,
and the browser will be fetching the new page.  If a relative URL starting
with a "/" is given, then this is an internal redirect, which will be handled
by the http server rather than the browser.  The HTTP protocols do not
define the behavior for relative URLs starting with anything other than
a slash (though in practice, most HTTP servers handle these as external
redirects).  The difference is important.  Internal redirects result in
the final page being displayed more quickly.  If the user does a "Reload"
after an external redirect, then he re-executes only the second query, but if
he does a "Reload" after an internal redirect then he re-executes both.

<P>
<DT><A NAME="http_no_cache_var">http_no_cache</A>
<DD>(boolean)
This is a boolean that controls whether Backtalk generates HTTP headers
intended to prevent the page from being cached in the browser.  If true
these will be included in the HTTP headers that Backtalk automatically generates
with the first output statement.
It defaults false, allowing caching.
To have any effect, this must be set before the first
<A HREF="#print_cmd">print</A>, <A HREF="#pr_cmd">pr</A>, or
<A HREF="#dumpstack_cmd">dumpstack</A> command.

<P>
<DT><A NAME="linktonew_var">linktonew</A>
<DD>(boolean)
If true, <A HREF="#expand_cmd">expand</A> and
<A HREF="#cleanhtml_cmd">cleanhtml</A>
will make all outside like open in new windows.
If false, the open in the top level of the current window.
Defaults to true.

<P>
<DT><A NAME="loginlen_var">loginlen</A>
<DD>(integer)
The maximum number of characters that may appear in a login ID.

<P>
<DT><A NAME="loglevel_var">loglevel</A>
<DD>(integer)
This determines the amount of logging the system does.
Well, actually there are only two levels right now --
if <TT>loglevel</TT> is set to zero, no logging is done,
if <TT>loglevel</TT> is set to anything higher,
short two-line log entries are written for each transaction.

<P>
<DT><A NAME="newuseropen_var">newuseropen</A>
<DD>(integer)
This system constant tells whether unauthenticated users can create user
accounts.  If it is 0, only users in the 'cfadm' and 'gradm' groups can
create user accounts.  If it is 1, anyone, even unauthenticated users, can
create new user accounts, but those accounts will be created in an
unvalidated state, so they can't be used until an administrator validates
them.  If it is 2, then all users can create accounts, and the accounts will
be instantly ready to use.

<P>
<DT><A NAME="nopwedit_var">nopwedit</A>
<DD>(integer)
This constant is set to be true in installations where the
<A HREF="#changename_cmd">changename</A>,
<A HREF="#changepass_cmd">changepass</A>,
<A HREF="#changegroup_cmd">changegroup</A>,
<A HREF="#removeuser_cmd">removeuser</A> and
<A HREF="#validate_cmd">validate</A> do not work because
the system is set up to use the Unix passwd file as the user database.
You could change the value of this constant with a defconstant command,
but doing so wouldn't change the behavior of those functions.

<P>
<DT><A NAME="publicflavors_var">publicflavors</A>
<DD>(string)
A string containing a comma separated list of all directories which may
be accessed by unauthenticated users even when
<A HREF="#allowanon_var">allowanon</A> is false.
By default, this is just <TT>(public)</TT>, to allow <TT>public/welcome</TT>
and similar scripts to be run.
This is a protected variable, set at compile time.

<P>
<DT><A NAME="progname_var">progname</A>
<DD>(string)
The name Backtalk was invoked under.
This is only the final element of the full path name.
If you have multiple versions of
Backtalk installed, this lets you be sure to direct future queries to the
same version.
The environment variable <TT>SCRIPT_NAME</TT> gives the full path from the
URL.

<P>
<DT><A NAME="saverep_var">saverep</A>
<DD>(boolean)
If this constant is true, then upon each execution, Backtalk will save a
copy of all its inputs (that is, environment variables and POST query input)
to a file.  This is useful for debugging.
Running 'backtalk -r' from the command line (or under the debugger),
will then precisely re-execute the last saved query.  
It defaults false.
<P>
<STRONG>This should not be left turned on in a production
installation.</STRONG>  The saved queries may include user passwords (when
a password is changed through Backtalk), conference passwords (whenever used),
messages posted to restricted conferences, etc.  Leaving this laying about in
a file is a security risk.

<P>
<DT><A NAME="scriptdir_var">scriptdir</A>
<DD>(boolean)
The full path of the directory where Backtalk scripts are kept.
Backtalk will change directories to the 
compiled-in value of this variable before attempting to run the
<TT>config.bt</TT> script, which should be in that directory.
The <TT>config.bt</TT> script can change the value of this, in which case
Backtalk will change to the new directory before trying to execute the
user script, which should live someplace under that directory.
Thus all path names given to <A HREF="#include">include</A>,
<A HREF="#stopped">stopped</A>, or <A HREF="#chain">chain</A> commands
are relative path names from this directory.

<P>
<DT><A NAME="scriptname_var">scriptname</A>
<DD>(string)
This constant is set to the name of the top-level script being executed.
You can construct the full path name of that script by doing
<PRE>
  `scriptdir(/)flavor scriptname'
</PRE>
If a file was not directly executed, but was pulled in by an
<A HREF=#include_cmd>include</A>, 
<A HREF=#chain_cmd>chain</A> or
<A HREF=#stopped_cmd>stopped</A> command, then the scriptname is still the
name of the parent script.  If, on the other hand, it was pulled in by
a <A HREF=#call_cmd>call</A> or a <A HREF=#jump_cmd>jump</A> command, then
it will be the name of the child script.  This is weird, but consistant
with the general behavior of constants in backtalk.

<P>
<DT><A NAME="secure_var">secure</A>
<DD>(boolean)
If this constant is true, then Backtalk will only trust authentication
information passed to it by the httpd server if Backtalk is running as the
user httpd runs cgi programs as.  It is sometimes useful to turn this off
for debugging purposes.
It defaults true.
<P>
<STRONG>This should not be turned turned off in a production
installation.</STRONG>
It may enable people with unix accounts on your server to mascarade as
arbitrary Backtalk users.

<P>
<DT><A NAME="sessions_var">sessions</A>
<DD>(boolean)
Was this Backtalk installation built to use on-page login forms, cookies
and sessions to track users?  If false, the system is set up to use basic
authentication.  This constant can only be changed by recompiling backtalk.

<P>
<DT><A NAME="spell_lang_var">spell_lang</A>
<DD>(string)
This selects the dictionary to use for spell checking.  If Backtalk was
configured to use international ispell, then it is the name of the dictionary,
just as would be given with the "-d" option.  If this is defined as
<TT>()</TT>, then the default language will be used.
Used by <A HREF="#spellcheck_cmd">spellcheck</A>.

<P>
<DT><A NAME="spell_ignore_var">spell_ignore</A>
<DD>(string)
This is a comma separated list of additional words to consider
correctly spelled.  Used by <A HREF="#spellcheck_cmd">spellcheck</A>.

<P>
<DT><A NAME="stack_limit_var">stack_limit</A>
<DD>(integer)
Normally, the size of the operand stack may grow until the system runs out
of memory and crashes ignominiously with a core dump
(I guess we should start checking all mallocs).
But if <TT>stack_limit</TT>
is set to a positive integer value, the system will die cleanly when the
stack size exceeds that value.
By default, it is set to zero, which means there is no limit.

<P>
<DT><A NAME="timezone_var">timezone</A>
<DD>(string)
If this string is set to a null string, the <A HREF=#ctime_cmd>ctime</A>
command reports times and <A HREF=#dtime_cmd>dtime</A> interprets times using
the host machine's default time zone.
(This is the default.)
However, if it is set to a standard unix timezone string, such as the ones
used in the <TT>TZ</TT> environment variable, like "<TT>US/Eastern</TT>"
or "<TT>EST5EDT</TT>", then that time zone will be used instead.

<P>
<DT><A NAME="urlarg_var">urlarg</A>
<DD>(string)
If there is a colon (:) in the extra path info part of a Backtalk URL,
Backtalk interprets the part before the colon as the path name of the
script file to execute, and puts the part after the colon into the
<TT>urlarg</TT> variable.  This is meant as an alternative to the standard
cgi argument passing for applications where a good-looking url is
desirable, but you can do both.

<P>
<DT><A NAME="version_var">version</A>
<DD>(string)
This is a string giving the name and version number of the Backtalk
interpretor.

</DL>
<H2><A NAME="regular">Regular-Expression Syntax</A></H2>

Backtalk's regular expressions mostly comply with POSIX 1003.2.
They are normally entered in double angle brackets, with optional flag
characters after the closing bracket, that is:
"<TT>&lt;&lt;</TT><EM>expression</EM><TT>&gt;&gt;</TT><EM>flags</EM>.
<P>
The rules for regular expressions are as follows:
<OL>
<LI> It consists of one or more <EM>branches</EM> separated by vertical
     bars ("<TT>|</TT>").  It matches anything that matches one of the
     branches.
<LI> A branch is a concatination of one or more <EM>pieces</EM>.  It
     matches a match for the first, followed by a match for the second, etc.
<LI> A piece is an <EM>atom</EM> possibly followed by a star ("<TT>*</TT>"),
     a plus ("<TT>+</TT>"),
     a question mark ("<TT>?</TT>"),
     or a <EM>bound</EM>.
     <UL>
     <LI> An atom followed by a star ("<TT>*</TT>") matches 0 or more
          consecutive matches of the atom.
     <LI> An atom followed by a plus ("<TT>+</TT>") matches 1 or more
          consecutive matches of the atom.
     <LI> An atom followed by a question mark ("<TT>?</TT>") matches 0 or 1
          consecutive matches of the atom.
     <LI> A bound may consist of a decimal integer, <EM>i</EM>,
          between 0 and 255
     	  in curly braces ("<TT>{</TT>" and "<TT>}</TT>").
	  An atom followed by this type of bound matches a sequence of
	  exactly <EM>i</EM> matches of the atom.
     <LI> A bound may consist of a decimal integer, <EM>i</EM>,
          between 0 and 255
          followed by a comma and enclosed in
     	  curly braces.
	  An atom followed by this type of bound matches a sequence of
	  <EM>i</EM> or more matches of the atom.
     <LI> A bound may consist of two decimal integers,
     	  <EM>i</EM> and <EM>j</EM>, between 0 and 255
          separated by a comma and enclosed in curly braces.
	  The first may not exceed the second.
	  An atom followed by this type of bound matches a sequence of
	  between <EM>i</EM> and <EM>j</EM> matches (inclusive) of the atom.
     </UL>
<LI> An atom is either
     <UL>
     <LI> a regular expression enclosed in parentheses
     	  ("<TT>(</TT>" and "<TT>)</TT>") which matches the regular expression.
     <LI> empty parenthesis like
     	  "<TT>()</TT>", which matches the null string.
     <LI> a caret ("<TT>^</TT>") which matches the null string at the begining
          of the line.
     <LI> a dollar sign ("<TT>$</TT>") which matches the null string at the end
          of the line.
     <LI> a backslash ("<TT>\</TT>") followed by one of the following
          characters, which matches as described:<BR>
	  <TABLE BORDER=0>
	  <TR><TD ROWSPAN=8>&nbsp;&nbsp;&nbsp;&nbsp;</TD>
	      <TD>\a&nbsp;&nbsp;&nbsp;&nbsp;</TD>
	  		 <TD>a control-G bell character</TD></TR>
	  <TR><TD>\b</TD><TD>a control-H backspace</TD></TR>
	  <TR><TD>\f</TD><TD>a control-L formfeed character</TD></TR>
	  <TR><TD>\n</TD><TD>a control-J newline character</TD></TR>
	  <TR><TD>\r</TD><TD>a control-R carriage return character</TD></TR>
	  <TR><TD>\t</TD><TD>a control-I tab character</TD></TR>
	  <TR><TD>\v</TD><TD>a control-K vertical tab character</TD></TR>
	  <TR><TD>\\</TD><TD>a backslash</TD></TR>
	  </TABLE>
     <LI> a backslash ("<TT>\</TT>") followed by any other character, 
     	  which matches that character.
     <LI> a bracket expression, as described below.
     </UL>
<LI> a bracket expression is a list of characters enclosed in
     square brackets ("<TT>[</TT>" and "<TT>]</TT>") which normally
     matches any single character from the list.
     If the list begins with a caret ("<TT>^</TT>") it matches any
     single character not in the rest of the list.
     <P>
     If two characters in the list are separated by a dash ("<TT>-</TT>")
     this is shorthand for the full range of characters between those
     two (inclusive) in ASCII.
     <P>
     A backslash followed by one of the character in the table list above
     are treated as the corresponding characters.  Otherwise backslashes are
     ignored inside brackets.  Backslashs do not escape
     characters like "<TT>[</TT>",  "<TT>[</TT>" and "<TT>-</TT>" - they
     still have their special meanings even if preceded by a backslash.
     To include a bracket inside brackets, make it the first element
     (after the caret if there is one).  To include a dash inside
     brackets, make it the first or last element.
     <P>
     If "<TT>[.</TT>" and "<TT>.]</TT>" appear inside a bracket expression,
     the the enclosing sequence is treated as a single letter.  Thus
     "<TT>[ [.&amp;nbsp;.]\t]*</TT>" would match any sequence of spaces,
     tabs and "<TT>&amp;nbsp;</TT>" and sequences.
     <P>
     If "<TT>[:</TT>" and "<TT>:]</TT>" appear inside a bracket expression,
     they enclose the name of a character class.  Character classes are:
	  <TABLE BORDER=0>
	  <TR><TD ROWSPAN=12>&nbsp;&nbsp;&nbsp;&nbsp;</TD>
	      <TD>alnum&nbsp;&nbsp;&nbsp;&nbsp;</TD>
	  		 <TD>letters and numbers</TD></TR>
	  <TR><TD>alpha</TD><TD>letters</TD></TR>
	  <TR><TD>blank</TD><TD>space or tab</TD></TR>
	  <TR><TD>cntrl</TD><TD>control characters</TD></TR>
	  <TR><TD>digit</TD><TD>digits</TD></TR>
	  <TR><TD>graph</TD><TD>printable, non-space characters</TD></TR>
	  <TR><TD>lower</TD><TD>lower case letters</TD></TR>
	  <TR><TD>print</TD><TD>printable characters including spaces</TD></TR>
	  <TR><TD>punct</TD><TD>printable characters which are not spaces,
	  	letters or numbers</TD></TR>
	  <TR><TD>space</TD><TD>spaces, vertical and horizontal tabs,
			formfeeds, newlines, and carriage returns</TD></TR>
	  <TR><TD>upper</TD><TD>upper case letters</TD></TR>
	  <TR><TD>xdigit</TD><TD>hexidecimal digits</TD></TR>
	  </TABLE>
      In addition "<TT>[:&lt;:]</TT>" and "<TT>[:&gt;:]</TT>"
      match the null strings immediately before or after words.
</OL>
If a regular expression could match at more than one place, it matches the
one that starts first.  If it could match different lengths, it matches the
longest.
<P>
The following flags may be given:
<DL>
<DT><TT>i</TT>
<DD>Ignore case.  Upper and lower case letters are treated as identical.
<DT><TT>m</TT>
<DD>Multiline.  Let "<TT>^</TT>" and "<TT>$</TT>"
match against newlines internal to a pattern, not just the
beginning and ending of the pattern.
</DL>
<H2><A NAME="index">Alphabetical Index</A></H2>
<A HREF="#bang_cmd">! command</A><BR>
<A HREF="#concatinate_cmd">' command</A><BR>
<A HREF="#star_cmd">* command</A><BR>
<A HREF="#plusm_cmd">+ math command</A><BR>
<A HREF="#pluss_cmd">+ string command</A><BR>
<A HREF="#minus_cmd">- command</A><BR>
<A HREF="#slash_cmd">/ command</A><BR>
<A HREF="#lbrack_cmd">[ command</A><BR>
<A HREF="#rbrack_cmd">] command</A><BR>
<A HREF="#concatinate_cmd">` command</A><BR>
<A HREF="#tilde_cmd">~ command</A><BR>
<STRONG>- A -</STRONG><BR>
<A HREF="#abs_cmd">abs command</A><BR>
<A HREF="#alias_var">alias variable</A><BR>
<A HREF="#allowanon_var">allowanon variable</A><BR>
<A HREF="#allowgraphics_var">allowgraphics variable</A><BR>
<A HREF="#aload_cmd">aload command</A><BR>
<A HREF="#amadm_var">amadm variable</A><BR>
<A HREF="#amfw_var">amfw variable</A><BR>
<A HREF="#and_cmd">and command</A><BR>
<A HREF="#anonymity_var">anonymity variable</A><BR>
<A HREF="#asort_cmd">asort command</A><BR>
<A HREF="#author_edit_var">author_edit variable</A><BR>
<A HREF="#author_erase_var">author_erase variable</A><BR>
<A HREF="#author_freeze_var">author_freeze variable</A><BR>
<A HREF="#author_hide_var">author_hide variable</A><BR>
<A HREF="#author_kill_var">author_kill variable</A><BR>
<A HREF="#author_retire_var">author_retire variable</A><BR>
<A HREF="#authorid_var">authorid variable</A><BR>
<A HREF="#authorname_var">authorname variable</A><BR>
<A HREF="#authoruid_var">authoruid variable</A><BR>
<STRONG>- B -</STRONG><BR>
<A HREF="#backtalkurl_cmd">backtalkurl command</A><BR>
<A HREF="#band_cmd">band command</A><BR>
<A HREF="#bbsdir_var">bbsdir variable</A><BR>
<A HREF="#begin_cmd">begin command</A><BR>
<A HREF="#blindfold_var">blindfold variable</A><BR>
<A HREF="#bor_cmd">bor command</A><BR>
<A HREF="#break_cmd">break command</A><BR>
<A HREF="#browser_cmd">browser command</A><BR>
<STRONG>- C -</STRONG><BR>
<A HREF="#cache_conflist_cmd">cache_conflist command</A><BR>
<A HREF="#call_cmd">call command</A><BR>
<A HREF="#canspell_var">canspell constant</A><BR>
<A HREF="#cap_cmd">cap command</A><BR>
<A HREF="#caps_cmd">caps command</A><BR>
<A HREF="#cflist_array_cmd">cflist_array command</A><BR>
<A HREF="#cgiquery_var">cgiquery variable</A><BR>
<A HREF="#cgiquote_cmd">cgiquote command</A><BR>
<A HREF="#chain_cmd">chain command</A><BR>
<A HREF="#changeemail_cmd">changeemail command</A><BR>
<A HREF="#changegroup_cmd">changegroup command</A><BR>
<A HREF="#changename_cmd">changename command</A><BR>
<A HREF="#changepass_cmd">changepass command</A><BR>
<A HREF="#chomp_cmd">chomp command</A><BR>
<A HREF="#cleanhtml_cmd">cleanhtml command</A><BR>
<A HREF="#clear_cmd">clear command</A><BR>
<A HREF="#cleartomark_cmd">cleartomark command</A><BR>
<A HREF="#clip_cmd">clip command</A><BR>
<A HREF="#close_conf_cmd">close_conf command</A><BR>
<A HREF="#conf_alias_cmd">conf_alias command</A><BR>
<A HREF="#conf_bull_cmd">conf_bull command</A><BR>
<A HREF="#conf_dir_cmd">conf_dir command</A><BR>
<A HREF="#conf_index_cmd">conf_index command</A><BR>
<A HREF="#conf_login_cmd">conf_login command</A><BR>
<A HREF="#conf_logout_cmd">conf_logout command</A><BR>
<A HREF="#conf_new_cmd">conf_new command</A><BR>
<A HREF="#conf_var">conf variable</A><BR>
<A HREF="#confdir_var">confdir variable</A><BR>
<A HREF="#conflist_var">conflist variable</A><BR>
<A HREF="#conftitle_var">conftitle variable</A><BR>
<A HREF="#constant_cmd">constant command</A><BR>
<A HREF="#continue_cmd">continue command</A><BR>
<A HREF="#copy_cmd">copy command</A><BR>
<A HREF="#copyright_var">copyright variable</A><BR>
<A HREF="#count_cmd">count command</A><BR>
<A HREF="#count_sel_cmd">count_sel command</A><BR>
<A HREF="#counttomark_cmd">counttomark command</A><BR>
<A HREF="#cpass_var">cpass variable</A><BR>
<A HREF="#csel_var">csel variable</A><BR>
<A HREF="#ctime_cmd">ctime command</A><BR>
<A HREF="#cvi_cmd">cvi command</A><BR>
<A HREF="#cvn_cmd">cvn command</A><BR>
<A HREF="#cvs_cmd">cvs command</A><BR>
<A HREF="#cvt_cmd">cvt command</A><BR>
<A HREF="#cvscol_cmd">cvscol command</A><BR>
<STRONG>- D -</STRONG><BR>
<A HREF="#date_var">date variable</A><BR>
<A HREF="#dbtype_var">dbtype variable</A><BR>
<A HREF="#dec_cmd">dec command</A><BR>
<A HREF="#def_cmd">def command</A><BR>
<A HREF="#default_cmd">default command</A><BR>
<A HREF="#defconstant_cmd">defconstant command</A><BR>
<A HREF="#defined_cmd">defined command</A><BR>
<A HREF="#del_conf_cmd">del_conf command</A><BR>
<A HREF="#delgroup_cmd">newgroup command</A><BR>
<A HREF="#delgroupmem_cmd">newgroupmem command</A><BR>
<A HREF="#dfltgroup_cmd">dfltgroup command</A><BR>
<A HREF="#dtime_cmd">dtime command</A><BR>
<A HREF="#dumpstack_cmd">dumpstack command</A><BR>
<A HREF="#dup_cmd">dup command</A><BR>
<STRONG>- E -</STRONG><BR>
<A HREF="#edit_attach_cmd">edit_attach command</A><BR>
<A HREF="#editdate_var">editdate variable</A><BR>
<A HREF="#editfrozen_var">editfrozen variable</A><BR>
<A HREF="#edit_resp_cmd">edit_resp command</A><BR>
<A HREF="#email_body_cmd">email_body command</A><BR>
<A HREF="#email_close_cmd">email_close command</A><BR>
<A HREF="#email_new_cmd">email_new command</A><BR> 
<A HREF="#email_recip_cmd">email_recip command</A><BR>
<A HREF="#email_send_cmd">email_send command</A><BR>
<A HREF="#end_cmd">end command</A><BR>
<A HREF="#eq_cmd">eq command</A><BR>
<A HREF="#erase_resp_cmd">erase_resp command</A><BR>
<A HREF="#erased_var">erased variable</A><BR>
<A HREF="#exch_cmd">exch command</A><BR>
<A HREF="#exec_cmd">exec command</A><BR>
<A HREF="#exec_limit_var">exec_limit variable</A><BR>
<A HREF="#exists_cmd">exists command</A><BR>
<A HREF="#expand_cmd">expand command</A><BR>
<A HREF="#expect_resp_var">expect_resp variable</A><BR>
<STRONG>- F -</STRONG><BR>
<A HREF="#fav_note">fav note</A><BR>
<A HREF="#fav_sel_cmd">fav_sel command</A><BR>
<A HREF="#favicon_var">favicon command</A><BR>
<A HREF="#filedate_cmd">filedate command</A><BR>
<A HREF="#firstuser_cmd">firstuser command</A><BR>
<A HREF="#fishbowl_var">fishbowl variable</A><BR>
<A HREF="#flavor_var">flavor variable</A><BR>
<A HREF="#for_cmd">for command</A><BR>
<A HREF="#forall_cmd">forall command</A><BR>
<A HREF="#forget_item_cmd">forget_item command</A><BR>
<A HREF="#forgotten_var">forgotten variable</A><BR>
<A HREF="#freeze_item_cmd">freeze_item command</A><BR>
<A HREF="#frozen_var">frozen variable</A><BR>
<A HREF="#fw_edit_var">fw_edit variable</A><BR>
<A HREF="#fw_erase_var">fw_erase variable</A><BR>
<A HREF="#fw_hide_var">fw_hide variable</A><BR>
<A HREF="#fw_retitle_var">fw_retitle variable</A><BR>
<A HREF="#fwlist_var">fwlist variable</A><BR>
<STRONG>- G -</STRONG><BR>
<A HREF="#ge_cmd">ge command</A><BR>
<A HREF="#geta_cmd">get array command</A><BR>
<A HREF="#getd_cmd">get dictionary command</A><BR>
<A HREF="#gets_cmd">get string command</A><BR>
<A HREF="#get_attach_cmd">get_attach command</A><BR>
<A HREF="#get_conf_note_cmd">get_conf_note command</A><BR>
<A HREF="#getcookie_cmd">getcookie command</A><BR>
<A HREF="#get_item_note_cmd">get_item_note command</A><BR>
<A HREF="#gid_var">gid variable</A><BR>
<A HREF="#grep_cmd">grep command</A><BR>
<A HREF="#groupid_cmd">groupid command</A><BR>
<A HREF="#grouplist_var">grouplist variable</A><BR>
<A HREF="#groupname_cmd">groupname command</A><BR>
<A HREF="#groups_cmd">groups command</A><BR>
<A HREF="#gt_cmd">gt command</A><BR>
<STRONG>- H -</STRONG><BR>
<A HREF="#halt_cmd">halt command</A><BR>
<A HREF="#hidden_var">hidden variable</A><BR>
<A HREF="#hide_resp_cmd">hide_resp command</A><BR>
<A HREF="#homedir_var">homedir variable</A><BR>
<A HREF="#htime_cmd">htime command</A><BR>
<A HREF="#http_content_type_var">http_content_type variable</A><BR>
<A HREF="#http_expires_var">http_expires variable</A><BR>
<A HREF="#http_headers_var">http_headers variable</A><BR>
<A HREF="#http_location_var">http_location variable</A><BR>
<A HREF="#http_no_cache_var">http_no_cache variable</A><BR>
<STRONG>- I -</STRONG><BR>
<A HREF="#id_var">id variable</A><BR>
<A HREF="#if_cmd">if command</A><BR>
<A HREF="#ifav_var">ifav variable</A><BR>
<A HREF="#ifelse_cmd">ifelse command</A><BR>
<A HREF="#in_cmd">in command</A><BR>
<A HREF="#inc_cmd">inc command</A><BR>
<A HREF="#include_cmd">include command</A><BR>
<A HREF="#index_cmd">index command</A><BR>
<A HREF="#ingroup_cmd">ingroup command</A><BR>
<A HREF="#inlist_cmd">inlist command</A><BR>
<A HREF="#in_sel_cmd">in_sel command</A><BR>
<A HREF="#item_var">item variable</A><BR>
<A HREF="#itime_cmd">itime command</A><BR>
<STRONG>- J -</STRONG><BR>
<A HREF="#jointomark_cmd">jointomark command</A><BR>
<A HREF="#jsquote_cmd">jsquote command</A><BR>
<A HREF="#jump_cmd">jump command</A><BR>
<STRONG>- K -</STRONG><BR>
<A HREF="#kill_item_cmd">kill_item command</A><BR>
<A HREF="#killsession_cmd">killsession command</A><BR>
<A HREF="#known_cmd">known command</A><BR>
<STRONG>- L -</STRONG><BR>
<A HREF="#lastdate_var">lastdate variable</A><BR>
<A HREF="#last_in_conf_var">last_in_conf command</A><BR>
<A HREF="#le_cmd">le command</A><BR>
<A HREF="#lengtha_cmd">length array command</A><BR>
<A HREF="#lengthd_cmd">length dictionary command</A><BR>
<A HREF="#lengths_cmd">length string command</A><BR>
<A HREF="#line_cmd">line command</A><BR>
<A HREF="#link_item_cmd">link_item command</A><BR>
<A HREF="#linkdate_var">linkdate variable</A><BR>
<A HREF="#linked_var">linked variable</A><BR>
<A HREF="#linktonew_var">linktonew variable</A><BR>
<A HREF="#loadvar_cmd">loadvar command</A><BR>
<A HREF="#loginlen_var">loginlen variable</A><BR>
<A HREF="#loglevel_var">loglevel variable</A><BR>
<A HREF="#loop_cmd">loop command</A><BR>
<A HREF="#lt_cmd">lt command</A><BR>
<STRONG>- M -</STRONG><BR>
<A HREF="#mark_cmd">mark command</A><BR>
<A HREF="#mark_unseen_cmd">mark_unseen command</A><BR>
<A HREF="#maxitem_var">maxitem variable</A><BR>
<A HREF="#maxread_var">maxread variable</A><BR>
<A HREF="#maxresp_var">maxresp variable</A><BR>
<A HREF="#mayedit_var">mayedit variable</A><BR>
<A HREF="#mayerase_var">mayerase variable</A><BR>
<A HREF="#mayfreeze_var">mayfreeze variable</A><BR>
<A HREF="#mayhide_var">mayhide variable</A><BR>
<A HREF="#maykill_var">maykill variable</A><BR>
<A HREF="#maypost_var">maypost variable</A><BR>
<A HREF="#mayread_var">mayread variable</A><BR>
<A HREF="#mayresp_var">mayresp variable</A><BR>
<A HREF="#mayretire_var">mayretire variable</A><BR>
<A HREF="#mayretitle_var">mayretitle variable</A><BR>
<A HREF="#mayseealias_var">mayseealias variable</A><BR>
<A HREF="#mayseefname_var">mayseefname variable</A><BR>
<A HREF="#mimename_cmd">mimename command</A><BR>
<A HREF="#mod_cmd">mod command</A><BR>
<STRONG>- N -</STRONG><BR>
<A HREF="#ne_cmd">ne command</A><BR>
<A HREF="#neg_cmd">neg command</A><BR>
<A HREF="#newbie_var">newbie variable</A><BR>
<A HREF="#new_conf_cmd">new_conf command</A><BR>
<A HREF="#newgroup_cmd">newgroup command</A><BR>
<A HREF="#newgroupmem_cmd">newgroupmem command</A><BR>
<A HREF="#newsession_cmd">newsession command</A><BR>
<A HREF="#newuser_cmd">newuser command</A><BR>
<A HREF="#newuseropen_var">newuseropen variable</A><BR>
<A HREF="#next_conf_cmd">next_conf command</A><BR>
<A HREF="#next_int_cmd">next_int command</A><BR>
<A HREF="#next_item_cmd">next_item command</A><BR>
<A HREF="#next_resp_cmd">next_resp command</A><BR>
<A HREF="#nextuser_cmd">nextuser command</A><BR>
<A HREF="#nopwedit_var">nopwedit variable</A><BR>
<A HREF="#noskip_var">noskip variable</A><BR>
<STRONG>- O -</STRONG><BR>
<A HREF="#open_conf_cmd">open_conf command</A><BR>
<A HREF="#or_cmd">or command</A><BR>
<STRONG>- P -</STRONG><BR>
<A HREF="#parentresp_var">parentresp variable</A><BR>
<A HREF="#parse_cmd">parse command</A><BR>
<A HREF="#particip_var">particip variable</A><BR>
<A HREF="#pathname_cmd">pathname command</A><BR>
<A HREF="#pop_cmd">pop command</A><BR>
<A HREF="#post_item_cmd">post_item command</A><BR>
<A HREF="#post_log_file_var">post_log_file command</A><BR>
<A HREF="#post_resp_cmd">post_resp command</A><BR>
<A HREF="#pr_cmd">pr command</A><BR>
<A HREF="#print_cmd">print command</A><BR>
<A HREF="#progname_var">progname variable</A><BR>
<A HREF="#publicflavors_var">publicflavors variable</A><BR>
<A HREF="#puta_cmd">put array command</A><BR>
<A HREF="#putd_cmd">put dictionary command</A><BR>
<STRONG>- Q -</STRONG><BR>
<A HREF="#quote_cmd">quote command</A><BR>
<STRONG>- R -</STRONG><BR>
<A HREF="#rand_cmd">rand command</A><BR>
<A HREF="#read_cmd">read command</A><BR>
<A HREF="#read_item_cmd">read_item command</A><BR>
<A HREF="#read_resp_cmd">read_resp command</A><BR>
<A HREF="#read_text_cmd">read_text command</A><BR>
<A HREF="#readable_cmd">readable command</A><BR>
<A HREF="#readdate_var">readdate variable</A><BR>
<A HREF="#reattach_cmd">reattach command</A><BR>
<A HREF="#remember_item_cmd">remember_item command</A><BR>
<A HREF="#removeuser_cmd">removeuser command</A><BR>
<A HREF="#repeat_cmd">repeat command</A><BR>
<A HREF="#replace_cmd">replace command</A><BR>
<A HREF="#resign_conf_cmd">resign_conf command</A><BR>
<A HREF="#resp_var">resp variable</A><BR>
<A HREF="#retire_item_cmd">retire_item command</A><BR>
<A HREF="#retired_var">retired variable</A><BR>
<A HREF="#retitle_item_cmd">retitle_item command</A><BR>
<A HREF="#rev_sel_cmd">rev_sel command</A><BR>
<A HREF="#rfav_var">rfav variable</A><BR>
<A HREF="#roll_cmd">roll command</A><BR>
<A HREF="#rsel_var">rsel variable</A><BR>
<STRONG>- S -</STRONG><BR>
<A HREF="#saverep_var">saverep variable</A><BR>
<A HREF="#savevar_cmd">savevar command</A><BR>
<A HREF="#scriptdir_var">scriptdir variable</A><BR>
<A HREF="#scriptname_var">scriptname variable</A><BR>
<A HREF="#search_cmd">search command</A><BR>
<A HREF="#secret_var">secret variable</A><BR>
<A HREF="#secure_var">secure variable</A><BR>
<A HREF="#select_cmd">select command</A><BR>
<A HREF="#selectuser_cmd">selectuser command</A><BR>
<A HREF="#serverurl_cmd">serverurl command</A><BR>
<A HREF="#sessions_var">sessions variable</A><BR>
<A HREF="#set_conf_note_cmd">set_conf_note command</A><BR>
<A HREF="#setcookie_cmd">setcookie command</A><BR>
<A HREF="#set_item_note_cmd">set_item_note command</A><BR>
<A HREF="#showforgotten_var">showforgotten variable</A><BR>
<A HREF="#showopt_cmd">showopt command</A><BR>
<A HREF="#since_var">since variable</A><BR>
<A HREF="#snoop_conf_cmd">snoop_conf command</A><BR>
<A HREF="#spellcheck_cmd">spellcheck command</A><BR>
<A HREF="#spell_lang_var">spell_lang variable</A><BR>
<A HREF="#spell_ignore_var">spell_ignore variable</A><BR>
<A HREF="#split_cmd">split command</A><BR>
<A HREF="#srand_cmd">srand command</A><BR>
<A HREF="#stack_limit_var">stack_limit variable</A><BR>
<A HREF="#stop_cmd">stop command</A><BR>
<A HREF="#stopped_cmd">stopped command</A><BR>
<A HREF="#store_cmd">store command</A><BR>
<A HREF="#substr_cmd">substr command</A><BR>
<STRONG>- T -</STRONG><BR>
<A HREF="#tail_cmd">tail command</A><BR>
<A HREF="#text_var">text variable</A><BR>
<A HREF="#texttype_var">texttype variable</A><BR>
<A HREF="#this_item_cmd">this_item command</A><BR>
<A HREF="#time_cmd">time command</A><BR>
<A HREF="#timeout_cmd">timeout command</A><BR>
<A HREF="#timezone_var">timezone variable</A><BR>
<A HREF="#title_var">title variable</A><BR>
<STRONG>- U -</STRONG><BR>
<A HREF="#uid_var">uid variable</A><BR>
<A HREF="#undef_cmd">undef command</A><BR>
<A HREF="#undefconstant_cmd">undefconstant command</A><BR>
<A HREF="#unhtml_cmd">unhtml command</A><BR>
<A HREF="#urlarg_var">urlarg variable</A><BR>
<A HREF="#useremail_cmd">useremail command</A><BR>
<A HREF="#userinfo_cmd">userinfo command</A><BR>
<A HREF="#userlist_var">userlist variable</A><BR>
<STRONG>- V -</STRONG><BR>
<A HREF="#validate_cmd">validate command</A><BR>
<A HREF="#version_var">version variable</A><BR>
<STRONG>- W -</STRONG><BR>
<A HREF="#while_cmd">while command</A><BR>
<A HREF="#wrap_cmd">wrap command</A><BR>
<A HREF="#writable_cmd">writable command</A><BR>
<A HREF="#write_cmd">write command</A><BR>
<STRONG>- X -</STRONG><BR>
<A HREF="#def_cmd">xdef command</A><BR>
<A HREF="#defconstant_cmd">xdefconstant command</A><BR>
<STRONG>- Y -</STRONG><BR>
<A HREF="#yapp_format_var">yapp_format variable</A><BR>
<STRONG>- Z -</STRONG><BR>
<A HREF="#ztime_cmd">ztime command</A><BR>
<HR>
<ADDRESS>
<A HREF="mailto:backtalk@hvcn.org">backtalk@hvcn.org</A>
Tue Sep 17 08:57:57 EDT 2002
</ADDRESS>
</BODY>
</HTML>
